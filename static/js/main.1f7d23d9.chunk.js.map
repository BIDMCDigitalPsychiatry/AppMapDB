{"version":3,"sources":["images/logo.png","components/layout/LayoutStore.ts","components/application/GenericDialog/reducers.tsx","components/application/Selector/SelectorStore.ts","components/application/SnackBar/reducers.tsx","database/reducers.tsx","store.ts","storeConfig.ts","components/layout/ViewPort.tsx","components/pages/RatingProcess.tsx","components/pages/Framework.tsx","components/application/GenericTable/constants.tsx","components/application/GenericTable/TableToolbar.tsx","components/general/TabSelector/TabSelector.tsx","components/application/GenericTable/TableTabSelector.tsx","components/application/GenericTable/GenericTableContainer.tsx","components/application/GenericTable/tablehelpers.tsx","database/dbConfig.ts","components/application/GenericTable/Applications/selectors.tsx","components/application/GenericDialog/actions.tsx","components/application/GenericDialog/DialogButton.tsx","components/application/GenericDialog/helpers.tsx","components/application/GenericDialog/ErrorGate.tsx","components/application/DialogField/Text.tsx","components/application/GenericDialog/Fields.tsx","components/application/GenericPopover/GenericPopover.tsx","components/application/DialogField/MultiSelectCheck.tsx","database/models/Application.tsx","components/general/OutlinedSelect/OutlinedSelect.tsx","components/application/DialogField/Select.tsx","components/application/GenericPopover/Filter/index.tsx","hooks.tsx","components/application/GenericDialog/GenericDialog.tsx","components/application/GenericDialog/GettingStarted/index.tsx","components/general/OutlinedDiv/OutlinedDiv.tsx","components/application/DialogField/Rating.tsx","components/application/GenericDialog/RateApp/index.tsx","components/application/GenericTable/ApplicationsList/table.tsx","components/application/GenericTable/Applications/table.tsx","database/actions.tsx","components/pages/Apps.tsx","components/layout/routes.tsx","components/application/GenericDialog/OnActivate.tsx","components/application/GenericDialog/GenericStepperDialog.tsx","components/application/DialogField/Radio.tsx","components/application/GenericDialog/RateNewApp/index.tsx","components/layout/hooks.tsx","components/layout/ApplicationBar.tsx","components/layout/Footer.tsx","components/application/SnackBar/actions.tsx","components/application/SnackBar/SnackBar.tsx","components/layout/Layout.tsx","components/layout/AppRouter.tsx","database/seed.ts","App.tsx","serviceWorker.js","index.js","helpers.tsx","components/application/GenericTable/TableStore.ts","constants.tsx"],"names":["module","exports","defaultState","width","height","appBarHeight","theme","layout","toolbarheight","viewMode","useHeight","useSelector","state","useWidth","useViewMode","dispatch","useDispatch","setViewMode","React","mode","actionCreators","AViewMode","AResizeViewPort","type","AResizeAppBar","defaultDialogState","open","errors","showErrors","submitting","initialValues","initialState","updateState","action","data","payload","id","newState","snackBarReducer","table","undefined","reducers","dialog","Table","selector","snackBar","database","localforage","driver","name","packageJson","version","size","storeName","description","persistConfig","key","storage","ViewPortDimensions","props","containerHeight","containerWidth","resizeViewPort","useStyles","makeStyles","createStyles","dimensions","overflow","position","static","flexGrow","zIndex","display","ViewPort","children","classes","LayoutStore","useTheme","className","style","backgroundColor","RatingProcess","Framework","icons","icon","palette","spacing","typography","root","paper","color","common","white","background","primary","main","formControl","marginBottom","paddingRight","searchIcon","underline","borderBottom","title","h4","paddingLeft","fontSize","pxToRem","fontWeight","titleicon","marginTop","grid","tabletoolbarheight","hidden","TableToolbar","searchOpen","setSearchOpen","buttons","square","inputplaceholder","renderIcon","search","showicon","useTable","searchtext","handleOpenSearch","inputRef","tableUpdate","useTableUpdate","updateTable","value","handleClear","event","handleKeyDown","preventDefault","current","focus","addEventListener","removeEventListener","handleChange","target","Search","FormControl","Input","disableUnderline","onChange","placeholder","startAdornment","InputAdornment","endAdornment","IconButton","onClick","Buttons","Tooltip","placement","Typography","variant","Fab","margin","evalFunc","filter","b","widths","contentpadding","headerpadding","iconwidth","titlepadding","titleminwidth","calculatedbuttonswidth","length","calculatedfullwidth","Object","keys","map","k","reduce","t","a","tabletitlevisible","tableiconvisible","Paper","Grid","container","justify","alignItems","item","xs","zeroMinWidth","find","x","noWrap","direction","i","rounded","grey","borderRadius","tabs","minHeight","indicator","labelIcon","tabroot","padding","minWidth","wrapper","justifyContent","flexDirection","TabSelector","orientation","wrapped","useCallback","updateSelector","useTabSelector","tabSelector","setTabSelector","selected","tabId","isEmpty","triggerResize","Tabs","scrollButtons","Tab","label","maxWidth","connect","ownProp","storeTable","tab","GenericTable","GenericTableContainer","Height","toolbar","stacked","toolbarplaceholder","Columns","columns","loading","dialogs","onChangeTab","tableProps","layoutHeight","forEach","column","renderCell","cell","row","col","getValues","Cell","Component","injectValues","applyCellRenderers","_toolbar","filterbar","rows","component","tablefilterbarheight","calculatedheight","contentrowspacing","footerheight","c","spinner","elevation","CircularProgress","thickness","fallback","push","d","r","paddingBottom","sortComparators","text","orderBy","isMatch","obj","re","attrname","includes","toLowerCase","isNaN","match","e","toString","isColumnExactMatch","cf","table_filter","columnfilter","performcolumnfilter","performtextfilter","RegExp","stableSort","array","cmp","stabilizedThis","el","index","sort","order","getSorting","sortComparator","nano","Nano","tables","DB","applications","db","use","process","ratings","filters","from_database","apps","ix_app_ratings","app","ratingIds","_id","rating","Decimal","decimalsum","dividedBy","toPrecision","company","costs","join","platforms","features","functionalities","conditions","privicies","clinicalFoundation","clincialFoundation","Features","Conditions","Platforms","Cost","Privacy","ClinicalFoundation","columnfiltervalue","columnfiltercolumn","filtered","orderDirection","tableFilter","useDialogState","updateDialog","renderDialogModule","Dialog","default","StyledBadge","withStyles","badge","top","right","border","Badge","TableFilterDialogButton","Module","Icon","Icons","tooltip","useTableFilterValues","values","setValues","filterCount","handleReset","badgeContent","overlap","anchorOrigin","horizontal","vertical","DialogButton","onReset","listitem","Content","Id","disabled","AddIcon","noGrid","mount","onClose","other","setDialogState","useState","anchorEl","setAnchorEl","other_s","JSON","stringify","handleUpdate","parse","handleClose","shared","currentTarget","checkEmpty","ListItem","button","ListItemText","Button","fullWidth","Link","cursor","light","marginLeft","setMappedValue","field","prev","object","getValue","f","getMappedValue","singleValue","isDisabled","isActive","active","isHidden","useValues","fields","InitialValues","setState","validate","externalValues","externalSetValues","defaultValues","initialValue","getDefaultValues","mergedInitialValues","merge","internalValues","setInternalValues","vals","touched","setTouched","mergedInitialValuesStr","initializeValues","useEffect","internalErrors","handleValidation","externalErrors","errorCount","isError","uppercase","toUpperCase","useHandleChange","handleBlur","hasChanged","mapField","required","autoFocus","InputProps","min","max","multiline","getProps","disableCloseOnSelect","error","showError","getLabel","onBlur","items","bindField","Errors","email","validateEmail","emptyUndefined","ErrorGate","align","Text","forceErrorMargin","TextField","helperText","InputLabelProps","shrink","getColumnFields","numFields","numCols","numColsField","Math","ceil","startIndex","endIndex","MapField","Field","collapse","wrappeditem","Item","debugSettings","debugfieldonhover","Collapse","in","Fields","minColumnWidth","maxColumnWidth","Array","from","deleteButton","dark","deleteButtonEmpty","submitProgress","left","progressSize","card","GenericPopover","Title","cancelLabel","deleteLabel","submitLabel","onSubmit","onDelete","confirmDelete","setConfirmDelete","handleConfirmDelete","values_s","handleSubmit","handleDelete","contentProps","inProgress","Popover","Boolean","transformOrigin","Card","CardHeader","aria-label","Divider","CardContent","marginRight","CardActions","checkedIcon","MuliSelectCheck","Autocomplete","multiple","options","getOptionLabel","option","renderOption","Checkbox","checked","renderInput","params","Costs","ClinicalFoundations","Privacies","Functionalities","DeveloperTypes","OutlinedSelect","inputLabel","useRef","labelWidth","setLabelWidth","offsetWidth","InputLabel","ref","notched","setIfEmpty","FormHelperText","Select","MenuItem","FilterPopover","MultiSelectCheck","useFullScreen","useMediaQuery","breakpoints","down","PaperComponent","cancel","outline","dialogHeader","capitalize","textTransform","content","actions","paddingTop","closeButton","GenericDialog","draggable","fullScreen","aria-labelledby","aria-describedby","disableAutoFocus","DialogTitle","disableTypography","DialogContent","dividers","DialogActions","url","controls","GettingStartedDialog","shape","borderColor","transform","notchedOutline","OutlinedDiv","labelRef","labelNode","ReactDOM","findDOMNode","htmlFor","Rating","precision","RateApp","dialogState","StyledRadio","ViewModeButton","handleClick","defaultProps","RateAppDialog","header","src","logo","alt","g","selectors","footer","includeHeaders","fixedRowCount","rowHeight","ApplicationsList","showScroll","center","textAlign","CenterRadio","buildRadios","RatingsColumn","Number","readOnly","appId","Applications","useTableState","setDatabaseTable","useApplications","useRatings","useRatingsLength","useAutoBuildIndex","setIndex","console","log","useIndexAppRatings","buildIndex","ratingsCount","Apps","setApps","setRatings","list","include_docs","then","body","result","doc","Routes","exact","path","publicUrl","OnActivate","activeIndex","onActivate","activated","setActivated","dialogActions","dialogTitle","mobileStepper","GenericStepperDialog","steps","activeStep","setActiveStep","setShowErrors","show","s","activeSteps","enabled","currentStep","stepValidate","activeErrorCount","handleNext","next","newValues","prevActiveStep","handleBack","Chip","Step","MobileStepper","nextButton","backButton","Radio","RadioGroup","FormControlLabel","control","RateNewAppDialog","processData","pdis","address","handleProcessData","Action","isArray","dt","useAppBarHeightRef","useComponentSize","resizeAppBar","useResizeAppBar","shadows","appBar","ApplicationBar","pathname","useLocation","history","useHistory","changeRoute","route","handleRateApp","AppBar","Toolbar","ButtonGroup","bottomAppBar","bottom","drawer","bottomToolBar","Footer","href","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","green","amber","iconVariant","opacity","message","SnackBar","shallowEqual","updateSnackBar","useSnackBar","setSnackBar","reason","Snackbar","autoHideDuration","SnackbarContent","clsx","mixins","flexShrink","innerContent","Layout","data-testid","location","router","getRandom","randomInt","count","failed","r_success","r_failed","insert","companies","response","ok","j","review","r_response","createBrowserHistory","window","initialReduxState","store","appConfig","windowIfDefined","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","allReducers","combineReducers","assign","connectRouter","buildRootReducer","persistedReducer","persistReducer","compose","applyMiddleware","thunk","routerMiddleware","createStore","createStoreWithMiddleware","configureStore","persistor","getState","persistStore","AppWrapper","seed","force","asyncSeed","App","Suspense","hostname","printHeader","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","debugoutput","logviewport","logrender","logmapping","logreducer","logselectors","logform","logformupdates","append","protocol","port","initial","test","String","spread","final","str","dispatchEvent","CustomEvent","setTimeout","floor","random","total","amount","add","ATableUpdate","tableFilterUpdate","ATableFilterUpdate","useTableFilterUpdate","setDefaults","reducer","hydratestate","basetheme","createMuiTheme","tablefooterheight","tableRowHeight","overrides","MuiTooltip","MuiTypography","h6","lineHeight","subtitle1","MuiDialogTitle","MuiDialogActions","flex","MuiListItemIcon"],"mappings":"mGAAAA,EAAOC,QAAU,IAA0B,kC,8tECerCC,EAAe,CACnBC,MAAO,EACPC,OAAQ,EACRC,aAAeC,IAAcC,OAAOC,cACpCC,SAAU,SA+CCC,EAAY,WACvB,OAAOC,aAAY,SAACC,GAAD,OAAqBA,EAAML,OAAOH,WAG1CS,EAAW,WACtB,OAAOF,aAAY,SAACC,GAAD,OAAqBA,EAAML,OAAOJ,UAO1CW,EAAc,WACzB,IAAMC,EAAWC,cACXC,EAAcC,eAAkB,SAAAC,GAAI,OAAIJ,EAASK,EAAeC,UAAUF,MAAQ,CAACJ,IAEzF,MAAO,CADUJ,aAAY,SAACC,GAAD,OAAqBA,EAAML,OAAOE,YAC7CQ,IAGPG,EAAiB,CAC5BE,gBAAiB,SAAClB,EAA4BD,GAA7B,OAAwF,SAAAY,GACvGA,EAAS,CAAEQ,KAAM,kBAAmBnB,OAAQA,EAAQD,MAAOA,MAE7DqB,cAAe,SAACpB,GAAD,OAA6D,SAAAW,GAC1EA,EAAS,CAAEQ,KAAM,gBAAiBnB,aAEpCiB,UAAW,SAACF,GAAD,OAAiD,SAAAJ,GAC1DA,EAAS,CAAEQ,KAAM,YAAaJ,Y,QC7FrBM,EAAqB,CAChCC,MAAM,EACNH,KAAM,MACNI,OAAQ,GACRC,YAAY,EACZC,YAAY,EACZC,cAAe,IAGXC,EAAe,CACnB,kBAAmB,CAAEL,MAAM,IAI7B,SAASM,EAAYpB,EAAOqB,GAC1B,IAAMC,EAAiC,oBAAnBD,EAAOE,QAAyBF,EAAOE,QAAQvB,EAAMqB,EAAOG,KAAOH,EAAOE,QAC1FE,EAAQ,eAAQzB,GAKpB,OAJAyB,EAASJ,EAAOG,IAAMF,EAClBtB,GAASA,EAAMqB,EAAOG,MACxBC,EAASJ,EAAOG,IAAMF,GAEjBG,ECjBT,IAAMN,EAAe,GACf7B,EAAe,GAYrB,SAAS8B,EAAYpB,EAAOqB,GAC1B,IAAMC,EAAiC,oBAAnBD,EAAOE,QAAyBF,EAAOE,QAAQvB,EAAMqB,EAAOG,KAAOH,EAAOE,QAC1FE,EAAQ,eAAQzB,GAKpB,OAJAyB,EAASJ,EAAOG,IAAMF,EAClBtB,GAASA,EAAMqB,EAAOG,MACxBC,EAASJ,EAAOG,IAAMF,GAEjBG,ECnBT,IAAMN,EAAe,GAcNO,EAZS,WAAmC,IAAlC1B,EAAiC,uDAAzBmB,EAAcE,EAAW,uCACxD,OAAQA,EAAOV,MACb,IAAK,WACH,OAAO,eACFX,EADL,GAEKqB,EAAOE,SAEd,QACE,OAAOvB,ICfPmB,EAAe,GAGrB,SAASC,EAAYpB,EAAOqB,GAAS,IAC3BM,EAAuBN,EAAvBM,MAAOH,EAAgBH,EAAhBG,GAAID,EAAYF,EAAZE,QACbD,EAA0B,oBAAZC,EAAyBA,EAAQvB,EAAM2B,GAAS3B,EAAM2B,GAAOH,QAAMI,GAAaP,EAAOE,QACvGE,EAAQ,eAAQzB,GASpB,OARKyB,EAASE,GAGZF,EAASE,GAAOH,GAAMF,EAFtBG,EAASE,GAAS,CAAEH,GAAIF,GAItBtB,GAASA,EAAM2B,IAAU3B,EAAM2B,GAAOH,KACxCC,EAASE,GAAOH,GAAMF,GAEjBG,ECMF,IAAMI,EAAW,CACtBlC,OL2EqC,SAACK,EAAoBqB,GAC1D,OAAQA,EAAOV,MACb,IAAK,gBACH,OAAO,eACFX,EADL,CAEEP,aAAc4B,EAAO7B,SAEzB,IAAK,kBACH,OAAO,eACFQ,EADL,CAEER,OAAQ6B,EAAO7B,OACfD,MAAO8B,EAAO9B,QAElB,IAAK,YACH,OAAO,eACFS,EADL,CAEEH,SAAUwB,EAAOd,OAIvB,OAAOP,GAAK,eAASV,IK9FrBwC,OJCa,WAAsD,IAA/B9B,EAA8B,uDAAtBmB,EAAcE,EAAQ,uCAClE,OAAQA,EAAOV,MACb,IAAK,gBACH,OAAOS,EAAYpB,EAAOqB,GAC5B,IAAK,SACH,OAAOF,EACT,QACE,OAAOnB,IIPX2B,MAAOI,IACPC,SHEK,WAAgD,IAA/BhC,EAA8B,uDAAtBmB,EAAcE,EAAQ,uCACpD,OAAQA,EAAOV,MACb,IAAK,kBACH,OAAOS,EAAYpB,EAAOqB,GAC5B,IAAK,SACH,OAAOF,EACT,QACE,OAAOnB,IGRXiC,SAAUP,EACVQ,SDTa,WAAsD,IAA/BlC,EAA8B,uDAAtBmB,EAAcE,EAAQ,uCAClE,OAAQA,EAAOV,MACb,IAAK,qBACH,IAAIc,EAAQ,eAAQzB,GAEpB,OADAyB,EAASJ,EAAOM,OAASN,EAAOE,QACzBE,EACT,IAAK,kBACH,OAAOL,EAAYpB,EAAOqB,GAC5B,IAAK,SACH,OAAOF,EACT,QACE,OAAOnB,K,qDEnBbmC,GACEA,UACAA,SAAmB,CACjBC,OAAQD,YACRE,KAAK,GAAD,OAAKC,EAAYD,KAAjB,kBACJE,QAAS,EACTC,KAAM,QACNC,UAAW,gBACXC,YAAY,GAAD,OAAKJ,EAAYD,KAAjB,2BAGR,IAAMM,EAAgB,CAC3BC,IAAK,MACLC,QAASV,G,+DCZLW,EAAqB,SAACC,GAAoC,IACtDC,EAAoDD,EAApDC,gBAAiBC,EAAmCF,EAAnCE,eAAgBC,EAAmBH,EAAnBG,eAKzC,OAJA5C,aAAgB,WACd4C,EAAeF,EAAiBC,KAC/B,CAACD,EAAiBC,EAAgBC,IAE9B,kCAGHC,EAAYC,aAAW,kBAC3BC,YAAa,CACXC,WAAY,CACVC,SAAU,SACVC,SAAU,QACVjE,MAAO,cACPC,OAAQ,eAEViE,OAAQ,CACNC,SAAU,EACVC,OAAQ,EACRJ,SAAU,SACVC,SAAU,QACVI,QAAS,SACTrE,MAAO,aA2BEsE,EAtBE,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACZC,EAAUZ,EAAU,IADO,EPoC1B,CAACrD,IAAaG,KOpCY,mBAE1BT,EAF0B,KAElBD,EAFkB,KAG3B2D,EPmByB,WAC/B,IAAM/C,EAAWC,cACjB,OAAOE,eAAkB,SAACd,EAAQD,GAAT,OAAmBY,EAASK,EAAeE,gBAAgBlB,EAAQD,MAAS,CAACY,IOrB/E6D,GACfrE,EAAWsE,cAAXtE,OACR,OACE,gCACE,uBAAKuE,UAAWH,EAAQT,YACtB,gBAAC,IAAD,MACG,gBAAG9D,EAAH,EAAGA,OAAQD,EAAX,EAAWA,MAAX,OACC,gBAAC,EAAD,CAAoByD,gBAAiBxD,EAAQyD,eAAgB1D,EAAO2D,eAAgBA,QAK1F,uBAAK1B,GAAG,WAAW0C,UAAWH,EAAQN,OAAQU,MAAO,CAAE3E,SAAQD,QAAO6E,gBAAiBzE,EAAOyE,kBAC3FN,K,QCrDM,SAASO,IACtB,OAAO,8DCDM,SAASC,IACtB,OAAO,yD,kNCAIC,GAAQ,CACnB,CACElC,KAAM,UACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAAwBA,UAAWA,MAG9C,CACE7B,KAAM,YACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAA8BA,UAAWA,MAGpD,CACE7B,KAAM,YACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAAwBA,UAAWA,MAG9C,CACE7B,KAAM,YACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAAkBA,UAAWA,MAGxC,CACE7B,KAAM,QACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAAcA,UAAWA,MAGpC,CACE7B,KAAM,mBACNmC,KAAM,SAAAN,GACJ,OAAO,gBAAC,KAAD,CAAuBA,UAAWA,MAG7C,CACE7B,KAAM,YACNmC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAqBA,UAAWA,MAErD,CAAE7B,KAAM,YAAamC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAYA,UAAWA,MAC/D,CACE7B,KAAM,WACNmC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAsBA,UAAWA,MAEtD,CACE7B,KAAM,YACNmC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAkBA,UAAWA,MAElD,CACE7B,KAAM,mBACNmC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAiBA,UAAWA,MAEjD,CACE7B,KAAM,iBACNmC,KAAM,SAAAN,GAAS,OAAI,gBAAC,KAAD,CAAiBA,UAAWA,O,gDCjC7Cf,GAAYC,aAAW,gBAAGqB,EAAH,EAAGA,QAASC,EAAZ,EAAYA,QAASC,EAArB,EAAqBA,WAAYhF,EAAjC,EAAiCA,OAAjC,OAC3B0D,YAAa,CACXuB,KAAM,GACNC,MAAO,CACLC,MAAOL,EAAQM,OAAOC,MACtBC,WAAYR,EAAQS,QAAQC,MAE9BC,YAAa,CACXC,aAAc,EACdC,aAAcZ,EAAQ,GACtBnF,MAAO,KAETgG,WAAY,CACVT,MAAOL,EAAQM,OAAOC,OAExBQ,UAAW,CACTV,MAAOL,EAAQM,OAAOC,MACtBS,aAAa,aAAD,OAAehB,EAAQM,OAAOC,QAE5CU,MAAM,eACDf,EAAWgB,GADX,CAEHC,YAAalB,EAAQ,IACrBI,MAAOL,EAAQM,OAAOC,MACtBa,SAAUlB,EAAWmB,QAAQ,IAC7BC,WAAY,QAEdC,UAAW,CACTxG,OAAQ,GACRD,MAAO,GACPuF,MAAOL,EAAQM,OAAOC,MACtBiB,UAAW,GAEbC,KAAM,CACJ3C,SAAU,SACV+B,aAAcZ,EAAQ,GACtBkB,YAAalB,EAAQ,GACrBlF,OAAQG,EAAOwG,oBAEjBC,OAAQ,CACNxC,QAAS,aAwMAyC,OAnMf,SAAsBtD,GACpB,IAAMgB,EAAUZ,GAAU,IADoB,EAEV7C,YAAe,GAFL,mBAEvCgG,EAFuC,KAE3BC,EAF2B,KAGtC5G,EAAWsE,cAAXtE,OACA0C,EAAmGU,EAAnGV,KAJsC,EAI6DU,EAA7FyD,eAJgC,MAItB,GAJsB,EAIlBC,EAA+E1D,EAA/E0D,OAAQf,EAAuE3C,EAAvE2C,MAAOgB,EAAgE3D,EAAhE2D,iBAAkBlC,EAA8CzB,EAA9CyB,KAAMmC,EAAwC5D,EAAxC4D,WAAYC,EAA4B7D,EAA5B6D,OAJjC,EAI6D7D,EAApB8D,gBAJzC,WAMlBC,YAASzE,GAA7B0E,kBANsC,MAMzB,GANyB,EAQ9CzG,aAAgB,WACK,OAAfyG,QAAsCnF,IAAfmF,GAA2C,KAAfA,GACrDC,OAIJ,IAAMzH,EAAQU,IAER+G,EAAmB1G,eAAkB,kBAAMiG,GAAc,KAAO,CAACA,IAEjEU,EAAW3G,SAAa,MAExB4G,EAAcC,cAEdC,EAAc9G,eAClB,SAAA+G,GAAK,OACHH,EAAY,CACV1F,GAAIa,EACJ0E,WAAYM,MAEhB,CAAChF,EAAM6E,IAGHI,EAAchH,eAClB,SAAAiH,GACEH,EAAY,IACZb,GAAc,KAEhB,CAACa,EAAab,IAGViB,EAAgBlH,eACpB,SAAAiH,GACoB,WAAdA,EAAM3E,MACR2E,EAAME,iBACNH,EAAYC,MAGhB,CAACD,IAGHhH,aAAgB,WACd,IAAMoH,EAAUT,GAAYA,EAASS,QASrC,OARIpB,EACEoB,IACFA,EAAQC,QACRD,EAAQE,iBAAiB,UAAWJ,IAGtCE,EAAQG,oBAAoB,UAAWL,GAElC,WACDE,GAAWpB,GACboB,EAAQG,oBAAoB,UAAWL,MAG1C,CAACP,EAAUX,EAAYkB,IAE1B,IAAMM,EAAexH,eACnB,SAAAiH,GACEH,EAAYG,EAAMQ,OAAOV,SAE3B,CAACD,IAGGY,EACJ,gBAACC,GAAA,EAAD,CAAa/D,UAAWH,EAAQqB,aAC9B,gBAAC8C,GAAA,EAAD,CACEC,kBAAkB,EAClBpE,QAAS,CAAEyB,UAAWzB,EAAQyB,WAC9B6B,MAAON,GAA0B,GACjCqB,SAAUN,EACVO,YAAa3B,EACb4B,eACE,gBAACC,GAAA,EAAD,CAAgB/E,SAAS,SACvB,gBAAC,KAAD,CAAcU,UAAWH,EAAQwB,cAGrCiD,aACE,gBAACD,GAAA,EAAD,CAAgB/E,SAAS,OACvB,gBAACiF,GAAA,EAAD,CAAYvE,UAAWH,EAAQwB,WAAYmD,QAASpB,GAClD,gBAAC,KAAD,MAAgB,KACJ,KAGlBL,SAAUA,KAuBZ0B,EAAU,EAjBD,IAAX/B,GAAoBA,EAClB,gCACE,gBAACgC,GAAA,EAAD,CACEC,UAAU,SACVnD,MACE,gBAACoD,GAAA,EAAD,CAAYC,QAAQ,KAAKjE,MAAM,WAA/B,WAKF,gBAACkE,GAAA,EAAD,CAAKD,QAAQ,WAAWvG,KAAK,QAAQsC,MAAM,UAAU4D,QAAS1B,GAC5D,gBAAC,KAAD,CAAc7C,MAAO,CAAE8E,QAAS,QAIpC,MAEQ,oBAAkBC,aAAS1C,EAASzD,KAAQoG,QAAO,SAAAC,GAAC,OAAIA,KAIhEC,EAAS,CACbC,eAAwC,EAAxB3J,EAAO2J,eACvBC,cAAe,GACfC,UAAW,GACXC,aAAc,EACdC,cAAe,GACfC,uBAPkB,GAOMhB,EAAQiB,OARZ,GAQoDjB,EAAQiB,OAAS,EAAIjB,EAAQiB,OAAS,EAAI,IAG9GC,EAAsBC,OAAOC,KAAKV,GACrCW,KAAI,SAAAC,GAAC,OAAIZ,EAAOY,MAChBC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GAGrBC,EAAoB9K,GAASsK,EAC7BS,EAAmB/K,GAHMsK,EAAsBR,EAAOI,aAAeJ,EAAOK,cAKlF,OACE,gBAACa,GAAA,EAAD,CAAOrG,UAAWH,EAAQc,MAAO4B,OAAQA,GACvC,gBAAC+D,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,EAAGgG,QAAQ,gBAAgBC,WAAW,SAASzG,UAAWH,EAAQmC,MACzF,gBAACsE,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACC,cAAY,GACxB,gBAACN,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,aAAaC,WAAW,UAC7CL,IAAiC,IAAbzD,GACnB,gBAAC2D,GAAA,EAAD,CAAMI,MAAI,GACPjE,EACCA,EAAW5D,GAEX,gBAAC6F,GAAA,EAAD,CAASlD,MAAOA,GACd,2BACGlB,IAEGD,GAAMwG,MAAK,SAAAC,GAAC,OAAIA,EAAE3I,OAASA,KAC7BkC,GAAMwG,MAAK,SAAAC,GAAC,OAAIA,EAAE3I,OAASA,KAAMmC,KAAKT,EAAQiC,WAC5CzB,GAAMwG,MAAK,SAAAC,GAAC,OAAIA,EAAE3I,OAASqD,KAC7BnB,GAAMwG,MAAK,SAAAC,GAAC,OAAIA,EAAE3I,OAASqD,KAAOlB,KAAKT,EAAQiC,WAE/C,gBAAC,KAAD,CAAY9B,UAAWH,EAAQiC,gBAO1CqE,GACC,gBAACG,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACC,cAAY,GACvBpF,GACC,gBAACoD,GAAA,EAAD,CAAYC,QAAQ,QAAQkC,QAAM,EAAC/G,UAAWH,EAAQ2B,OACnDA,MAOb,gBAAC8E,GAAA,EAAD,CAAMI,MAAI,GACR,gBAACJ,GAAA,EAAD,CAAMC,WAAS,EAACS,UAAU,MAAMR,QAAQ,WAAWC,WAAW,SAASjG,QAzDzD,GA0DZ,gBAAC8F,GAAA,EAAD,CAAMI,MAAI,GACR,uBAAKzG,MAAO,CAAEP,QAAS0C,EAAa,GAAK,SAAW0B,IAClD1B,GACA,gBAACkE,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,GACtBiE,EAAQqB,KAAI,SAACZ,EAAG+B,GAAJ,OACX,gBAACX,GAAA,EAAD,CAAM5H,IAAKuI,EAAGP,MAAI,GACf1B,aAASE,c,oBC5O1BjG,GAAYC,aAAW,gBAAGqB,EAAH,EAAGA,QAAH,OAC3BpB,YAAa,CACXuB,KAAM,gBAAGwG,EAAH,EAAGA,QAAH,MAAkB,CACtBnG,WAAYR,EAAQ4G,KAAK,KACzBC,aAAcF,OAAUxJ,EAAY,IAEtC2J,KAAM,kBAAyB,CAC7BC,UADI,EAAGA,UAEPF,aAAc,YAEhBG,UAAW,CACTxG,WAAYR,EAAQS,QAAQC,KAC5B3F,OAAQ,OACRmE,OAAQ,EACR2H,aAAc,WAEhBI,UAAW,gBAAGF,EAAH,EAAGA,UAAH,MAAyB,CAClC1G,MAAOL,EAAQM,OAAOC,MACtBrB,OAAQ,EACR6H,cAEFG,QAAS,gBAAGH,EAAH,EAAGA,UAAH,MAAyB,CAChCI,QAAS,EACT9G,MAAOL,EAAQM,OAAOC,MACtBrB,OAAQ,EACRkI,SAAU,GACVL,cAEFM,QAAS,CACPlI,QAAS,cACT+G,WAAY,SACZoB,eAAgB,SAChBxM,MAAO,OACPyM,cAAe,SACfV,aAAc,gBA2ELW,GA/DK,SAAC,GAA6F,IAA3FzK,EAA0F,EAA1FA,GAA0F,IAAtF+J,YAAsF,MAA/E,GAA+E,EAA3EW,EAA2E,EAA3EA,YAAaC,EAA8D,EAA9DA,QAA8D,IAArDX,iBAAqD,MAAzC,GAAyC,MAArCJ,QACpErH,EAAUZ,GAAU,CAAEqI,YAAWJ,aADwE,aVrDnF,SAAA5J,GAC5B,IAAMrB,EAAWC,cAGjB,MAAO,CAFOL,aAAY,SAACC,GAAD,OAAqBA,EAAMgC,SAASR,IAAOlC,KACpDgB,IAAM8L,aAAY,SAAA7K,GAAO,OAAIpB,EALzB,SAACqB,EAAID,GAAL,MAAkB,CAAEZ,KAAM,kBAAmBa,KAAID,WAKf8K,CAAe7K,EAAID,MAAW,CAACC,EAAIrB,KUqDpDmM,CAAe9K,GAH0D,mBAGxG+K,EAHwG,KAG3FC,EAH2F,KAIzGC,EAAWF,EAAYlF,MAEvBqF,EAAQnB,EAAK,IAAMA,EAAK,GAAG/J,GACjClB,aAAgB,WACdqM,aAAQF,IAAaD,EAAe,CAAEnF,MAAOqF,IAC7CE,iBACC,CAACJ,EAAgBC,EAAUC,IAE9BpM,aAAgB,WACdsM,iBACC,CAACV,IAEJ,IAAMpE,EAAexH,eACnB,SAACiH,EAAOF,GACNmF,EAAe,CAAEnF,YAEnB,CAACmF,IApB4G,EAuBhFD,EAAvBlF,aAvBuG,MAuB/FkE,EAAK,GAAG/J,GAvBuF,EAyB/G,OACE,gBAAC+I,GAAA,EAAD,CAAOrG,UAAWH,EAAQa,MACxB,gBAACiI,GAAA,EAAD,CACE9D,QAAQ,YACR7E,UAAWH,EAAQwH,KACnBuB,cAAc,MACdzF,MAAOA,EACPe,SAAUN,EACV/D,QAAS,CAAE0H,UAAW1H,EAAQ0H,YAE5BF,EAGAA,EAAKvB,KAAI,SAAAG,GAAC,OACR,gBAAC4C,GAAA,EAAD,CACEnK,IAAKuH,EAAE3I,GACPuC,QAAS,CACPa,KAAMb,EAAQ4H,QACdD,UAAW3H,EAAQ2H,UACnBI,QAAS/H,EAAQ+H,QACjBK,QAASpI,EAAQ2H,WAEnBlH,KAAM2F,EAAE3F,MAAQ,gBAAC2F,EAAE3F,KAAH,CAAQL,MAAO,CAAEkB,aAAc,KAC/CgC,MAAO8C,EAAE3I,GACT2K,QAASA,EACTa,MACE,gBAAClE,GAAA,EAAD,CAAYC,QAAQ,UAAU5E,MAAO,CAAE8I,SAAS,eAAD,OAAiB,EAAjB,QAA2BhC,QAASkB,GAChFhC,EAAE6C,MAAQ7C,EAAE6C,MAAQ7C,EAAE3I,SAhB/B,oCCtEK0L,gBAVS,SAAClN,EAAiBmN,GACxC,IAAMC,EAAapN,EAAM2B,MAAMwL,EAAQ9K,MACvC,OAAO,eACF8K,EADL,CAEE9K,KAAM8K,EAAQ9K,KACdgL,IAAKF,EAAQE,KAAQD,GAAcA,EAAWC,IAC9CnB,YAAalM,EAAML,OAAOH,OAASQ,EAAML,OAAOJ,MAAQ,UAAY,gBAIzD2N,EAdU,SAAC,GAAD,IAAG3B,EAAH,EAAGA,KAAM8B,EAAT,EAASA,IAAKnB,EAAd,EAAcA,YAAd,OACvB,gBAAC,GAAD,CAAamB,IAAKA,EAAK9B,KAAMA,EAAMW,YAAaA,O,UCL5CoB,GAAehN,QAAW,kBAAM,uDAyBvB,SAASiN,GAAsBxK,GAAoC,IAE9EV,EAiBEU,EAjBFV,KACAoE,EAgBE1D,EAhBF0D,OACQ+G,EAeNzK,EAfFvD,OACAiO,EAcE1K,EAdF0K,QACAC,EAaE3K,EAbF2K,QACAC,EAYE5K,EAZF4K,mBACAjI,EAWE3C,EAXF2C,MACAkB,EAUE7D,EAVF6D,OACA2E,EASExI,EATFwI,KACSqC,EAQP7K,EARF8K,QACAlH,EAOE5D,EAPF4D,WAZ6E,EAmB3E5D,EANF8D,gBAb6E,SAc7EiH,EAKE/K,EALF+K,QACAtH,EAIEzD,EAJFyD,QAf6E,EAmB3EzD,EAHFgL,eAhB6E,MAgBnE,GAhBmE,EAiB7EC,EAEEjL,EAFFiL,YACGC,EAlB0E,aAmB3ElL,EAnB2E,2KAqBvEpD,EAAWsE,cAAXtE,OACFuO,EAAepO,IACfN,EAASgO,GAAkBU,EAC3BL,EAAU3E,aAAS0E,EAAS7K,IAEP,SAAC8K,GAC1BA,GACEA,EAAQM,SAAQ,SAACC,GACXA,EAAOC,WAETD,EAAOE,KAAO,SAACC,EAAUC,GAAX,OAAwBJ,EAAOC,WAAWE,EAAIE,UAAYF,EAAIE,YAAcF,EAAKH,IACtFA,EAAOM,OAChBN,EAAOE,KAAO,SAACC,EAAUC,GAAX,OAnCH,SAACG,EAAD,OAAcF,EAAd,EAAcA,UAAd,OAA8B,gBAACE,EAAcF,KAmClBG,CAAaR,EAAOM,KAAMH,QASxEM,CAAmBhB,GAEnB,IAAMiB,EAAWrB,GACf,gBAAC,GAAD,CACEpL,KAAMA,EACNuE,OAAkB,MAAVA,GAAiBA,EACzBlB,MAAOA,IAAgBrD,GAAc,IACrCoE,OAAQA,EACRC,iBAAkBiH,EAClBhH,WAAYA,EACZE,SAAUA,EACVL,QAAS0C,aAAS1C,EAASzD,KAG3BgM,EAAYxD,GAAQ,gBAAC,GAAD,CAAkBlJ,KAAMA,EAAMkJ,KAAMA,EAAMnD,SAlB1C,SAACf,GACvB2G,GAAeA,EAAY3G,EAAOtE,MAmB9BiM,EAAO,CACX,CAAExN,GAAI,UAAWyN,UAAWH,EAAUtP,OAAQG,EAAOwG,oBACrD,CACE3E,GAAI,YACJyN,UAAWF,EACXvP,OAAQG,EAAOuP,uBAEjB/F,QAAO,SAAA6B,GAAC,OAAIA,EAAEiE,aAaZE,EAAmB3P,EATE,Cd9ClBO,aAAY,SAACC,GAAD,OAAqBA,EAAML,OAAOF,gBcgDnDE,EAAO2J,eACPoE,EAAU/N,EAAOuP,qBAAuBvP,EAAOyP,kBAAoB,EACnEzP,EAAOwG,mBAAqBxG,EAAOyP,kBACnCzP,EAAO2J,eACP3J,EAAO0P,cAGwCnF,QAAO,SAACC,EAAGmF,GAAJ,OAAUnF,EAAImF,IAAG,GAElD,kBAAZ5B,IACTyB,GAAoBzB,GAGtB,IAAM6B,EACJ,gBAAChF,GAAA,EAAD,CAAOiF,UAAW,EAAGrL,MAAO,CAAE3E,OAAQ2P,IACpC,gBAAC3E,GAAA,EAAD,CAAMC,WAAS,EAACtG,MAAO,CAAE3E,OAAQ2P,GAAoBjE,UAAU,SAASP,WAAW,SAASD,QAAQ,SAAShG,QAAS,GACpH,gBAAC8F,GAAA,EAAD,CAAMI,MAAI,GACR,gBAAC6E,GAAA,EAAD,CAAkB3K,MAAM,UAAUtC,KAAM2M,EAAmB,EAAGO,UAAW,OAM3E/N,EACJ,gBAAC,WAAD,CAAgBgO,SAAUJ,GACvBzB,EAAUyB,EAAU,gBAACjC,GAAD,eAAcjL,KAAMA,EAAM7C,OAAQ2P,EAAkBtB,QAASA,EAASxF,aAAc7B,GAAW,KAASyH,KAMjI,OAFAe,EAAKY,KAAK,CAAEpO,GAAI,QAASyN,UAAWtN,EAAOnC,OAAQ2P,IAGjD,gCACGpB,EAAQ/D,KAAI,SAAC6F,EAAG1E,GAAJ,OACX,uBAAKvI,IAAKuI,GAAI0E,MAEhB,gBAACrF,GAAA,EAAD,CAAMC,WAAS,GACZuE,EAAKhF,KAAI,SAAC8F,EAAG3E,GAAJ,OACR,gBAACX,GAAA,EAAD,CAAM5H,IAAKkN,EAAEtO,GAAIoJ,MAAI,EAACC,GAAI,GAAI1G,MAAO,CAAE4L,cAAe5E,IAAM6D,EAAKpF,OAAS,EAAI,EAAIjK,EAAOyP,oBACtFU,EAAEb,gBCxIf,IAAMe,GAAkB,CACtBC,KAsFF,SAAc7F,EAAGhB,EAAG8G,GAClB,GAAI9G,EAAE8G,GAAW9F,EAAE8F,GACjB,OAAQ,EAEV,GAAI9G,EAAE8G,GAAW9F,EAAE8F,GACjB,OAAO,EAET,OAAO,IAjFHC,GAAU,SAACC,EAAKC,GACpB,IAAK,IAAIC,KAAYF,EACnB,IAAI,CAAC,MAAO,KAAM,MAAO,YAAa,OAAQ,UAAUG,SAASD,EAASE,gBACtEJ,EAAIE,GACN,GAAIG,MAAML,EAAIE,IAEZ,IACE,GAAIF,EAAIE,GAAUI,MAAML,GAAK,OAAO,EACpC,MAAOM,GACP,cAIF,IACE,GAAIP,EAAIE,GAAUM,WAAWF,MAAML,GAAK,OAAO,EAC/C,MAAOM,GACP,SAIR,OAAO,GAGHE,GAAqB,SAACT,EAAKU,GAC/B,OAAyB,MAAlBV,EAAIU,EAAG1C,SAAmBgC,EAAIU,EAAG1C,UAAY0C,EAAGzJ,OAoC5C0J,GAAe,SAACzP,EAAM0P,EAA4BjK,GAC7D,IAAIkK,GAAsB,EACtBD,GAAkBA,EAAa5C,QAAmC,QAAvB4C,EAAa3J,OAA0C,KAAvB2J,EAAa3J,QAAc4J,GAAsB,GAEhI,IAAMC,KAAoBnK,GAA6B,KAAfA,GAClCsJ,EAAK,IAAIc,OAAOpK,EAAY,MAMlC,OAJIkK,GAAuBC,EAAmB5P,EAAOA,EAAK6H,QAAO,SAAA6B,GAAC,OAAI6F,GAAmB7F,EAAGgG,IAAiBb,GAAQnF,EAAGqF,MAC/GY,EAAqB3P,EAAOA,EAAK6H,QAAO,SAAA6B,GAAC,OAAI6F,GAAmB7F,EAAGgG,MACnEE,IAAmB5P,EAAOA,EAAK6H,QAAO,SAAA6B,GAAC,OAAImF,GAAQnF,EAAGqF,OAExD/O,GAaT,SAAS8P,GAAWC,EAAOC,GACzB,IAAMC,EAAiBF,EAAMrH,KAAI,SAACwH,EAAIC,GAAL,MAAe,CAACD,EAAIC,MAMrD,OALAF,EAAeG,MAAK,SAACtH,EAAGhB,GACtB,IAAMuI,EAAQL,EAAIlH,EAAE,GAAIhB,EAAE,IAC1B,OAAc,IAAVuI,EAAoBA,EACjBvH,EAAE,GAAKhB,EAAE,MAEXmI,EAAevH,KAAI,SAAAwH,GAAE,OAAIA,EAAG,MAGrC,SAASI,GAAWD,EAAOzB,EAAS2B,GAClC,IAAMP,EAAMtB,GAAgB6B,GAC5B,OAAOP,GAAiB,SAAVK,EAAmB,SAACvH,EAAGhB,GAAJ,OAAWkI,EAAIlH,EAAGhB,EAAG8G,IAAW,SAAC9F,EAAGhB,GAAJ,OAAUkI,EAAIlH,EAAGhB,EAAG8G,I,cClHjF4B,G,OAAOC,GAFkB,6BAIlBC,GACG,eADHA,GAEF,UAFEA,GAGK,iBAQHC,GALJ,CACTC,aAAcJ,GAAKK,GAAGC,IAAR,UAAeJ,GAAf,YAAsCK,eACpDC,QAASR,GAAKK,GAAGC,IAAR,UAAeJ,GAAf,YAAiCK,gB,qBCLtClC,GAAU,SAACoC,EAASlL,GAAV,OAAoBkL,EAAQrI,QAAO,SAACC,EAAGmF,GAAJ,OAAenF,GAAK9C,EAAMkJ,SAASjB,MAAK,IAE9EkD,GAAgB,SAACxS,EAAiB+C,GAAuC,IAAD,MAC7E0P,EAAI,UAAGzS,EAAMkC,SAAS8P,WAAlB,QAA0C,GAC9CM,EAAO,UAAGtS,EAAMkC,SAAS8P,WAAlB,QAAqC,GAC5CU,EAAc,UAAG1S,EAAMkC,SAAS8P,WAAlB,QAA4C,GAE5D1Q,EAAOmR,EACP3I,OAAOC,KAAK0I,GAAMzI,KAAI,SAAAC,GAAM,IAAD,EACnB0I,EAAmBF,EAAKxI,GACxB2I,EAAS,UAAGF,EAAeC,EAAIE,YAAtB,QAA8B,GACvCC,EAASF,EACZ5I,KAAI,SAAAC,GAAC,OAAI,IAAI8I,KAAQT,EAAQrI,GAAG6I,WAChC5I,OAAO8I,KAAY,IAAID,KAAQ,IAC/BE,UAAUL,EAAUhJ,QACpBsJ,YAAY,GAEf,MAAO,CACLL,IAAKF,EAAIE,IACTxQ,KAAMsQ,EAAItQ,KACVyQ,SACAK,QAASR,EAAIQ,QACbC,MAAOT,EAAIS,MAAMC,KAAK,IACtBC,UAAWX,EAAIW,UAAUD,KAAK,KAC9BE,SAAUZ,EAAIY,SAASF,KAAK,KAC5BG,gBAAiBb,EAAIa,gBAAgBH,KAAK,KAC1CI,WAAYd,EAAIc,WAAWJ,KAAK,KAChCK,UAAWf,EAAIe,UAAUL,KAAK,KAC9BM,mBAAoBhB,EAAIiB,mBACxBnF,UAAW,iCAAYkE,EAAZ,CAAiBG,SAAQF,mBAGxC,GA9B+E,GAgC1D5S,EAAM2B,MAAMU,KAAS,IAAtCkQ,eAhC2E,MAgCjE,GAhCiE,IAiC4CA,EAAvHsB,gBAjC2E,MAiChE,GAjCgE,IAiC4CtB,EAAxGuB,kBAjC4D,MAiC/C,GAjC+C,IAiC4CvB,EAAvFwB,iBAjC2C,MAiC/B,GAjC+B,IAiC4CxB,EAAvEyB,YAjC2B,MAiCpB,GAjCoB,IAiC4CzB,EAA5D0B,eAjCgB,MAiCN,GAjCM,EAiCqBC,EAAuB3B,EAA9C,uBAajF,OFPyB,SAACjR,EAAWtB,EAAiB+C,GAEtD,IAAMpB,EAA0B3B,EAAM2B,MAAMoB,EAAMV,MAC5C0E,EAAapF,GAASA,EAAMoF,WAE5BiK,EAAerP,GACQ,MAA3BA,EAAMwS,mBACsB,MAA5BxS,EAAMyS,oBAA8B,CAClC/M,MAAO1F,GAASA,EAAMwS,kBACtB/F,OAAQzM,GAASA,EAAMyS,oBAGrBC,EAAWtD,GAAazP,EAAM0P,EAAcjK,GAClD,OAAOpF,GAASA,EAAMuO,QAAUkB,GAAWiD,EAAUzC,GAAWjQ,EAAM2S,eAAgB3S,EAAMuO,QAASvO,EAAMkQ,iBAAmBwC,EENvHE,CAXPjT,EAAOA,EAAK6H,QAAO,SAAA2G,GACjB,OACEK,GAAQ0D,EAAU/D,EAAEyD,WACpBpD,GAAQ2D,EAAYhE,EAAE2D,aACtBtD,GAAQ4D,EAAWjE,EAAEwD,YACrBnD,GAAQ6D,EAAMlE,EAAEsD,QAChBjD,GAAQ8D,EAASnE,EAAE4D,aAClB/G,aAAQuH,IAAuBA,IAAuBpE,EAAE6D,uBAIpC3T,EAAO+C,I,kIClDrByR,GAAiB,SAAAhT,GAC5B,IAAMrB,EAAWC,cAGjB,MAAO,CAFaL,aAAY,SAACC,GAAD,OAAqBA,EAAM8B,OAAON,IAAOX,KAClDP,eAAkB,SAAAiB,GAAO,OAAIpB,EALjC,SAACqB,EAAID,GAAL,MAAkB,CAAEZ,KAAM,gBAAiBa,KAAID,WAKLkT,CAAajT,EAAID,MAAW,CAACC,EAAIrB,M,mBCoBnFuU,GAAqB,SAAC,GAAD,IAAYC,EAAZ,EAAGC,QAAiBlP,EAApB,EAAoBA,MAAU3C,EAA9B,2CAA0C4R,GAAU,kBAACA,EAAD,eAAQnT,GAAIkE,GAAW3C,KAUvG8R,GAAcC,cAAW,SAAApV,GAAK,OAClC2D,YAAa,CACX0R,MAAO,CACLC,IAAK,EACLC,MAAO,EACPC,OAAO,aAAD,OAAexV,EAAM+E,QAAQQ,WAAWJ,YALhCiQ,CAQlBK,MAEWC,GAA0B,SAAC,GAA4E,IAA1EzT,EAAyE,EAAzEA,MAAO0T,EAAkE,EAAlEA,OAAkE,IAA1DC,YAA0D,MAAnDC,KAAmD,MAAjCC,eAAiC,MAAvB,iBAAuB,IACrFC,YAAqB9T,GADgE,mBAC1G+T,EAD0G,KAClGC,EADkG,OAEcD,EAFd,IAEzG7B,gBAFyG,MAE9F,GAF8F,MAE1FC,kBAF0F,MAE7E,GAF6E,MAEzEC,iBAFyE,MAE7D,GAF6D,MAEzDC,YAFyD,MAElD,GAFkD,MAE9CC,eAF8C,MAEpC,GAFoC,EAETC,EAFS,EAEhC,uBAC3E0B,EAAc,CAAC/B,EAAUC,EAAYC,EAAWC,EAAMC,GAAS/J,QAAO,SAACC,EAAGmF,GAAJ,OAAenF,EAAImF,EAAE1F,SAAS,IAAM+C,aAAQuH,GAAsB,EAAI,GAC5I2B,EAAcvV,IAAM8L,aAAY,kBAAMuJ,EAAU,MAAK,CAACA,IAE5D,OACE,kBAACd,GAAD,CAAaiB,aAAcF,EAAa9Q,MAAM,QAAQiR,QAAQ,SAASC,aAAc,CAAEC,WAAY,QAASC,SAAU,WACpH,kBAACC,GAAD,CACEd,OAAQA,EACRC,KAAMA,EACNE,QAAyB,IAAhBI,EAAoBJ,EAApB,UAAiCI,EAAjC,mBACTjU,MAAOA,EACP+T,OAAQA,EACRC,UAAWA,EACXS,QAASP,MAoBX1S,GAAYC,aAAW,gBAAGqB,EAAH,EAAGA,QAAH,OAC3BpB,YAAa,CACXgT,SAAU,CACRzK,QAAS,EACThG,YAAa,GACbN,aAAc,EACdL,WAAY,UACZ,UAAW,CACTH,MAAOL,EAAQM,OAAOC,MACtBC,WAAYR,EAAQS,QAAQC,YAMrB,SAASgR,GAAT,GAuBc,IAqCVG,EArCS,IAtB1B9U,GAAI+U,OAsBsB,WAtBjB3U,EAsBiB,MArB1ByT,cAqB0B,WArBjBzT,EAqBiB,MApB1BjB,YAoB0B,MApBnB,MAoBmB,MAnB1B6U,eAmB0B,MAnBhB,MAmBgB,MAlB1B3M,iBAkB0B,MAlBd,SAkBc,MAjB1B/D,aAiB0B,MAjBlB,UAiBkB,MAhB1BiE,eAgB0B,MAhBhB,MAgBgB,MAf1BvG,YAe0B,MAfnB,QAemB,MAd1BwK,aAc0B,MAdlB,GAckB,MAb1BwJ,gBAa0B,WAbf5U,EAae,MAZ1B0T,YAY0B,MAZnBmB,KAYmB,MAX1BvV,qBAW0B,MAXV,GAWU,MAV1BwV,cAU0B,aAT1BC,aAS0B,aAR1BjO,eAQ0B,WARhB9G,EAQgB,MAP1BgV,eAO0B,WAPhBhV,EAOgB,MAN1BwG,gBAM0B,WANfxG,EAMe,MAL1BwU,eAK0B,WALhBxU,EAKgB,MAJ1B8T,cAI0B,WAJjB9T,EAIiB,MAH1B+T,iBAG0B,WAHd/T,EAGc,EAF1BkC,EAE0B,EAF1BA,SACG+S,EACuB,0NACpB9S,EAAUZ,GAAU,IACpBzD,EAAQuE,cACRzC,EAAK+U,GAAUlB,GAAUA,EAAO3P,MAHZ,EAIC8O,GAAehT,GAAjCsV,EAJiB,sBAKMxW,IAAMyW,SAAmC,MAL/C,oBAKnBC,GALmB,MAKTC,GALS,MAOpBC,GAAUC,KAAKC,UAAUP,GACzBQ,GAAe/W,IAAM8L,aAAY,WACrC0K,EAAe,aACbnW,OACAG,MAAM,EACNI,cAAegI,aAAShI,IACrBiW,KAAKG,MAAMJ,QAEf,CAACJ,EAAgBI,GAAShW,EAAeP,IAEtC4W,GAAcjX,IAAM8L,aAAY,WACpC6K,GAAY,MACZL,GAAWA,MACV,CAACA,EAASK,KAWPO,GAAS,CACbhB,WACA9N,QAXkBpI,IAAM8L,aACxB,SAAA7E,GACE0P,GAAY1P,EAAMkQ,eAClB/O,GAAWA,EAAQnB,GACnB8P,OAEF,CAAC3O,EAAS2O,KAMV7U,QAYF,OATiB8T,EAUf,oCACGK,GAAStB,GAAUX,GAAmB,eAAKW,EAAN,CAAc2B,YAAUJ,QAASW,GAAanP,WAAUgO,UAASV,SAAQC,eAC/G,kBAAC/M,GAAA,EAAD,CACEC,UAAWA,EACXnD,MACEgS,aAAWlC,GACTA,EAEA,kBAAC1M,GAAA,EAAD,CAAYC,QAAQ,KAAKjE,MAAM,WAC5B0Q,IAKP,8BACe,aAAZzM,EACC,kBAAC4O,GAAA,EAAD,eAAU/U,IAAKoK,EAAO4K,QAAQ,EAAM1T,UAAWH,EAAQsS,UAAcmB,IACnE,kBAACK,GAAA,EAAD,CAAc3S,QAAS8H,KAEX,eAAZjE,EACF,kBAACN,GAAA,EAAD,eAAY3D,MAAM,WAAc0S,IAC7BlC,GAAQ,kBAACA,EAAD,OAEG,SAAZvM,EACF,kBAAC+O,GAAA,EAAD,eACEhT,MAAM,YACNX,MAAO,CACL5E,MAAO,GACPC,OAAQ,IAEVuJ,QAASA,GACLyO,IAEHlC,GAAQ,kBAACA,EAAD,CAAMnR,MAAO,CAAE8E,QAAS,MAErB,cAAZF,EACF,kBAAC+O,GAAA,EAAD,eAAQC,WAAW,EAAMhP,QAASA,EAASjE,MAAOA,GAAkB0S,IACjE1T,GAEW,aAAZiF,EACF,kBAAC+O,GAAA,EAAD,eAAQhT,MAAOA,GAAkB0S,IAC9B1T,GAEW,SAAZiF,EACF,kBAACiP,GAAA,EAAD,eAAMlT,MAAOA,EAAOiE,QAAQ,UAAU5E,MAAO,CAAE8T,OAAQ,YAAiBT,IACrE1T,GAGH,kBAACkF,GAAA,EAAD,eACExG,KAAMA,EACNuG,QAAQ,WACRjE,MAAM,UACNX,MAAO,CACLW,MAAO0R,EAAW9W,EAAM+E,QAAQS,QAAQgT,MAAQxY,EAAM+E,QAAQM,OAAOC,QAEnEwS,IAEHlC,GAAQ,kBAACA,EAAD,CAAMnR,MAAO,CAAE8E,QAAS,KAChCnF,GAAY,yBAAKK,MAAO,CAAEgU,WAAY7C,EAAO,EAAI,IAAMxR,OAnEjE4S,EAKCJ,EAJA,kBAAC9L,GAAA,EAAD,CAAM5H,IAAK4S,EAAS5K,MAAI,GACrB0L,G,wGCzII8B,GAAiB,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,MAAOhR,EAAkB,EAAlBA,MAAOiR,EAAW,EAAXA,KACrC9W,EAA0B6W,EAA1B7W,GAAI+W,EAAsBF,EAAtBE,OAAQ9N,EAAc4N,EAAd5N,UAoBpB,OAnBIA,IAAc6N,EAAK7N,KACrB6N,EAAK7N,GAAa,IAEhBA,GAAa8N,IAAWD,EAAK7N,GAAW8N,KAC1CD,EAAK7N,GAAW8N,GAAU,IAEvB9N,IAAa8N,GAAWD,EAAKC,KAChCD,EAAKC,GAAU,IAGb9N,GAAa8N,EACfD,EAAK7N,GAAW8N,GAAQ/W,GAAM6F,EACrBoD,EACT6N,EAAK7N,GAAWjJ,GAAM6F,EACbkR,EACTD,EAAKC,GAAQ/W,GAAM6F,EAEnBiR,EAAK9W,GAAM6F,EAENiR,GAIIE,GAAW,SAACC,EAAG/C,GAAJ,OAAgB+C,EAAED,SAAWC,EAAED,SAASC,EAAG/C,GAD/C,SAAC,EAA2BA,GAA5B,OApCG,SAAClU,EAAI+W,EAAQ9N,GAA4B,IAAjBiL,EAAgB,uDAAP,GACtD,OAAIjL,GAAa8N,EACR7C,EAAOjL,IAAciL,EAAOjL,GAAW8N,IAAW7C,EAAOjL,GAAW8N,GAAQ/W,GAC1EiJ,EACFiL,EAAOjL,IAAciL,EAAOjL,GAAWjJ,GACrC+W,EACF7C,EAAO6C,IAAW7C,EAAO6C,GAAQ/W,GAEjCkU,EAAOlU,GA4ByCkX,CAAvC,EAAGlX,GAAH,EAAO+W,OAAP,EAAe9N,UAA8DiL,GACpBiD,CAAYF,EAAG/C,IAE/EkD,GAAa,SAACH,EAAG/C,GAAJ,MAAsC,oBAAf+C,EAAEjC,SAA0BiC,EAAEjC,SAASd,EAAQ+C,GAAKA,EAAEjC,UAC1FqC,GAAW,SAAC,EAAYnD,GAAb,IAAGoD,EAAH,EAAGA,OAAH,MAA2C,oBAAXA,EAAwBA,EAAOpD,GAAUoD,GACpFC,GAAW,SAAC,EAAYrD,GAAb,IAAGtP,EAAH,EAAGA,OAAH,MAA2C,oBAAXA,EAAwBA,EAAOsP,GAAUtP,GA0DpF4S,GAAY,SAAC,GAUnB,IATLlY,EASI,EATJA,KASI,IARJmY,cAQI,MARK,GAQL,MAPJC,qBAOI,MAPY,GAOZ,MANJlZ,aAMI,MANI,GAMJ,EALJmZ,EAKI,EALJA,SACAC,EAII,EAJJA,SAII,IAHJC,sBAGI,WAHazX,EAGb,MAFJ0X,yBAEI,WAFgB1X,EAEhB,MADJwG,gBACI,WADOxG,EACP,IACmD5B,EAA/CkB,qBADJ,MACoB,GADpB,EACwBD,EAA2BjB,EAA3BiB,WAAYD,EAAehB,EAAfgB,WAClCuY,EAzBwB,SAAAN,GAC9B,IAAMM,EAAgB,GAStB,OARAN,EAAO9K,SAAQ,SAAAkK,QACUzW,IAAvByW,EAAMmB,cACJpB,GAAe,CACbC,QACAhR,MAAOgR,EAAMmB,aACblB,KAAMiB,OAGLA,EAeeE,CAAiBR,GACnCS,EAAsBC,KAAMJ,EAAeL,GAC/CQ,EAAsBC,KAAMD,EAAqBxY,GAJ7C,MAKwCZ,IAAMyW,SAAS2C,GALvD,mBAKGE,EALH,KAKmBC,EALnB,KAMEnE,EAAS2D,GAAkCO,EAE3CjE,EAAYrV,IAAM8L,aACtB,SAAA0N,GACER,EAAoBA,EAAkBQ,GAAQD,EAAkBC,GAChE1R,GAAYA,EAAS0R,KAEvB,CAACR,EAAmBO,EAAmBzR,IAbrC,EAgB0B9H,IAAMyW,SAAS,IAhBzC,mBAgBGgD,EAhBH,KAgBYC,EAhBZ,KAkBEC,EAAyB9C,KAAKC,UAAUsC,GACxCQ,EAAmB5Z,IAAM8L,aAAY,WACzC4N,EAAW,IACXrE,EAAUwB,KAAKG,MAAM2C,MACpB,CAACtE,EAAWsE,IAEf3Z,IAAM6Z,WAAU,WAEdrZ,GAAQ6U,EAAUwB,KAAKG,MAAM2C,IAC7BnZ,GAAQkZ,EAAW,MAClB,CAAClZ,EAAMmZ,EAAwBtE,IAElC,IAAMyE,EAAiBtZ,EAAOuZ,GAAiB,CAAE3E,SAAQuD,SAAQlY,OAAQf,EAAMe,SAAY,GACrFuZ,EAAiBxZ,GAAQsY,EAAWA,EAAS1D,EAAQ1V,GAAS,GAC9De,EAAS4Y,KAAMS,EAAgBE,GAC/BC,EAAatB,EAASA,EAAO9P,QAAO,SAAAsP,GAAC,OAAI+B,GAAQ/B,EAAG/C,EAAQ3U,MAAS6I,OAAS,EAE9E9B,EAxEuB,SAAC6N,EAAWmB,GAAZ,OAC7BxW,IAAM8L,aACJ,SAAAiM,GAAK,OAAI,SAAA1H,GACP,IAAItJ,EAAQsJ,GAAKA,EAAE5I,QAAU4I,EAAE5I,OAAOV,MAClCgR,GAASA,EAAMoC,YAAc/C,aAAWrQ,KAC1CA,EAAQA,EAAMqT,eAEhB/E,GAAU,SAAA2C,GAAI,OAAIF,GAAe,CAAEC,QAAOhR,QAAOiR,YACjDxB,GAAe,SAAAwB,GAAI,sBAAUA,EAAV,CAAgBvX,OAAQ,QAC3CsX,EAAMjQ,UAAYiQ,EAAMjQ,SAAS,CAAEf,QAAOgR,QAAO1C,iBAEnD,CAACA,EAAWmB,IA6DO6D,CAAgBhF,EAAWwD,GAC1CyB,EAAata,IAAM8L,aACvB,SAAAiM,GAAK,OAAI,WACP2B,GAAW,SAAA1B,GAAI,OAAIF,GAAe,CAAEC,QAAOhR,OAAO,EAAMiR,eAE1D,CAAC0B,IAgBH,MAAO,CACLtE,SACAC,YACAkF,WAAYA,aAAWnF,EAAQgE,GAC/BK,UACAhZ,SACAwZ,aACAzS,eACA8S,aACAE,SAtBe,SAAArC,GAAC,OA7GK,SAAC,GAA6G,IAA3GA,EAA0G,EAA1GA,EAAG/C,EAAuG,EAAvGA,OAAQxU,EAA+F,EAA/FA,cAAeH,EAAgF,EAAhFA,OAAiB+G,GAA+D,EAAxEiS,QAAwE,EAA/DjS,cAAc8S,EAAiD,EAAjDA,WAAY3Z,EAAqC,EAArCA,WAAqC,IAAzBD,kBAAyB,SAC5H+Z,EAA0GtC,EAA1GsC,SAAUpa,EAAgG8X,EAAhG9X,KAAMqa,EAA0FvC,EAA1FuC,UAAWC,EAA+ExC,EAA/EwC,WAAYC,EAAmEzC,EAAnEyC,IAAKC,EAA8D1C,EAA9D0C,IAAK9N,EAAyDoL,EAAzDpL,IAAK+N,EAAoD3C,EAApD2C,UAAWpM,EAAyCyJ,EAAzCzJ,KAAMqM,EAAmC5C,EAAnC4C,SAAUC,EAAyB7C,EAAzB6C,qBACnFvY,EAAK,aACTiY,YACAD,WACApa,OACA0G,MAAOmR,GAASC,EAAG/C,GACnB8D,aAAchB,GAASC,EAAGvX,GAC1Bqa,OAAQva,GAAcyX,EAAE+C,YAAchD,GAASC,EAAG1X,GAClDiM,MAAOyO,aAAShD,GAChBjC,SAAUoC,GAAWH,EAAG/C,IAAWzU,EACnCmH,SAAUN,EAAa2Q,GACvBiD,OAAQd,EAAWnC,GACnBkD,MAAOlD,EAAEtP,OAASsP,EAAEtP,OAAOsP,EAAEkD,MAAOjG,GAA6B,oBAAZ+C,EAAEkD,MAAuBlD,EAAEkD,MAAMjG,GAAU+C,EAAEkD,MAClGV,aACAC,MACAC,MACA9N,MACA+N,YACApM,OACAsM,wBACID,GAAYA,EAAS3F,IAG3B,OADA5L,OAAOC,KAAKhH,GAAOoL,SAAQ,SAAAvL,GAAG,YAAmBhB,IAAfmB,EAAMH,WAA6BG,EAAMH,MACpEG,EAsFL6Y,CAAU,CACRnD,IACA/C,SACAxU,cAAewY,EACf3Y,SACAgZ,UACAjS,eACA8S,aACA3Z,aACAD,gBAaFkZ,qBAISG,GAAmB,SAAC,GAAwC,IAAtC3E,EAAqC,EAArCA,OAAQuD,EAA6B,EAA7BA,OAAgB4C,EAAa,EAArB9a,OAC7CA,EAAM,eAAQ8a,GAWlB,OAVA5C,EAAO9K,SAAQ,SAAAsK,IACTA,EAAEqD,OAAUpE,aAAWc,GAASC,EAAG/C,KAAaqG,aAAcvD,GAASC,EAAG/C,IAEnE+C,EAAEsC,UAAYrD,aAAWc,GAASC,EAAG/C,IAC9C0C,GAAe,CAAEC,MAAOI,EAAGpR,MAAO,WAAYiR,KAAMvX,IAC3C0X,EAAEW,WACXrY,EAAO0X,EAAEjX,IAAMwa,aAAevD,EAAEW,SAAS1D,KAJzC0C,GAAe,CAAEC,MAAOI,EAAGpR,MAAO,wBAAyBiR,KAAMvX,OAQ9DA,GAIIyZ,GAAU,SAACnC,EAAO3C,EAAQ3U,GACrC,SACgC,IAA5B8X,GAASR,EAAO3C,QACc,IAA9BkD,GAAWP,EAAO3C,QACU,IAA5BqD,GAASV,EAAO3C,UACU9T,IAA5B4W,GAASH,EAAOtX,ICnNL,SAASkb,GAAT,GAAyC,IAApBV,EAAmB,EAAnBA,MAAOzX,EAAY,EAAZA,SACzC,OAAOyX,EACL,kBAAC/Q,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,GACvB,kBAAC8F,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYoT,MAAM,UAAlB,oDAEF,kBAAC1R,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYoT,MAAM,SAASpX,MAAM,SAAjC,UACUyW,KAKdzX,E,wBCGWqY,GAfF,SAAC,GAAD,QAAG9U,aAAH,MAAW,GAAX,MAAe+U,wBAAf,aAAyCb,aAAzC,WAAiD3Z,EAAjD,EAAyFiV,GAAzF,EAA4D2C,aAA5D,4EACX,gBAAC6C,GAAA,EAAD,eACEhV,MAAOA,EACPkU,MAAOf,aAAQe,GACfe,WAAYF,EAAmBb,GAAS,IAAMA,EAC9CtS,OAAO,QACPF,QAAQ,WACRgP,WAAS,EACTwE,gBAAiB,CACfC,QAAQ,IAEN3F,KCTF4F,GAAkB,SAACxD,EAAQpL,EAAS4D,GACxC,IAAMiL,EAAYzD,EAAOrP,OACnB+S,EAAU9O,EACV+O,EAAeC,KAAKC,KAAKJ,EAAYC,GACrCI,EAAaH,EAAenL,EAC5BuL,EAAWH,KAAK3B,IAAI6B,EAAaH,EAAe,EAAGF,EAAY,GACrE,OAAOzD,EAAO9P,QAAO,SAACsP,EAAGtN,GAAJ,OAAUA,GAAK4R,GAAc5R,GAAK6R,MAG5CC,GAAW,SAAC,GAA0E,IAAxEC,EAAuE,EAAvEA,MAAO/Y,EAAgE,EAAhEA,MAAO2U,EAAyD,EAAzDA,OAAyD,IAAjDjO,UAAiD,MAA5C,GAA4C,EAAxC6K,EAAwC,EAAxCA,OAAQoF,EAAgC,EAAhCA,SAAU/C,EAAsB,EAAtBA,UAAcU,EAAQ,gFAC1F0E,EAAWtE,GAAS,CAAEC,UAAUpD,GAEhC9K,EAAOsS,EACX,kBAACA,EAAD,iBAAWpC,EAASrC,GAApB,CAAwB/C,OAAQA,KAC9BgC,aAAWe,EAAEjX,SACfI,EAEA,kBAAC,GAASkZ,EAASrC,IAGbjX,EAA0BiX,EAA1BjX,GAAIiJ,EAAsBgO,EAAtBhO,UAAW8N,EAAWE,EAAXF,OACjBlR,EAAQmR,GAASC,EAAG/C,GAEpB0H,EACJ,kBAACxU,GAAA,EAAD,CACElD,MACE,oCACE,kBAACoD,GAAA,EAAD,eAAqC,kBAAVzB,EAAqB8P,KAAKC,UAAU/P,GAASA,GACxE,kBAACyB,GAAA,EAAD,KAAaqO,KAAKC,UAAU,CAAE5V,KAAIiJ,YAAW8N,cAIjD,6BAAM3N,IAGJyS,EAAOC,KAAcC,kBAAoBH,EAAcxS,EAE7D,OACE,kBAACJ,GAAA,EAAD,CAAM5H,IAAG,UAAK6V,EAAEjX,IAAMoJ,MAAI,EAACzG,MAAOA,EAAO0G,GAAIkN,EAAY,GAAMlN,QAC/CjJ,IAAbub,EAAyB,kBAACK,GAAA,EAAD,CAAUC,GAAIN,GAAWE,GAAmBA,IA2C7DK,GAtCA,SAATA,EAAU,GAAD,IACbzE,EADa,EACbA,OACA6B,EAFa,EAEbA,SACApF,EAHa,EAGbA,OAHa,IAIbqC,iBAJa,aAKblK,eALa,MAKH,EALG,MAMb8P,sBANa,MAMI,IANJ,MAObC,sBAPa,MAOI,IAPJ,SASb/P,EAAU,EACR,kBAACrD,GAAA,EAAD,CAAM5H,IAAI,mBAAmBgI,MAAI,EAACC,GAAI,GAAIJ,WAAS,EAAC/F,QAAS,EAAGgG,QAAQ,UACrEmT,MAAMC,KAAKD,MAAMhQ,GAAS9D,QAAQC,KAAI,SAAAmB,GAAC,OACtC,kBAACX,GAAA,EAAD,CACE5H,IAAKuI,EACLP,MAAI,EACJC,IAAIkN,GAAY,GAChB5T,MAAO4T,EAAY,GAAK,CAAElM,SAAU8R,EAAgB1Q,SAAU2Q,IAE9D,kBAACpT,GAAA,EAAD,CAAMC,WAAS,GACb,kBAACiT,EAAD,CACEzE,OAAQwD,GAAgBxD,EAAQpL,EAAS1C,GACzC2P,SAAUA,EACVpF,OAAQA,EACRqC,WAAW,EACXlK,QAAS,EACT8P,eAAgBA,EAChBC,eAAgBA,UAO1B3E,EACG9P,QAAO,SAAAsP,GAAC,OAAKM,GAASN,EAAG/C,MACzB1L,KAAI,SAACjH,EAAOoI,GAAR,OAAc,kBAAC,GAAD,eAAUvI,IAAKuI,EAAGuK,OAAQA,EAAQoF,SAAUA,EAAU/C,UAAWA,GAAehV,QCxCnGI,GAAYC,aAAW,gBAAGsB,EAAH,EAAGA,QAASD,EAAZ,EAAYA,QAAS9E,EAArB,EAAqBA,OAArB,OAC3B0D,YAAa,CACXqC,MAAO,CACLG,SAAU,GACV+F,QAASlH,EAAQ,GACjBkB,YAAalB,EAAQ,GACrBY,aAAcZ,EAAQ,IAExBqZ,aAAc,CACZjZ,MAAOL,EAAQM,OAAOC,MACtBC,WAAYR,EAAQ8W,MAAMpW,KAC1B,UAAW,CACTF,WAAYR,EAAQ8W,MAAMyC,OAG9BC,kBAAmB,CACjBnZ,MAAOL,EAAQ8W,MAAMpW,MAEvB+Y,eAAgB,CACdpZ,MAAOL,EAAQS,QAAQgT,MACvB1U,SAAU,WACVwR,IAAK,MACLmJ,KAAM,MACNlY,WAAatG,EAAOye,aAAe,EACnCjG,YAAcxY,EAAOye,aAAe,GAEtCC,KAAM,CACJ9e,MAAO,UAKE,SAAS+e,GAAT,GAmBK,IAlBlB9c,EAkBiB,EAlBjBA,GACO+c,EAiBU,EAjBjB7Y,MACAsR,EAgBiB,EAhBjBA,SACekC,EAeE,EAfjBhY,cAeiB,IAdjBsd,mBAciB,MAdH,SAcG,MAbjBC,mBAaiB,MAbH,SAaG,MAZjBC,mBAYiB,MAZH,SAYG,MAXjBzF,cAWiB,MAXR,GAWQ,EAVjB0F,EAUiB,EAVjBA,SACAC,EASiB,EATjBA,SACAhI,EAQiB,EARjBA,QACAR,EAOiB,EAPjBA,QACAE,EAMiB,EANjBA,QACA8C,EAKiB,EALjBA,SAKiB,IAJjB1D,OAAQ2D,OAIS,WAJQzX,EAIR,MAHjB+T,UAAW2D,OAGM,WAHc1X,EAGd,EAFjBkC,EAEiB,EAFjBA,SACG+S,EACc,4MACTlX,EAAWsE,cAAXtE,OADS,EAES6U,GAAehT,GAFxB,mBAEVxB,EAFU,KAEHmZ,EAFG,KAGTrY,EAAoCd,EAApCc,KAAMH,EAA8BX,EAA9BW,KAAMmN,EAAwB9N,EAAxB8N,QAAS7M,EAAejB,EAAfiB,WACvByE,EAAQ1F,EAAM0F,MAAQ1F,EAAM0F,MAAQ6Y,EAJzB,EAMyBje,IAAMyW,UAAS,GANxC,mBAMV8H,EANU,KAMKC,EANL,KAOXC,EAAsBze,IAAM8L,aAAY,kBAAM0S,GAAiB,SAAAxG,GAAI,OAAKA,OAAO,CAACwG,IAEhF/a,EAAUZ,GAAU,IATT,EAW4C6V,GAAU,CACrElY,OACAmY,SACAC,gBACAlZ,QACAmZ,WACAC,WACAE,oBACAD,mBARM3D,EAXS,EAWTA,OAAQmF,EAXC,EAWDA,WAAY9Z,EAXX,EAWWA,OAAQwZ,EAXnB,EAWmBA,WAAYO,EAX/B,EAW+BA,SAW1CkE,EAAW7H,KAAKC,UAAU1B,GAC1BuJ,EAAe3e,IAAM8L,aAAY,WACjCmO,EAAa,EACfpB,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBtX,YAAY,OAEzC2d,GAAYA,EAASxH,KAAKG,MAAM0H,MAEjC,CAAC7F,EAAUwF,EAAUK,EAAUzE,IAE5B2E,EAAe5e,IAAM8L,aAAY,WACrCwS,GAAYA,EAASzH,KAAKG,MAAM0H,MAC/B,CAACJ,EAAUI,IAERzH,GAAcjX,IAAM8L,aAAY,WACpC+M,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBxX,MAAM,OACnC8V,GAAWA,MACV,CAACuC,EAAUvC,IAERf,GAAcvV,IAAM8L,aAAY,WACpCgK,GAAWA,MACV,CAACA,IAEE+I,GAAe,CACnBlG,SACA6B,WACApF,UAGI0J,GAAatR,GAAW7M,EACxBuV,GAAW4I,IAAcre,EAAM,QAErC,OACE,kBAACse,GAAA,EAAD,eACE7d,GAAIA,EACJV,KAAMA,GAAQwe,QAAQtI,GACtBA,SAAUA,EACVJ,QAASA,EACTZ,aAAc,CACZE,SAAU,SACVD,WAAY,SAEdsJ,gBAAiB,CACfrJ,SAAU,MACVD,WAAY,UAEVY,GAEJ,kBAAC2I,GAAA,EAAD,CAAMtb,UAAWH,EAAQsa,MACZ,OAAV3Y,GACC,oCACE,kBAAC+Z,GAAA,EAAD,CACEvb,UAAWH,EAAQ2B,MACnBA,MAAOA,GAAgBlE,EACvBH,OACEkW,IACE,kBAAC3O,GAAA,EAAD,CAASlD,MAAM,QAAQmD,UAAU,QAC/B,kBAACJ,GAAA,EAAD,CAAYiX,aAAW,QAAQhX,QAAS6O,IACtC,kBAAC,KAAD,UAMV,kBAACoI,GAAA,EAAD,OAGJ,kBAACC,GAAA,EAAD,KACE,kBAAC3D,GAAD,CAAWV,MAAOxa,EAAM,SACtB,oCACG+C,IAEGwS,EACF,kBAACA,EAAY6I,IAEb,oCACGC,IAAc,kBAAC3P,GAAA,EAAD,CAAkBjN,KAAM7C,EAAOye,aAAcla,UAAWH,EAAQma,iBAC/E,kBAACV,GAAA,EAAD,CAAUC,IAAKoB,GACb,kBAACrU,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASjG,QAAS,GAC3C,kBAAC,GAAWya,MAGfN,GACC,kBAACrU,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,EAAGgG,QAAQ,SAASC,WAAW,UACtD,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASqW,EAAqBja,MAAM,aAA5C,WAIF,kBAAC0F,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASwW,EAAchb,UAAWH,EAAQga,cAChD,kBAAC,KAAD,CAAc5Z,MAAO,CAAE0b,YAAa,KADtC,WAEWpB,UAU3B,kBAACkB,GAAA,EAAD,MACA,kBAACG,GAAA,EAAD,KACE,kBAAChI,GAAA,EAAD,CAAQtV,KAAK,QAAQsC,MAAM,UAAU4D,QAASmN,IAA9C,SAGU,SAATlV,QAAgCiB,IAAbgd,GAClB,kBAAC9G,GAAA,EAAD,CAAQtV,KAAK,QAAQgU,SAAUA,GAAUtS,UAAWH,EAAQka,kBAAmBvV,QAASqW,GACrFN,GAGY,OAAhBD,GACC,kBAAC1G,GAAA,EAAD,CAAQtV,KAAK,QAAQsC,MAAM,UAAU4D,QAAS6O,IAC3CiH,GAGY,OAAhBE,GACC,kBAAC5G,GAAA,EAAD,CAAQkD,WAAS,EAACxY,KAAK,QAAQgU,SAAUA,KAAaqE,EAAY/V,MAAM,UAAU4D,QAASuW,GACxFP,GAAe/d,M,kECrOxB6D,GAAO,gBAAC,KAAD,CAA0BqB,SAAS,UAC1Cka,GAAc,gBAAC,KAAD,CAAcla,SAAS,UAE5B,SAASma,GAAT,GAWX,IAAD,IAVD3Y,aAUC,MAVO,GAUP,MATDe,gBASC,WATUxG,EASV,EARDoL,EAQC,EARDA,MACA3E,EAOC,EAPDA,YAOC,IAND0P,iBAMC,aALDvB,gBAKC,cAJDhU,KAIC,EAHDmZ,cAGC,MAHO,GAGP,MAFDL,4BAEC,SADEzE,EACF,wHACK/O,EAAexH,eAAkB,SAACqQ,GAAD,IAAItJ,EAAJ,uDAAY,GAAZ,OAAmBe,GAAYA,EAAS,CAAEL,OAAQ,CAAEV,MAAOA,EAAM2C,KAAI,SAAAmB,GAAC,OAAIA,EAAE9D,cAAa,CAACe,IAEjI,OACE,gBAAC6X,GAAA,EAAD,eACEzd,KAAK,QACL0d,UAAQ,EACRC,QAASxE,EACTL,qBAAsBA,EACtB8E,eAAgB,SAAAC,GAAM,OAAIA,EAAOrT,OACjCsT,aAAc,SAACD,EAAD,OAAW5T,EAAX,EAAWA,SAAX,OACZ,gCACE,gBAAC8T,GAAA,EAAD,CAAU/b,KAAMA,GAAMub,YAAaA,GAAa5b,MAAO,CAAE0b,YAAa,GAAKW,QAAS/T,IACnF4T,EAAOrT,QAGZyT,YAAa,SAAAC,GAAM,OACjB,gBAAC,GAAD,iBACMA,EADN,CAEE1T,MAAOA,EACP3E,YAAaA,EACb0P,UAAWA,EACXwE,gBAAiB,CACfC,QAAQ,IAEN3F,KAGRL,SAAUA,EACVnP,MAAOsU,EAAMxS,QAAO,SAAAgC,GAAC,OAAI9D,EAAMkJ,SAASpF,EAAE9D,UAC1Ce,SAAUN,GACN+O,ICjDH,IAAM9C,GAAwB,CAAC,UAAW,MAAO,OAG3C4M,GAAgB,CAAC,eAAgB,kBAAmB,UAAW,gBAG/DC,GAA4C,CAAC,wBAAyB,sBAGtEC,GAAuB,CAAC,qBAAsB,wBAAyB,mBAGvEC,GAAmC,CAAC,UAAW,iBAY/CjN,GAAW,CAAC,iBAAkB,aAAc,cAAe,MAAO,cAAe,aAAc,eAAgB,eAAgB,mBAsB/HC,GAA0B,CACrC,iBACA,mBACA,QACA,UACA,MACA,gBACA,mBACA,yBAIWiN,GAAkC,CAAC,aAAc,qBAAsB,gCAAiC,wB,wCClBtGC,GA/BQ,SAAC,GAUK,IAT3BhU,EAS0B,EAT1BA,MAS0B,IAR1BjE,eAQ0B,MARhB,WAQgB,EAP1B1B,EAO0B,EAP1BA,MACAkU,EAM0B,EAN1BA,MACAR,EAK0B,EAL1BA,SAK0B,IAJ1B9R,cAI0B,MAJjB,QAIiB,MAH1BmT,wBAG0B,SAF1BtY,EAE0B,EAF1BA,SACG+S,EACuB,sGACpBoK,EAAa3gB,IAAM4gB,OAAyB,MADxB,EAEU5gB,IAAMyW,SAAS,GAFzB,mBAEnBoK,EAFmB,KAEPC,EAFO,KAQ1B,OAJA9gB,IAAM6Z,WAAU,WACdiH,EAAcH,EAAWvZ,QAAS2Z,eACjC,CAACJ,IAGF,kBAAChZ,GAAA,EAAD,CAAac,QAASA,EAASgS,SAAUA,EAAUQ,MAAOf,aAAQe,GAAQxD,WAAS,EAAC9O,OAAQA,GAC1F,kBAACqY,GAAA,EAAD,CAAYC,IAAKN,EAAYzE,QAAQ,GAClCxP,GAEH,kBAAC,KAAD,eAAQwU,SAAS,EAAML,WAAYA,EAAY9Z,MAAOoa,aAAWpa,IAAYwP,GAC1E/S,IAEDsY,GAAoBb,IAAU,kBAACmG,GAAA,EAAD,KAAiBnG,KChBxCoG,GAjBA,SAAC,GAAD,QACbhG,aADa,MACL,GADK,MAEbuE,gBAFa,aAGbnX,eAHa,MAGH,WAHG,MAIbqT,wBAJa,SAMVvF,GANU,EAKb2C,aALa,yFAQb,gBAAC,GAAD,eAAgBzQ,QAASA,EAASmX,SAAUA,EAAU9D,iBAAkBA,GAAsBvF,GAC3F8E,EAAM3R,KAAI,SAAAY,GAAI,OACb,gBAACgX,GAAA,EAAD,CAAUhf,IAAKgI,EAAKvD,MAAOA,MAAO6Y,EAAWtV,EAAOA,EAAKvD,OACtDuD,EAAKoC,YCVDtH,GAAQ,gBAEN,SAASmc,GAAT,GAAkD,IAAD,IAAxBrgB,UAAwB,MAAnBkE,GAAmB,EAATmR,EAAS,uBAC9D,OACE,kBAACyH,GAAD,eACE9c,GAAIA,EACJkd,YAAa,KACbF,YAAY,QACZvF,OAAQ,CACN,CACEzX,GAAI,WACJ0b,MAAO4E,GACPnG,MAAO9H,GAAS7J,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,aAEhD,CACExL,GAAI,aACJ0b,MAAO4E,GACPnG,MAAO7H,GAAW9J,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,aAElD,CACExL,GAAI,YACJ0b,MAAO4E,GACPnG,MAAO5H,GAAU/J,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,aAEjD,CACExL,GAAI,OACJ0b,MAAO4E,GACPnG,MAAOgF,GAAM3W,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,aAE7C,CACExL,GAAI,UACJ0b,MAAO4E,GACPnG,MAAOkF,GAAU7W,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,aAEjD,CACExL,GAAI,sBACJ0b,MAAOyE,GACPhG,MAAOiF,GAAoB5W,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,eAGzD6J,I,yIC5CGkL,GAAgB,WAC3B,IAAMriB,EAAQuE,cACd,OAAO+d,aAActiB,EAAMuiB,YAAYC,KAAK,QCgB9C,SAASC,GAAepf,GACtB,OACE,kBAAC,KAAD,CAAWqf,OAAQ,oCACjB,kBAAC7X,GAAA,EAAUxH,IAKjB,IAAMI,GAAYC,cAAW,gBAAGsB,EAAH,EAAGA,QAASD,EAAZ,EAAYA,QAAS9E,EAArB,EAAqBA,OAArB,OAC3B0D,aAAa,CACXuU,OAAQ,CACNrY,MAAO,OACP0N,SAAU,SAEZnL,OAAQ,CACN8B,QAAS,OACToI,cAAe,SACfqW,QAAS,OACTnN,OAAO,aAAD,OAAezQ,EAAQS,UAE/Bod,aAAc,CACZrd,WAAYR,EAAQ4G,KAAK,MAE3BkX,WAAY,CACVC,cAAe,cAEjBC,QAAS,CACP7W,QAASlH,EAAQ,IAEnBge,QAAS,CACPzZ,OAAQ,EACR2C,QAASlH,EAAQ,GACjBie,WAAYje,EAAQ,IACpBqL,cAAerL,EAAQ,KAEzBgB,MAAO,CACLT,WAAYR,EAAQS,QAAQC,KAC5BL,MAAOL,EAAQM,OAAOC,MACtBiE,OAAQ,EACR2C,QAAS,EACThG,YAAalB,EAAQ,GACrBY,aAAcZ,EAAQ,IAExBke,YAAa,CACX9d,MAAO,WAETiZ,aAAc,CACZjZ,MAAOL,EAAQM,OAAOC,MACtBC,WAAYR,EAAQ8W,MAAMpW,KAC1B,UAAW,CACTF,WAAYR,EAAQ8W,MAAMyC,OAG9BC,kBAAmB,CACjBnZ,MAAOL,EAAQ8W,MAAMpW,MAEvBC,YAAa,CACXa,UAAW,GAEbiY,eAAgB,CACdpZ,MAAOL,EAAQS,QAAQgT,MACvB1U,SAAU,WACVwR,IAAK,MACLmJ,KAAM,MACNlY,WAAatG,EAAOye,aAAe,EACnCjG,YAAcxY,EAAOye,aAAe,QA6L3ByE,GAjKO,SAAC,GAgBM,IAf3BrhB,EAe0B,EAf1BA,GACO+c,EAcmB,EAd1B7Y,MACewT,EAaW,EAb1BhY,cAa0B,IAZ1B4hB,iBAY0B,aAX1BtE,mBAW0B,MAXZ,SAWY,MAV1BC,mBAU0B,MAVZ,SAUY,EAT1BC,EAS0B,EAT1BA,YAS0B,IAR1BzF,cAQ0B,MARjB,GAQiB,EAP1B0F,EAO0B,EAP1BA,SACAC,EAM0B,EAN1BA,SACAhI,EAK0B,EAL1BA,QACAN,EAI0B,EAJ1BA,QACA8C,EAG0B,EAH1BA,SACAtV,EAE0B,EAF1BA,SACG+S,EACuB,8KAClBlX,EAAWsE,cAAXtE,OADkB,EAEA6U,GAAehT,GAFf,mBAEnBxB,EAFmB,KAEZmZ,EAFY,KAGlBxY,EAAoCX,EAApCW,KAAMG,EAA8Bd,EAA9Bc,KAAMgN,EAAwB9N,EAAxB8N,QAAS7M,EAAejB,EAAfiB,WACvByE,EAAQ1F,EAAM0F,MAAQ1F,EAAM0F,MAAQ6Y,EAJhB,EAMgBje,IAAMyW,UAAS,GAN/B,mBAMnB8H,EANmB,KAMJC,EANI,KAOpBC,EAAsBze,IAAM8L,aAAY,kBAAM0S,GAAiB,SAAAxG,GAAI,OAAKA,OAAO,CAACwG,IAEhF/a,EAAUZ,GAAU,IACpB4f,EAAahB,KAVO,EAYmC/I,GAAU,CACrElY,OACAmY,SACAC,gBACAlZ,QACAmZ,WACAC,aANM1D,EAZkB,EAYlBA,OAAQmF,EAZU,EAYVA,WAAY9Z,EAZF,EAYEA,OAAQwZ,EAZV,EAYUA,WAAYO,EAZtB,EAYsBA,SAShDxa,IAAM6Z,WAAU,WACdrZ,GAAQge,GAAiB,KACxB,CAAChe,IAEJ,IAAMke,EAAW7H,KAAKC,UAAU1B,GAC1BuJ,EAAe3e,IAAM8L,aAAY,WACjCmO,EAAa,EACfpB,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBtX,YAAY,OAEzC2d,GAAYA,EAASxH,KAAKG,MAAM0H,MAEjC,CAAC7F,EAAUwF,EAAUK,EAAUzE,IAE5B2E,EAAe5e,IAAM8L,aAAY,WACrCwS,GAAYA,EAASzH,KAAKG,MAAM0H,MAC/B,CAACJ,EAAUI,IAERzH,EAAcjX,IAAM8L,aAAY,WACpC+M,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBxX,MAAM,OACnC8V,GAAWA,MACV,CAACuC,EAAUvC,IAERuI,EAAe,CACnBlG,SACA6B,WACApF,UAGI0J,EAAatR,GAAW7M,EACxBuV,EAAW4I,GAAcre,EAAM,QAErC,OACE,kBAAC,KAAD,eACEohB,gBAAiBY,GAAcD,EAAYX,GAAiB5X,KAC5DwY,WAAYA,EACZjiB,KAAMA,EACN8V,QAASW,EACTyL,kBAAA,UAAoBxhB,EAApB,iBACAyhB,mBAAA,UAAqBzhB,EAArB,uBACA0C,UAAWH,EAAQjC,OACnBohB,kBAAkB,EAClBjW,SAAS,KACT8K,WAAS,GACLlB,GAEO,OAAVnR,GACC,oCACE,kBAACyd,GAAA,EAAD,CAAa3hB,GAAE,UAAKA,EAAL,iBAAwB4hB,mBAAiB,EAAClf,UAAWH,EAAQ2B,OAC1E,kBAAC8E,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,gBAAgBC,WAAW,UACjD,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC9B,GAAA,EAAD,CAAYC,QAAQ,KAAK7E,UAAWH,EAAQwe,YACzC7c,GAAgB,CAAC/E,EAAMa,GAAI6R,KAAK,OAGrC,kBAAC7I,GAAA,EAAD,CAAMI,MAAI,GACP2M,EACC,kBAAC3O,GAAA,EAAD,CAASlD,MAAM,QAAQmD,UAAU,QAC/B,kBAACJ,GAAA,EAAD,CAAYiX,aAAW,QAAQxb,UAAWH,EAAQ6e,YAAala,QAAS6O,GACtE,kBAAC,KAAD,QAGF,QAIV,kBAACoI,GAAA,EAAD,OAGJ,kBAAC1D,GAAD,CAAWV,MAAOxa,EAAM,SACtB,oCACG+C,IAEGwS,EACF,kBAACA,EAAY6I,GAEb,kBAACkE,GAAA,EAAD,CAAenf,UAAWH,EAAQ0e,QAASa,UAAQ,GAChDlE,GAAc,kBAAC3P,GAAA,EAAD,CAAkBjN,KAAM7C,EAAOye,aAAcla,UAAWH,EAAQma,iBAC/E,kBAACV,GAAA,EAAD,CAAUC,IAAKoB,GACb,kBAACrU,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASjG,QAAS,GAC3C,kBAAC,GAAWya,KAGfN,GACC,kBAACrU,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,EAAGgG,QAAQ,SAASC,WAAW,UACtD,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASqW,EAAqBja,MAAM,aAA5C,WAIF,kBAAC0F,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASwW,EAAchb,UAAWH,EAAQga,cAChD,kBAAC,KAAD,CAAY5Z,MAAO,CAAE0b,YAAa,KADpC,WAEWpB,UASvBI,GACA,kBAAC0E,GAAA,EAAD,CAAerf,UAAWH,EAAQ2e,SACtB,SAAT/hB,QAAgCiB,IAAbgd,GAClB,kBAAC9G,GAAA,EAAD,CAAQtB,SAAUA,EAAUtS,UAAWH,EAAQka,kBAAmBvV,QAASqW,GACxEN,GAGY,OAAhBD,GACC,kBAAC1G,GAAA,EAAD,CAAQhT,MAAM,UAAU4D,QAAS6O,GAC9BiH,GAGY,OAAhBE,GACC,kBAAC5G,GAAA,EAAD,CAAQkD,WAAS,EAACxE,SAAUA,IAAaqE,EAAY/V,MAAM,UAAU4D,QAASuW,GAC3EP,GAAe/d,M,qBCpQjB+E,GAAQ,kBAEf4Q,GAAU,WACd,OACE,kBAAC+M,GAAA,EAAD,KACE,kBAACva,GAAA,EAAD,CAAYC,QAAQ,MAApB,YACA,kBAACD,GAAA,EAAD,CAAYC,QAAQ,QAAQ5E,MAAO,CAAE8B,UAAW,IAAhD,qFAIA,yBAAK9B,MAAO,CAAE8B,UAAW,KACvB,kBAAC,KAAD,CAAa1G,MAAM,OAAOikB,IAAI,8CAA8CC,UAAQ,OAM7E,SAASC,GAAT,GAAkE,IAAD,IAAjCliB,UAAiC,MAA5BkE,GAA4B,EAArBkR,EAAqB,EAArBA,QAAYC,EAAS,iCAC9E,OACE,kBAAC,GAAD,eACErV,GAAIA,EACJyL,SAAS,KACTvH,MAAOA,GACPkR,QAASA,EACT8H,YAAa,KACbF,YAAY,QACZlI,QAASA,IACLO,I,yBC1BJ1T,GAAYC,aAAW,gBAAGqB,EAAH,EAAGA,QAASkf,EAAZ,EAAYA,MAAZ,OAC3BtgB,YAAa,CACXuB,KAAM,CACJpB,SAAU,WACVjE,MAAO,QAETkL,UAAW,CACTjH,SAAU,YAEZif,QAAS,CACPjX,UAAW,GACX5F,YAAa,GACbN,aAAc,GACdqd,WAAY,EACZ5S,cAAe,EACfzE,aAAcqY,EAAMrY,aACpBsY,YAA8B,UAAjBnf,EAAQ9D,KAAmB,sBAAwB,4BAChE,UAAW,CACTijB,YAAanf,EAAQwL,KAAK/K,UAG9B+b,WAAY,CACVzd,SAAU,WACV2a,KAAM,EACNnJ,IAAK,EAEL6O,UAAW,+BAEbC,eAAgB,gBAAGvI,EAAH,EAAGA,MAAH,MAAqB,CACnCqI,YAAapJ,aAAQe,GAAS9W,EAAQ8W,MAAMpW,KAAO,iBAM1C,SAAS4e,GAAT,GAUX,IAAD,IATD/W,aASC,MATO,GASP,MARDuO,aAQC,WARO3Z,EAQP,MAPDrC,aAOC,WAPOqC,EAOP,MANDqL,gBAMC,WANUrL,EAMV,MALDqH,cAKC,WALQrH,EAKR,MAJDqE,iBAIC,WAJWrE,EAIX,MAHDyD,oBAGC,WAHczD,EAGd,MAFDpC,cAEC,WAFQoC,EAER,MADDkC,gBACC,WADUlC,EACV,EACKmC,EAAUZ,GAAU,CAAEoY,UAD3B,EAEmCjb,IAAMyW,SAAS,GAFlD,mBAEMoK,EAFN,KAEkBC,EAFlB,KAGK4C,EAAW1jB,IAAM4gB,OAAO,MAM9B,OALA5gB,IAAM6Z,WAAU,WACd,IAAM8J,EAAiBC,IAASC,YAAYH,EAAStc,SACrD0Z,EAA2B,MAAb6C,EAAoBA,EAAU5C,YAAc,KACzD,CAACrU,IAGF,yBAAK9I,UAAWH,EAAQa,KAAMT,MAAO,CAAE5E,QAAO0N,WAAUhE,SAAQhD,YAAWZ,eAAc7F,WACvF,kBAAC8hB,GAAA,EAAD,CAAYC,IAAKyC,EAAUI,QAASpX,EAAOjE,QAAQ,WAAW7E,UAAWH,EAAQkd,WAAYzE,QAAM,GAChGxP,GAEH,yBAAK9I,UAAWH,EAAQ0G,WACtB,kBAACD,GAAA,EAAD,CAAMC,WAAS,EAACjJ,GAAIwL,EAAO9I,UAAWH,EAAQ0e,QAAS9X,WAAW,UAChE,kBAACH,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACZ/G,GAEH,kBAAC,KAAD,CAAgBI,UAAWH,EAAQ+f,eAAgBtC,SAAO,EAACL,WAAYA,O,cChElE,SAASkD,GAAT,GAWX,IAAD,IAVDjc,gBAUC,WAVUxG,EAUV,EATDoL,EASC,EATDA,MASC,IARDwJ,gBAQC,aAPDhU,YAOC,MAPM,QAON,MANDuG,eAMC,MANS,WAMT,MALDqT,wBAKC,SAJDrB,EAIC,EAJDA,SACAQ,EAGC,EAHDA,MAEG1E,GACF,EAFDxP,MAEC,gHACKS,EAAexH,eAAkB,SAACqQ,EAAGtJ,GAAJ,OAAce,GAAYA,EAAS,CAAEL,OAAQ,CAAEV,aAAY,CAACe,IACnG,OACE,gBAACH,GAAA,EAAD,CAAac,QAASA,EAAgBgS,SAAUA,EAAU9R,OAAO,QAAQsS,MAAOf,aAAQe,GAAQxD,WAAS,GACvG,gBAACgM,GAAD,CAAa/W,MAAOA,EAAOuO,MAAOA,GAChC,gBAAC,KAAD,eAAWlZ,KAAM2K,EAAOxK,KAAMA,EAAM8hB,UAAW,GAAK9N,SAAUA,EAAUpO,SAAUN,GAAkB+O,MAEpGuF,GAAoBb,IAAU,gBAACmG,GAAA,EAAD,KAAiBnG,ICnBhD,IAAM7V,GAAQ,mBAEN,SAAS6e,GAAT,GAAqD,IAAD,IAAjC/iB,UAAiC,MAA5BkE,GAA4B,EAArBkR,EAAqB,EAArBA,QAAYC,EAAS,mCACtCrC,GAAehT,GAAjCsV,EADwD,oBAG3DmI,EAAe3e,IAAM8L,aACzB,SAAAsJ,GAEEoB,GAAe,SAAAwB,GAAI,sBAAUA,EAAV,CAAgBxX,MAAM,EAAOG,YAAY,EAAOF,OAAQ,QAC3E6V,GAAWA,MAEb,CAACE,EAAgBF,IAQnB,OACE,kBAAC,GAAD,eACEpV,GAAIA,EACJkE,MAAOA,GACPgZ,YAAY,SACZC,SAAUM,EACVrI,QAASA,EACTwC,SAZqB,SAAC1D,EAAQ8O,GAEhC,OADU,eAAQA,EAAYzjB,SAY5BG,cAAe,GACf+X,OAAQ,CACN,CAAEzX,GAAI,QAAS4E,QAAQ,GACvB,CAAE5E,GAAI,OAAQwL,MAAO,yBAA0BnC,GAAI,EAAG2O,aAAc,YAAauB,UAAU,GAC3F,CAAEvZ,GAAI,SAAUwL,MAAO,gBAAiBkQ,MAAOmH,GAAQxZ,GAAI,EAAGkQ,UAAU,GACxE,CACEvZ,GAAI,SACJwL,MAAO,eACPoO,WAAW,EACXpM,KAAM,GACNnE,GAAI,GACJkQ,UAAU,EACVC,WAAW,KAGXnE,IChCV,SAAS4N,GAAT,GAA2C,IAAD,IAAnBjE,QACflL,OADkC,SACjBC,KAA2BA,KAClD,OAAO,kBAACD,EAAD,CAAMxQ,MAAM,SAASe,SAAS,QAAQ1B,MAAO,CAAE3E,OAAQ,MAGhE,IAoHaklB,GAAiB,SAAC,GAAuB,IAAD,IAApBnkB,YAAoB,MAAb,OAAa,IAC3BL,IAAfG,EAD0C,oBAE7CskB,EAAcrkB,IAAM8L,aAAY,kBAAM/L,EAAqB,SAATE,EAAkB,QAAU,UAAS,CAACA,EAAMF,IACpG,OACE,kBAAC8V,GAAD,CAAcb,KAAe,SAAT/U,EAAkBgV,KAAaA,KAAgBC,QAAO,oBAAwB,SAATjV,EAAkB,QAAU,OAA3C,SAA0DmI,QAASic,KAK3IC,GAA2C,CAC/CviB,KAFW,eAGX0L,QAAS,CAAC2G,GAAmBmQ,IAC7BhX,QAAS,CAAC,CAAExL,KAAM,MAAOyiB,OAAQ,cAAejZ,SAAU,KAAM6C,KAhI/C,SAAC,GAWM,IAVxBmE,EAUuB,EAVvBA,IACAxQ,EASuB,EATvBA,KACA8Q,EAQuB,EARvBA,QAQuB,IAPvBG,iBAOuB,MAPX,GAOW,MANvBF,aAMuB,MANf,GAMe,MALvBM,iBAKuB,MALX,GAKW,MAJvBH,gBAIuB,MAJZ,GAIY,EAHvBK,EAGuB,EAHvBA,mBAGuB,IAFvBhB,iBAEuB,MAFX,GAEW,EADvBE,EACuB,EADvBA,OAEA,OACE,kBAACtI,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,eAAeC,WAAW,SAASjG,QAAS,GAClE,kBAAC8F,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAAC1G,MAAO,CAAE0H,SAAU,MAC/B,kBAACrB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UACtB,kBAACF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYoT,MAAM,SAASnT,QAAQ,KAAKjE,MAAM,eAC3CzC,IAGL,kBAACmI,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYoT,MAAM,SAASnT,QAAQ,QAAQjE,MAAM,eAC9CqO,IAGL,kBAAC3I,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAI1G,MAAO,CAAE8I,SAAU,MACpC,kBAAC,GAAD,CAAe4F,IAAKA,EAAKC,OAAQA,EAAQF,UAAWA,KAEtD,kBAACpI,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYoT,MAAM,UAChB,yBAAK/X,MAAO,CAAE3E,OAAQ,KAAOulB,IAAKC,KAAMC,IAAI,aAKpD,kBAACza,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UACtB,kBAACF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,GACZ,CACC,CAAE/E,MAAO,YAAaiW,MAAO5H,GAAW2B,OAAQpC,GAChD,CAAE5N,MAAO,OAAQiW,MAAOgF,GAAOjL,OAAQtC,IACvCpJ,KAAI,SAAAkb,GAAC,OACL,kBAAC1a,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIjI,IAAKsiB,EAAExf,OACxB,kBAACqe,GAAD,CAAaxkB,MAAO,IAAKyN,MAAOkY,EAAExf,MAAOO,UAAW,GAAIZ,aAAc,IAClE6f,EAAEvJ,MAAa3R,KAAI,SAAAY,GAAI,OACvB,kBAACJ,GAAA,EAAD,CAAMC,WAAS,EAAC7H,IAAKgI,EAAMlG,QAAS,EAAGP,MAAO,CAAEgU,WAAY,IAC1D,kBAAC3N,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC6Z,GAAD,CAAajE,QAAS0E,EAAExP,OAAOnF,SAAS3F,MAE1C,kBAACJ,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC9B,GAAA,EAAD,CAAYC,QAAQ,SAAS6B,eAS7C,kBAACJ,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,GACZ,CACC,CACE/E,MAAO,WACPiW,MAAO9H,GACP6B,OAAQnC,IAEVvJ,KAAI,SAAAkb,GAAC,OACL,kBAAC1a,GAAA,EAAD,CAAMI,MAAI,EAAChI,IAAKsiB,EAAExf,OAChB,kBAACqe,GAAD,CAAaxkB,MAAO,IAAKyN,MAAOkY,EAAExf,MAAOO,UAAW,GAAIZ,aAAc,IAClE6f,EAAEvJ,MAAa3R,KAAI,SAAAY,GAAI,OACvB,kBAACJ,GAAA,EAAD,CAAMC,WAAS,EAAC7H,IAAKgI,EAAMlG,QAAS,EAAGP,MAAO,CAAEgU,WAAY,IAC1D,kBAAC3N,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC6Z,GAAD,CAAajE,QAAS0E,EAAExP,OAAOnF,SAAS3F,MAE1C,kBAACJ,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC9B,GAAA,EAAD,CAAYC,QAAQ,SAAS6B,eAS7C,kBAACJ,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,GACZ,CACC,CAAE/E,MAAO,UAAWiW,MAAOkF,GAAWnL,OAAQhC,GAC9C,CAAEhO,MAAO,sBAAuBiW,MAAOiF,GAAqBlL,OAAQ,CAAC9B,KACrE5J,KAAI,SAAAkb,GAAC,OACL,kBAAC1a,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIjI,IAAKsiB,EAAExf,OACxB,kBAACqe,GAAD,CAAaxkB,MAAO,IAAKyN,MAAOkY,EAAExf,MAAOO,UAAW,GAAIZ,aAAc,IAClE6f,EAAEvJ,MAAa3R,KAAI,SAAAY,GAAI,OACvB,kBAACJ,GAAA,EAAD,CAAMC,WAAS,EAAC7H,IAAKgI,EAAMlG,QAAS,EAAGP,MAAO,CAAEgU,WAAY,IAC1D,kBAAC3N,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC6Z,GAAD,CAAajE,QAAS0E,EAAExP,OAAOnF,SAAS3F,MAE1C,kBAACJ,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC9B,GAAA,EAAD,CAAYC,QAAQ,SAAS6B,qBA4BrD6C,SAAS,EACTzL,SAAUmjB,GACVC,QAAQ,EACRxe,QAAQ,EACRye,gBAAgB,EAChBC,cAAe,EACfC,UAAW,IACX/e,QAAS,CACP,kBAAC,GAAD,CAAyB6O,OAAQwM,EAAelgB,MAbvC,iBAcT,kBAAC,GAAD,MACA,kBAACwU,GAAD,CAAcd,OAAQqO,EAAsBpO,KAAMC,KAAYC,QAAQ,2BAI7DgQ,GAAmB,SAAAziB,GAC9B,IAAMxD,EAAQU,IACd,OAAO,kBAACsN,GAAD,iBAA2BqX,GAA3B,CAAyCa,WAAYlmB,EAAQ,MAAyBwD,KCtJlFV,GAAO,eACdqjB,GAAS,SAAAzV,GAAI,OAAI,yBAAK9L,MAAO,CAAEwhB,UAAW,WAAa1V,IAEhD2V,GAAc,SAAC,GAAyB,IAAD,IAAtBpF,QACtBlL,OAD4C,SAC3BC,KAA2BA,KAClD,OAAOmQ,GAAO,kBAACpQ,EAAD,CAAMxQ,MAAM,SAASe,SAAS,YAGxCggB,GAAc,SAAClK,EAAOjG,GAAR,IAAgBpQ,EAAhB,4DAA+B1D,EAA/B,OAClB,kBAAC4I,GAAA,EAAD,CAAMC,WAAS,EAACtG,MAAO,CAAEmB,iBACtBqW,EAAM3R,KAAI,SAACmB,EAAGsG,GAAJ,OACT,kBAACjH,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACjI,IAAK6O,GACjB,kBAAC,GAAD,CAAa+O,QAAS9K,EAAOnF,SAASpF,WAuCjC2a,GAAgB,SAAC,GAAqC,IAAnCjT,EAAkC,EAAlCA,IAAKC,EAA6B,EAA7BA,OAA6B,IAArBF,iBAAqB,MAAT,GAAS,EAChE,OACE,kBAACpI,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,UACzB,kBAACH,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASD,QAAQ,iBAC1C,kBAAC2Z,GAAA,EAAD,CAAQ7hB,KAAK,QAAQ8hB,UAAW,GAAKjd,MAAO0e,OAAOjT,GAASkT,UAAU,IACtE,kBAACld,GAAA,EAAD,CAAYC,QAAQ,UAAUjE,MAAM,iBAApC,WACOgO,EADP,QAKJ,kBAACtI,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,iBACtB,kBAACF,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACuL,GAAD,CAEEQ,OAAO,EACP5N,QAAQ,OACRvG,KAAK,QACL8S,KAAM,KACNE,QAAQ,iBAEP5C,EAAUhJ,OARb,aAWF,kBAACY,GAAA,EAAD,CAAMI,MAAI,GAAE,SACZ,kBAACJ,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACuL,GAAD,CACEd,OAAQwP,EACRlO,OAAO,EACP5N,QAAQ,OACRvG,KAAK,QACL8S,KAAM,KACNE,QAAQ,yBACRtU,cAAe,CAAE+kB,MAAOpT,IAP1B,iBAkBN+R,GAA2C,CAC/CviB,QACA0L,QAAS,CAAC2G,GAAmBmQ,IAC7BhX,QAAS,CACP,CAAExL,KAAM,MAAOyiB,OAAQ,cAAejZ,SAAU,IAAK6C,KA7EvC,SAAC,GAAuB,IAArBrM,EAAoB,EAApBA,KAAM8Q,EAAc,EAAdA,QACzB,OACE,kBAAC3I,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,UACzB,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACJ,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,UACzB,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,yBAAKzG,MAAO,CAAE3E,OAAQ,IAAMulB,IAAKC,KAAMC,IAAI,YAIjD,kBAACza,GAAA,EAAD,CAAMI,MAAI,EAACE,cAAY,EAACD,IAAE,GACxB,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACtG,MAAO,CAAEyH,QAAS,IAChC,kBAACpB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC/B,GAAA,EAAD,CAAYmC,QAAM,EAAClC,QAAQ,UAAUjE,MAAM,eACxCzC,IAGL,kBAACmI,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAAC1G,MAAO,CAAEyB,YAAa,IAClC,kBAACkD,GAAA,EAAD,CAAYmC,QAAM,EAAClC,QAAQ,UAAUjE,MAAM,iBAA3C,MACMqO,SA2Dd,CAAE9Q,KAAM,SAAUyiB,OAAQ,SAAUvlB,MAAO,IAAKmP,KAAMoX,IACtD,CACEzjB,KAAM,YACN9C,MAAO,IACPulB,OACE,oCACE,kBAACta,GAAA,EAAD,CAAMC,WAAS,GACb,kBAACD,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UAAxB,cAIDqJ,GAAU/J,KAAI,SAAAG,GAAC,OACd,kBAACK,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACjI,IAAKuH,GAChBub,GAAOvb,SAMlBuE,KAvGiB,SAAC,GAAD,QAAG4E,UAAH,OAAqCuS,GAAY9R,QAAjD,MAAe,GAAf,KAyGnB,CACE1R,KAAM,gBACN9C,MAAO,IACPulB,OACE,oCACE,kBAACta,GAAA,EAAD,CAAMC,WAAS,GACb,kBAACD,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UAAxB,kBAIDoW,GAAgB9W,KAAI,SAAAG,GAAC,OACpB,kBAACK,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACjI,IAAKuH,GAChBub,GAAOvb,SAMlBuE,KA3HsB,SAAC,GAAD,QAAG8E,gBAAH,OAA2CqS,GAAY/E,QAAvD,MAAqB,GAArB,KA6HxB,CACEze,KAAM,OACN9C,MAAO,IACPulB,OACE,oCACE,kBAACta,GAAA,EAAD,CAAMC,WAAS,GACb,kBAACD,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UAAxB,SAIDiW,GAAM3W,KAAI,SAAAG,GAAC,OACV,kBAACK,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACjI,IAAKuH,GAChBub,GAAOvb,SAMlBuE,KA/Ia,SAAC,GAAD,QAAG0E,MAAH,OAAoByS,GAAYlF,QAAhC,MAAW,GAAX,KAiJf,CACEte,KAAM,WACN9C,MAAO,IACPulB,OACE,oCACE,kBAACta,GAAA,EAAD,CAAMC,WAAS,EAACtG,MAAO,CAAEmB,aAAc,KACrC,kBAACkF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACL,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,UAAxB,aAIDmJ,GAAS7J,KAAI,SAAAG,GAAC,OACb,kBAACK,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,EAACjI,IAAKuH,GAChBub,GAAOvb,SAMlBuE,KAnKiB,SAAC,GAAD,QAAG6E,SAAH,OAAuBsS,GAAYhS,QAAnC,MAAc,GAAd,EAAuD,OAsK5EpG,SAAS,EACTzL,SAAUmjB,GACVC,QAAQ,EACRxe,QAAQ,EACRJ,QAAS,CACP,kBAAC,GAAD,CAAyB6O,OAAQwM,EAAelgB,MAAOU,KACvD,kBAAC,GAAD,CAAgB9B,KAAK,UACrB,kBAAC4V,GAAD,CAAcd,OAAQqO,EAAsBpO,KAAMC,KAAYC,QAAQ,2BAI7D0Q,GAAe,SAAAnjB,GAC1B,IAAMxD,EAAQU,IACd,OAAO,kBAACsN,GAAD,iBAA2BqX,GAA3B,CAAyCa,WAAYlmB,EAAQ,MAAyBwD,KC/MzFojB,GAAgB,SAAAxkB,GACpB,IAAMxB,EAAWC,cAGjB,MAAO,CAFYL,aAAY,SAACC,GAAD,uBAAqBA,EAAMkC,SAASP,UAApC,QAA8C,MACvDrB,eAAkB,SAAAiB,GAAO,OAAIpB,EAL5B,SAACwB,EAAOJ,GAAR,MAAqB,CAAEZ,KAAM,qBAAsBgB,QAAOJ,WAKrB6kB,CAAiBzkB,EAAOJ,MAAW,CAACI,EAAOxB,MAM5FkmB,GAAkB,kBAAMF,GAAcnU,KACtCsU,GAAa,kBAAMH,GAAcnU,KACjCuU,GAAmB,kBAJT5kB,EAI8BqQ,GAJrBjS,aAAY,SAACC,GAAD,aAAqB8J,OAAOC,KAAP,UAAY/J,EAAMkC,SAASP,UAA3B,QAAqC,IAAIiI,UAAnF,IAAAjI,GAuBV6kB,GAAoB,WAAO,IAAD,EAjBZ,WAAO,IAAD,EACbF,KAAXhU,EADwB,sBAER+T,KAAhBnU,EAFwB,sBAGLiU,GAAcnU,IAHT,mBAGxBP,EAHwB,KAGjBgV,EAHiB,KAc/B,MAAO,CAAChV,EAVWnR,eAAkB,WACnComB,QAAQC,IAAI,oBACZF,EACE3c,OAAOC,KAAKmI,GAAchI,QAAO,SAACuO,EAAGnJ,GAEnC,OADAmJ,EAAEvG,EAAa5C,GAAGuD,KAAO/I,OAAOC,KAAKuI,GAASnJ,QAAO,SAAAc,GAAC,OAAIqI,EAAQrI,GAAGgc,QAAU/T,EAAa5C,GAAGuD,OACxF4F,IACN,OAEJ,CAACvG,EAAcI,EAASmU,KAMJG,GAAdC,EAD4B,oBAE/BC,EAAeP,KACrBjmB,aAAgB,WACdumB,MAEC,CAACC,KCtCS,SAASC,KAAQ,IAAD,EACV7mB,IAAZL,EADsB,sBAETwmB,KAAXW,EAFoB,sBAGNV,KAAdW,EAHoB,oBA2B7B,OAtBAT,KAGAlmB,aAAgB,WACd2R,GAAGC,aAAagV,KAAK,CAAEC,cAAc,IAAQC,MAAK,SAAAC,GAChD,IACIC,EADcD,EAAKrY,KAAKhF,KAAI,SAAA8F,GAAC,OAAIA,EAAEyX,OAChBrd,QAAO,SAACuO,EAAGnJ,GAEhC,OADAmJ,EAAEnJ,EAAEuD,KAAOvD,EACJmJ,IACN,IACHuO,EAAQM,MAEVrV,GAAGK,QAAQ4U,KAAK,CAAEC,cAAc,IAAQC,MAAK,SAAAC,GAC3C,IACIC,EADcD,EAAKrY,KAAKhF,KAAI,SAAA8F,GAAC,OAAIA,EAAEyX,OAChBrd,QAAO,SAACuO,EAAGnJ,GAEhC,OADAmJ,EAAEnJ,EAAEuD,KAAOvD,EACJmJ,IACN,IACHwO,EAAWK,QAEZ,CAACL,EAAYD,IAEI,UAAbnnB,EAAuB,gBAAC,GAAD,MAA0B,gBAAC,GAAD,MC1B1D,IASe2nB,GATA,kBACb,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAOC,OAAK,EAACC,KAAMC,aAAU,KAAM1Y,UAAW8X,KAC9C,gBAAC,IAAD,CAAOU,OAAK,EAACC,KAAMC,aAAU,SAAU1Y,UAAW8X,KAClD,gBAAC,IAAD,CAAOU,OAAK,EAACC,KAAMC,aAAU,cAAe1Y,UAAW3K,IACvD,gBAAC,IAAD,CAAOmjB,OAAK,EAACC,KAAMC,aAAU,WAAY1Y,UAAW5K,M,mICMzCujB,GAfI,SAAC,GAAqE,IAAnEnW,EAAkE,EAAlEA,MAAOoW,EAA2D,EAA3DA,YAAaC,EAA8C,EAA9CA,WAAYhkB,EAAkC,EAAlCA,SAAU4R,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,UAAgB,EACpDrV,IAAMyW,UAAS,GADqC,mBAC/EgR,EAD+E,KACpEC,EADoE,KAYtF,OAVA1nB,IAAM6Z,WAAU,WACV1I,IAAUoW,GACM,IAAdE,IACFC,GAAa,GACbF,GAAcA,EAAW,CAAEpS,SAAQC,gBAGvB,IAAdoS,GAAsBC,GAAa,KAEpC,CAACvW,EAAOoW,EAAaE,EAAWC,EAAcF,EAAYpS,EAAQC,IAC9DoS,GAAajkB,GCoBtB,SAASqe,GAAepf,GACtB,OACE,kBAAC,KAAD,CAAWqf,OAAQ,oCACjB,kBAAC7X,GAAA,EAAUxH,IAKjB,IAAMI,GAAYC,cAAW,gBAAGsB,EAAH,EAAGA,QAASD,EAAZ,EAAYA,QAAS9E,EAArB,EAAqBA,OAArB,OAC3B0D,aAAa,CACXvB,OAAQ,CACN8B,QAAS,OACToI,cAAe,SACfqW,QAAS,OACTnN,OAAO,aAAD,OAAezQ,EAAQS,UAE/Bqd,WAAY,CACVC,cAAe,cAEjByF,cAAe,CACbhf,OAAQ,EACR2C,QAASlH,EAAQ,GACjBie,WAAYje,EAAQ,IACpBqL,cAAerL,EAAQ,KAEzBwjB,YAAa,CACXjjB,WAAYR,EAAQS,QAAQC,KAC5BL,MAAOL,EAAQM,OAAOC,MACtBiE,OAAQ,EACR2C,QAAS,EACThG,YAAalB,EAAQ,GACrBY,aAAcZ,EAAQ,IAExBke,YAAa,CACX9d,MAAO,WAETiZ,aAAc,CACZjZ,MAAOL,EAAQM,OAAOC,MACtBC,WAAYR,EAAQ8W,MAAMpW,KAC1B,UAAW,CACTF,WAAYR,EAAQ8W,MAAMyC,OAG9BmK,cAAe,CACbzkB,SAAU,GAEZwa,eAAgB,CACdpZ,MAAOL,EAAQS,QAAQgT,MACvB1U,SAAU,WACVwR,IAAK,MACLmJ,KAAM,MACNlY,WAAatG,EAAOye,aAAe,EACnCjG,YAAcxY,EAAOye,aAAe,QAsQ3BgK,GA3Oc,SAAC,GAgBD,IAf3B5mB,EAe0B,EAf1BA,GACO+c,EAcmB,EAd1B7Y,MAc0B,IAb1BxE,cAAegY,OAaW,MAbK,GAaL,MAZ1B4J,iBAY0B,cAX1BtE,YAW0B,EAV1BC,oBAU0B,MAVZ,SAUY,OAT1BC,YAS0B,EAR1BzR,iBAQ0B,MARf,KAQe,MAP1Bob,aAO0B,MAPlB,GAOkB,EAN1B1J,EAM0B,EAN1BA,SACAC,EAK0B,EAL1BA,SACAhI,EAI0B,EAJ1BA,QAEAwC,GAE0B,EAH1B9C,QAG0B,EAF1B8C,UACGvC,EACuB,6KAClBlX,EAAWsE,cAAXtE,OADkB,EAEgBW,IAAMyW,UAAS,GAF/B,mBAEnB8H,EAFmB,KAEJC,EAFI,OAGUxe,IAAMyW,SAAS,GAHzB,mBAGnBuR,EAHmB,KAGPC,EAHO,OAIA/T,GAAehT,GAJf,mBAInBxB,EAJmB,KAIZmZ,EAJY,KAKlBxY,EAAgDX,EAAhDW,KAAMG,EAA0Cd,EAA1Cc,KAAMG,EAAoCjB,EAApCiB,WAAY6M,EAAwB9N,EAAxB8N,QAAS9M,EAAehB,EAAfgB,WACnCwnB,EAAgBloB,IAAM8L,aAAY,SAAAqc,GAAI,OAAItP,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBtX,WAAYynB,SAAU,CAACtP,IAC9FzT,EAAQ1F,EAAM0F,MAAQ1F,EAAM0F,MAAQ6Y,EACpCtF,EAASoP,EACZlf,QAAO,SAAAuf,GAAC,OAAIA,EAAEzP,UACdjP,KAAI,SAAA0e,GAAC,OAAIA,EAAEzP,UACX/O,QAAO,SAACC,EAAGmF,GAAJ,MAAY,uBAAOnF,GAAP,aAAamF,MAAK,IAXd,EAakC0J,GAAU,CACpElY,OACAmY,SACAC,gBACAlZ,QACAmZ,WACAC,aANM1D,EAbkB,EAalBA,OAAQC,EAbU,EAaVA,UAAWkF,EAbD,EAaCA,WAAY9Z,EAbb,EAaaA,OAAQ+Z,EAbrB,EAaqBA,SAU/Cxa,IAAM6Z,WAAU,WACdrZ,GAAQynB,EAAc,GACtBznB,GAAQge,GAAiB,KACxB,CAAChe,IAEJ,IAAMiD,EAAUZ,GAAU,IACpB4f,EAAahB,KAEb4G,EAAcN,EAAMlf,QAAO,SAAAuf,GAAC,OtB7EQ,KAAnBrhB,EsB6E8C,oBAAdqhB,EAAEE,QAAyBF,EAAEE,QAAQlT,GAAUgT,EAAEE,etB7E5ChnB,IAAVyF,EAA3B,IAAAA,KsB8EjBwhB,EAAeF,GAAeA,EAAYL,IAAgB,GAC1DQ,EAAeD,EAAYzP,SAE3B2P,GAAmBF,EAAY5P,OAAS4P,EAAY5P,OAAO9P,QAAO,SAAAsP,GAAC,OAAI+B,GAAQ/B,EAAG/C,EAAQ3U,MAAS6I,OAAS,EAE5GoV,GAAW7H,KAAKC,UAAU1B,GAC1BuJ,GAAe3e,IAAM8L,aAAY,WACjC2c,GAAmB,EACrBP,GAAc,GAEd7J,GAAYA,EAASxH,KAAKG,MAAM0H,OAEjC,CAAC+J,GAAkBP,EAAe7J,EAAUK,KAEzCE,GAAe5e,IAAM8L,aAAY,WACrCwS,GAAYA,EAASzH,KAAKG,MAAM0H,OAC/B,CAACJ,EAAUI,KAERD,GAAsBze,IAAM8L,aAAY,kBAAM0S,GAAiB,SAAAxG,GAAI,OAAKA,OAAO,CAACwG,IAEhFvH,GAAcjX,IAAM8L,aAAY,WACpC+M,GAAS,SAAAb,GAAI,sBAAUA,EAAV,CAAgBxX,MAAM,OACnC8V,GAAWA,MACV,CAACuC,EAAUvC,IAERoS,GAAa1oB,IAAM8L,aAAY,WACnC,GAAI2c,GAAmB,EACrBP,GAAc,OACT,CACL,IAAMS,EAAO,WAA4B,IAA3BC,EAA0B,4DAAdtnB,EACxBsnB,GAAavT,GAAU,SAAA2C,GAAI,OAAIqB,KAAMrB,EAAM4Q,MAC3CloB,GAAcwnB,GAAc,GAC5BD,GAAc,SAAAY,GAAc,OAAIA,EAAiB,MAEnDL,EAAeA,EAAa3R,KAAKG,MAAM0H,IAAWiK,GAAQA,OAE3D,CAACT,EAAe7S,EAAW3U,EAAY8nB,EAAcP,EAAeQ,GAAkB/J,KAEnFoK,GAAa9oB,IAAM8L,aAAY,kBAAMmc,GAAc,SAAAY,GAAc,OAAIA,EAAiB,OAAI,CAACZ,IAE3FnJ,GAAatR,GAAW7M,EACxBuV,GAAW4I,IAAcre,EAAM,QAErC,OACE,kBAAC,KAAD,eACEohB,gBAAiBY,GAAcD,EAAYX,GAAiB5X,KAC5DwY,WAAYA,EACZjiB,KAAMA,EACN8V,QAASW,GACTyL,kBAAA,UAAoBxhB,EAApB,iBACAyhB,mBAAA,UAAqBzhB,EAArB,uBACA0C,UAAWH,EAAQjC,OACnBohB,kBAAkB,EAClBjW,cAAmCrL,IAAzBinB,EAAY5b,SAAyB4b,EAAY5b,SAAWA,EACtE8K,WAAS,GACLlB,GAEO,OAAVnR,GACC,oCACE,kBAACyd,GAAA,EAAD,CAAa3hB,GAAE,UAAKA,EAAL,iBAAwB4hB,mBAAiB,EAAClf,UAAWH,EAAQmkB,aAC1E,kBAAC1d,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,gBAAgBC,WAAW,UACjD,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAC9B,GAAA,EAAD,CAAYC,QAAQ,KAAK7E,UAAWH,EAAQwe,YACzC7c,GAAgB,CAAC/E,EAAMa,GAAI6R,KAAK,OAGrC,kBAAC7I,GAAA,EAAD,CAAMI,MAAI,GACR,kBAAChC,GAAA,EAAD,CAASlD,MAAM,QAAQmD,UAAU,QAC/B,kBAACJ,GAAA,EAAD,CAAYiX,aAAW,QAAQxb,UAAWH,EAAQ6e,YAAala,QAAS6O,IACtE,kBAAC,KAAD,WAMV,kBAACoI,GAAA,EAAD,OACEd,GACA,kBAAC0E,GAAA,EAAD,KACE,kBAAC/Y,GAAA,EAAD,CAAMC,WAAS,EAACtG,MAAO,CAAEyB,YAAa,GAAIN,aAAc,IAAMqF,WAAW,UACvE,kBAACH,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,GACX,kBAAC/B,GAAA,EAAD,CAAYhE,MAAM,iBAAiB+jB,EAAY7b,MAAQ6b,EAAY7b,MAAQ6b,EAAYrnB,KAExFmnB,EAAY/e,OAAS,GACpB,kBAACY,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACye,GAAA,EAAD,CAAMvkB,MAAM,UAAUkI,MAAK,UAAKsb,EAAa,EAAlB,eAA0BK,EAAY/e,cAQ/E,kBAACyZ,GAAA,EAAD,CAAeC,UAAQ,GACrB,kBAACrH,GAAD,CAAWV,MAAOxa,EAAM,SACrBqe,IAAc,kBAAC3P,GAAA,EAAD,CAAkBjN,KAAM7C,EAAOye,aAAcla,UAAWH,EAAQma,iBAC/E,kBAACV,GAAA,EAAD,CAAUC,IAAKoB,GACZ8J,EAAY3e,KAAI,WAA+CmB,GAA/C,QAAG8N,cAAH,MAAY,GAAZ,EAAgBjM,EAAhB,EAAgBA,MAAO8a,EAAvB,EAAuBA,WAAvB,EAAmCjc,SAAnC,OACf,kBAAC2R,GAAA,EAAD,CAAU5a,IAAKuI,EAAGsS,GAAI6K,IAAend,GACnC,kBAACme,GAAA,EAAD,CAAM1mB,IAAKoK,GACT,kBAAC,GAAD,CACEpK,IAAKoK,EACLyE,MAAOtG,EACP0c,YAAaS,EACbR,WAAYA,EACZpS,OAAQA,EACRC,UAAWA,GAEX,kBAACnL,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASjG,QAAS,GAC3C,kBAAC,GAAD,CAAQuU,OAAQA,EAAQ6B,SAAUA,EAAUpF,OAAQA,YAO/DmJ,GACC,kBAACrU,GAAA,EAAD,CAAMC,WAAS,EAAC/F,QAAS,EAAGgG,QAAQ,SAASC,WAAW,UACtD,kBAACH,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASqW,GAAqBja,MAAM,aAA5C,WAIF,kBAAC0F,GAAA,EAAD,CAAMI,MAAI,GACR,kBAACkN,GAAA,EAAD,CAAQpP,QAASwW,GAAchb,UAAWH,EAAQga,cAChD,kBAAC,KAAD,CAAY5Z,MAAO,CAAE0b,YAAa,KADpC,WAEWpB,QAOnBI,GACA,kBAAC0E,GAAA,EAAD,CAAerf,UAAWH,EAAQkkB,eAChC,kBAACsB,GAAA,EAAD,CACExgB,QAAQ,OACRsf,MAAOM,EAAY/e,OACnBpG,SAAS,SACT8kB,WAAYA,EACZpkB,UAAWH,EAAQokB,cACnBqB,WACElB,IAAeK,EAAY/e,OAAS,EAClC,kBAACkO,GAAA,EAAD,CACEhT,MAAM,UACNtC,KAAK,QACLuG,QAAQ,YACRyN,UAAWqE,GAAcrE,GACzB9N,QAASuW,IALX,SAQE,kBAAC,KAAD,CAAW9a,MAAO,CAAEgU,WAAY,MAGlC,oCACE,kBAACL,GAAA,EAAD,CAAQtV,KAAK,QAAQkG,QAASsgB,GAAYxS,SAAUA,IAApD,OAEE,kBAAC,KAAD,QAKRiT,WACiB,IAAfnB,GAA6B,SAAT3nB,QAAgCiB,IAAbgd,EACrC,kBAAC9G,GAAA,EAAD,CACE5T,UAAWH,EAAQga,aACnBvb,KAAK,QACLuG,QAAQ,YACRL,QAASqW,GACTvI,SAAUA,IAEV,kBAAC,KAAD,CAAYrS,MAAO,CAAE0b,YAAa,KACjCpB,GAGH,kBAAC3G,GAAA,EAAD,CAAQtV,KAAK,QAAQkG,QAAS0gB,GAAY5S,SAAyB,IAAf8R,GAAoB9R,IACtE,kBAAC,KAAD,MADF,a,8BCrTDkT,GAtBD,SAAC,GAAD,IAAG/N,EAAH,EAAGA,MAAH,IAAUtU,aAAV,MAAkB,GAAlB,EAAsB2F,EAAtB,EAAsBA,MAAOjE,EAA7B,EAA6BA,QAASwS,EAAtC,EAAsCA,MAAtC,IAA6CtS,cAA7C,MAAsD,QAAtD,EAA0Eb,EAA1E,EAA0EA,SAAUgU,EAApF,EAAoFA,iBAA+CvF,GAAnI,EAAsG2C,aAAtG,0HACZ,gBAACvR,GAAA,EAAD,CAAagH,UAAU,WAAWlG,QAASA,EAASwS,MAAOf,aAAQe,GAAQxD,WAAS,EAAC9O,OAAQA,GAC3F,gBAAC8a,GAAD,CAAa/W,MAAOA,GAClB,gBAAC2c,GAAA,EAAD,eAAYvhB,SAAUA,EAAUf,MAAOA,GAAWwP,GAC/C8E,EAAM3R,KAAI,SAAAmB,GAAC,OACV,gBAACye,GAAA,EAAD,CACEhnB,IAAKuI,EAAE9D,MACPA,MAAO8D,EAAE9D,MACTwiB,QAAS,gBAAC,KAAD,CAAUrnB,KAAK,UACxBwK,MACE,gBAAClE,GAAA,EAAD,CAAYhE,MAAM,gBAAgBiE,QAAQ,SACvCoC,EAAE6B,cAMXoP,GAAoBb,IAAU,gBAACmG,GAAA,EAAD,KAAiBnG,MCH1C7V,GAAQ,uBAON,SAASokB,GAAT,GAAoE,IAAD,IAAvCtoB,UAAuC,MAAlCkE,GAAkC,EAA3BkR,EAA2B,EAA3BA,QAA2B,EAC7CpC,GAAehT,GAD8B,mBAC/DsV,GAD+D,KACvEnW,KADuE,MAG1EopB,E5CoBCzpB,eAAkB,SAAC0pB,EAAMC,GAAP,OAAoB,OAAM,I4ClB7CC,EAAoB,SAACxU,EAAQyU,GACjCJ,EAAY,IACZxS,KAMIA,EAAcjX,IAAM8L,aAAY,WACpC0K,GAAe,SAAAwB,GAAI,sBAAUA,EAAV,CAAgBxX,MAAM,EAAOG,YAAY,EAAOF,OAAQ,QAC3E6V,GAAWA,MACV,CAACE,EAAgBF,IAEdyR,EAAQ,CACZ,CACErb,MAAO,6BACPiM,OAAQ,CACN,CACEzX,GAAI,YACJwL,MAAO,YACPkQ,MAAO4E,GACPnG,MAAO5H,GAAU/J,KAAI,SAAAgD,GAAK,MAAK,CAAE3F,MAAO2F,EAAOA,YAC/C+N,UAAU,EACVO,sBAAsB,GAExB,CACE9Z,GAAI,cACJwL,MAAO,yCACP+N,UAAU,EACVjC,OAAQ,SAAApD,GAAM,OAAImI,MAAMuM,QAAQ1U,EAAOpC,YAAcoC,EAAOpC,UAAU/C,SAAS,aAEjF,CACE/O,GAAI,UACJwL,MAAO,2CACP+N,UAAU,EACVjC,OAAQ,SAAApD,GAAM,OAAImI,MAAMuM,QAAQ1U,EAAOpC,YAAcoC,EAAOpC,UAAU/C,SAAS,SAEjF,CACE/O,GAAI,UACJwL,MAAO,wBACP+N,UAAU,EACVjC,OAAQ,SAAApD,GAAM,OAAImI,MAAMuM,QAAQ1U,EAAOpC,YAAcoC,EAAOpC,UAAU/C,SAAS,WAIrF,CACEvD,MAAO,0CACPiM,OAAQ,CACN,CACEzX,GAAI,QACJwL,MAAO,oCACPkQ,MAAO4E,GACPnG,MAAOgF,GAAM3W,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,MAC3CiU,sBAAsB,EACtBP,UAAU,GAEZ,CACEvZ,GAAI,gBACJwL,MAAO,iBACPkQ,MAAOwM,GACP/N,MAAOoF,GAAe/W,KAAI,SAAAqgB,GAAE,MAAK,CAAEhjB,MAAOgjB,EAAIrd,MAAOqd,SAI3D,CACErd,MAAO,4BACPiM,OAAQ,CACN,CACEzX,GAAI,WACJwL,MAAO,WACPkQ,MAAO4E,GACPnG,MAAO9H,GAAS7J,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,SAIpD,CACE2F,MAAO,wCACPiM,OAAQ,CACN,CACEzX,GAAI,qBACJwL,MAAO,sBACPkQ,MAAOyE,GACPhG,MAAOiF,GAAoB5W,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,MACzD0T,UAAU,EACVvB,aAAcoH,GAAoB,IAEpC,CACEpf,GAAI,aACJwL,MAAO,uBACPkQ,MAAO4E,GACPnG,MAAO7H,GAAW9J,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,SAItD,CACE2F,MAAO,2CACPiM,OAAQ,CACN,CACEzX,GAAI,kBACJwL,MAAO,gBACPkQ,MAAO4E,GACPnG,MAAOmF,GAAgB9W,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,OAEvD,CACE7F,GAAI,YACJwL,MAAO,kBACPkQ,MAAO4E,GACPnG,MAAOkF,GAAU7W,KAAI,SAAA3C,GAAK,MAAK,CAAEA,QAAO2F,MAAO3F,SAIrD,CACE2F,MAAO,0BACPiM,OAAQ,CACN,CAAEzX,GAAI,OAAQwL,MAAO,yBAA0BnC,GAAI,EAAG2O,aAAc,YAAauB,UAAU,GAC3F,CAAEvZ,GAAI,SAAUwL,MAAO,gBAAiBkQ,MAAOmH,GAAQxZ,GAAI,EAAGkQ,UAAU,GACxE,CACEvZ,GAAI,SACJwL,MAAO,eACPoO,WAAW,EACXpM,KAAM,GACNnE,GAAI,GACJkQ,UAAU,EACVC,WAAW,MAMnB,OAAO,kBAAC,GAAD,CAAsBxZ,GAAIA,EAAIkE,MAAOA,GAAOiZ,SA5H9B,SAAAjJ,GAAM,OAAIwU,KA4H4CtL,SA3HtD,SAAAlJ,GAAM,OAAIwU,KA2HoE7B,MAAOA,EAAOzR,QAASA,I,yBC5J/G0T,GAAqB,WAChC,IAAI/I,EAAMjhB,SAAa,MACfd,EAAW+qB,KAAiBhJ,GAA5B/hB,OACFgrB,E7C6CuB,WAC7B,IAAMrqB,EAAWC,cACjB,OAAOE,eAAkB,SAAAd,GAAM,OAAIW,EAASK,EAAeI,cAAcpB,MAAU,CAACW,I6C/C/DsqB,GAIrB,OAHAnqB,aAAgB,WACdkqB,EAAahrB,KACZ,CAACgrB,EAAchrB,IACX+hB,GCEHpe,GAAYC,aAAW,kBAAG6e,EAAH,EAAGA,YAAaxd,EAAhB,EAAgBA,QAAkB9E,GAAlC,EAAyB+qB,QAAzB,EAAkC/qB,QAAlC,OAC3B0D,YAAa,CACXsnB,OAAQ,CACN1lB,WAAYR,EAAQO,OAEtBggB,MAAI,GACFxlB,OAAQG,EAAOC,eADb,eAEDqiB,EAAYC,KAAK,MAAQ,CACxBte,QAAS,SAHT,wBAKM,WALN,GAOJgU,OAAQ,GACRkB,OAAQ,CACN1U,gBAAiBK,EAAQS,QAAQ8Y,MAEnCvQ,QAAQ,cACNxI,WAAYR,EAAQO,MACpBxF,OAAQG,EAAOC,eACdqiB,EAAYC,KAAK,MAAQ,CACxB1iB,OAAQ,UAMD,SAASorB,KACtB,IAAM7mB,EAAUZ,KACR0nB,EAAaC,cAAbD,SACFE,EAAUC,cAEVC,EAAc3qB,eAClB,SAAC4qB,GAAD,OAAmB,SAAA3jB,GACjBsjB,IAAaK,GAASH,GAAWA,EAAQnb,KAAKsb,MAEhD,CAACH,EAASF,IAT2B,EAYZrW,GAAeqQ,IAAjC/N,EAZ8B,oBAcjCqU,EAAgB7qB,eAAkB,WACtCwW,EAAe,CACbnW,KAAM,MACNG,MAAM,MAEP,CAACgW,IAEJ,OACE,gBAACsU,GAAA,EAAD,CAAQ7J,IAAK+I,KAAsB9mB,SAAS,QAAQsB,MAAM,UAAU0K,UAAW,EAAGtL,UAAWH,EAAQ4mB,QAClGjW,GAAmBmQ,GACpB,gBAACwG,GAAA,EAAD,CAASnnB,UAAWH,EAAQ0J,SAC1B,gBAACjD,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASjG,QAAS,GAC3C,gBAAC8F,GAAA,EAAD,CAAMI,MAAI,GACR,uBAAK1G,UAAWH,EAAQihB,KAAMD,IAAKC,KAAMC,IAAI,OAAOvc,QAASuiB,EAAYtD,aAAU,SAErF,gBAACnd,GAAA,EAAD,CAAMI,MAAI,EAACC,IAAE,GACX,gBAACygB,GAAA,EAAD,CACEviB,QAAQ,YACRvG,KAAK,QACLsC,MAAM,UACN4a,aAAW,iCACX3H,WAAW,EACX5T,MAAO,CAAEkB,aAAc,IAEvB,gBAACyS,GAAA,EAAD,CACE5T,UAAW2mB,IAAalD,aAAU,UAAYkD,IAAalD,aAAU,KAAO5jB,EAAQ+U,YAASlX,EAC7F8G,QAASuiB,EAAYtD,aAAU,WAE/B,gBAAC7e,GAAA,EAAD,CAAYC,QAAQ,SAASkC,QAAM,GAAnC,SAIF,gBAAC6M,GAAA,EAAD,CAAQ5T,UAAW2mB,IAAalD,aAAU,cAAgB5jB,EAAQ+U,YAASlX,EAAW8G,QAASuiB,EAAYtD,aAAU,gBACnH,gBAAC7e,GAAA,EAAD,CAAYC,QAAQ,SAASkC,QAAM,GAAnC,0BAEF,gBAAC6M,GAAA,EAAD,CAAQ5T,UAAW2mB,IAAalD,aAAU,WAAa5jB,EAAQ+U,YAASlX,EAAW8G,QAASuiB,EAAYtD,aAAU,aAChH,gBAAC7e,GAAA,EAAD,CAAYC,QAAQ,SAASkC,QAAM,GAAnC,mBAIF,gBAAC6M,GAAA,EAAD,CAAQ5T,UAAW2mB,IAAalD,aAAU,SAAW5jB,EAAQ+U,YAASlX,EAAW8G,QAASyiB,GACxF,gBAACriB,GAAA,EAAD,CAAYC,QAAQ,SAASkC,QAAM,GAAnC,sBC1FhB,IAAM9H,GAAYC,aAAW,gBAAGO,EAAH,EAAGA,OAAH,OAC3BN,YAAa,CACXkoB,aAAc,CACZvW,IAAK,OACLwW,OAAQ,EACR7nB,OAAQA,EAAO8nB,OAAS,GAE1BC,cAAe,CACblgB,UAAY9L,IAAcC,OAAO0P,mBAKxB,SAASsc,KACtB,IAAM5nB,EAAUZ,GAAU,IAE1B,OACE,gBAACioB,GAAA,EAAD,CAAQ5nB,SAAS,QAAQsB,MAAM,UAAUZ,UAAWH,EAAQwnB,cAC1D,gBAACF,GAAA,EAAD,CAASnnB,UAAWH,EAAQ2nB,eAC1B,gBAAClhB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,iBACtB,gBAACF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,gBAAC/B,GAAA,EAAD,CAAYmC,QAAM,EAAClC,QAAQ,SACzB,gBAACiP,GAAA,EAAD,CAAM4T,KAAK,gCAAgC7jB,OAAO,SAASgB,QAAQ,QAAQjE,MAAM,WAAjF,oCAKJ,gBAAC0F,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,gBAAC/B,GAAA,EAAD,CAAYmC,QAAM,EAAClC,QAAQ,QAAQmT,MAAM,SACvC,gBAAClE,GAAA,EAAD,CAAM4T,KAAK,yBAAyB7jB,OAAO,SAASgB,QAAQ,QAAQjE,MAAM,WAA1E,sDC5BP,I,oICSD+mB,GAAc,CAClBC,QAASC,KACTC,QAASC,KACT1Q,MAAO2Q,KACPC,KAAMC,MAGFjpB,GAAYC,aAAW,SAAA1D,GAAK,MAAK,CACrCosB,QAAS,CACP1nB,gBAAiBioB,KAAM,MAEzB9Q,MAAO,CACLnX,gBAAiB1E,EAAM+E,QAAQ8W,MAAMyC,MAEvCmO,KAAM,CACJ/nB,gBAAiB1E,EAAM+E,QAAQS,QAAQC,MAEzC6mB,QAAS,CACP5nB,gBAAiBkoB,KAAM,MAEzB9nB,KAAM,CACJqB,SAAU,IAEZ0mB,YAAa,CACXC,QAAS,GACT3M,YAAangB,EAAMgF,QAAQ,IAE7B+nB,QAAS,CACP7oB,QAAS,OACT+G,WAAY,cAID,SAAS+hB,GAAT,GAAwD,IAAD,IAAnCxoB,iBAAmC,WAAvBtC,EAAuB,EAATiV,EAAS,8BAC9D9S,EAAUZ,GAAU,IAD0C,EDzC3C,WACzB,IAAMhD,EAAWC,cAGjB,MAAO,CAFsBL,aAAY,SAACC,GAAD,OAAqBA,EAAMiC,WAAU0qB,KAC7DrsB,eAAkB,SAACiB,GAAD,OAA4BpB,EAJnC,SAACoB,GAAD,MAA6B,CAAEZ,KAAM,WAAYY,WAILqrB,CAAerrB,MAAW,CAACpB,KCwCrC0sB,GAFM,0BAE3D/rB,EAF2D,EAE3DA,KAAM2rB,EAFqD,EAErDA,QAFqD,IAE5C1jB,eAF4C,MAElC,UAFkC,EAErB+jB,EAFqB,KAG9DvV,EAAcjX,eAAkB,SAACiH,EAAOwlB,GAAR,MAA8B,cAAXA,GAA0BD,EAAY,CAAEhsB,MAAM,MAAU,CAACgsB,IAC5GxX,EAAOuW,GAAY9iB,GACzB,OACE,gBAACikB,GAAA,EAAD,CACEhX,aAAc,CACZE,SAAU,SACVD,WAAY,SAEdnV,KAAMA,EACNmsB,iBAAkB,IAClBrW,QAASW,GAET,gBAAC2V,GAAA,EAAD,eACEhpB,UAAWipB,mBAAKppB,EAAQgF,GAAU7E,GAClC+e,mBAAiB,kBACjBwJ,QACE,wBAAMjrB,GAAG,kBAAkB0C,UAAWH,EAAQ0oB,SAC5C,gBAACnX,EAAD,CAAMpR,UAAWipB,mBAAKppB,EAAQS,KAAMT,EAAQwoB,eAC3CE,GAGLprB,OAAQ,CACN,gBAACoH,GAAA,EAAD,CAAY7F,IAAI,QAAQ8c,aAAW,QAAQ5a,MAAM,UAAU4D,QAAS6O,GAClE,gBAAC,KAAD,CAAWrT,UAAWH,EAAQS,UAG9BqS,KCtEZ,IAAM1T,GAAYC,aAAW,gBAAG6e,EAAH,EAAGA,YAAaxd,EAAhB,EAAgBA,QAAiB9E,GAAjC,EAAyBytB,OAAzB,EAAiCztB,QAAjC,OAC3B0D,YAAa,CACXuB,KAAM,CACJhB,QAAS,UAEX6e,QAAQ,cACN/e,SAAU,EACVU,gBAAiBK,EAAQQ,WAAW2P,SACnCqN,EAAYC,KAAK,MAAQ,CACxB/J,WAAY,EACZkV,WAAY,IAGhBC,aAAc,CACZ1hB,QAASjM,EAAO2J,gBAElBmE,QAAQ,cACNxI,WAAYR,EAAQO,MACpBxF,OAAQG,EAAOC,eACdqiB,EAAYC,KAAK,MAAQ,CACxB1iB,OAAQ,UAMD,SAAS+tB,GAAT,GAA+B,IAAbzpB,EAAY,EAAZA,SACzBC,EAAUZ,GAAU,IAC1B,OACE,uBAAKqqB,cAAY,gBAAgBtpB,UAAWH,EAAQa,MAClD,wBAAMV,UAAWH,EAAQ0e,SACvB,gBAACmI,GAAD,MACA,uBAAK1mB,UAAWH,EAAQ0J,UACxB,uBAAKvJ,UAAWH,EAAQupB,cAAexpB,GACvC,gBAAC6nB,GAAD,MACA,gBAACe,GAAD,QCnBR,IAOexf,gBAPS,SAAClN,EAAiBmN,GACxC,IAAI4d,EAAU5d,EAAQ4d,QAChB0C,EAAWztB,GAASA,EAAM0tB,QAAU1tB,EAAM0tB,OAAOD,SAEvD,OADA1C,EAAQ0C,SAAWA,GAAsB1C,EAAQ0C,SAC1C,CAAE1C,aAGI7d,EAlBf,SAAmBnK,GAAwB,IACjCgoB,EAAYhoB,EAAZgoB,QACR,OACE,gBAAC,IAAD,CAAiBA,QAASA,GACxB,gBAACwC,GAAD,KACE,gBAAC,GAAD,W,+BCVFI,GAAY,SAAZA,IAAY,IAACtc,EAAD,uDAAS,GAAI6O,EAAb,wDAA+BhF,EAA/B,uDAAqC,EAArC,OACfgF,EAAmDrC,MAAMC,KAAK,CAAElU,OAAQgkB,aAAU1S,EAAK7J,EAAMzH,UAAW,kBAAM+jB,EAAUtc,MAA7GA,EAAMuc,aAAU,EAAGvc,EAAMzH,OAAS,K,gDAEzC,yDAAAQ,EAAA,yDAAyByjB,EAAzB,+BAAiC,MAAjC,kDAEHnH,QAAQC,IAAR,gCAAqCkH,EAArC,gBACI/B,EAAU,EACVgC,EAAS,EACTC,EAAY,EACZC,EAAW,EACN7iB,EAAI,EAPV,YAOaA,EAAI0iB,GAPjB,kCAQsB5b,GAAGC,aAAa+b,OAAO,CAC5C5rB,KAAK,oBAAD,OAAsB8I,EAAI,GAC9BgI,QAASwa,GAAUO,IACnB5a,UAAWqa,GAAU5Z,IAAW,GAChCX,MAAOua,GAAUhN,IAAO,GACxBlN,WAAYka,GAAU7Z,IAAY,GAClCJ,UAAWia,GAAU9M,IAAW,EAAM,GACtCjN,mBAAoB+Z,GAAU/M,IAC9BrN,SAAUoa,GAAU9Z,IAAU,EAAM,GACpCL,gBAAiBma,GAAU7M,IAAiB,EAAM,KAjBnD,aAQKqN,EARL,UAmB+B,IAAhBA,EAASC,GAnBxB,iBAoBCtC,IACSuC,EAAI,EArBd,aAqBiBA,EAAIT,aAAU,EAAG,IArBlC,kCAsB4B3b,GAAGK,QAAQ2b,OAAO,CACzChI,MAAOkI,EAAS3sB,GAChBa,KAAM,YACNisB,OAAQ,yBACRxb,OAAQ8a,aAAU,EAAG,KA1B1B,SAsBSW,EAtBT,UA4BuC,IAAlBA,EAAWH,GAC3BL,IAEAC,IA/BL,QAqBsCK,IArBtC,gDAmCCP,IAnCD,QAOwB3iB,IAPxB,uBAsCHub,QAAQC,IAAR,8BAAmCmF,EAAnC,iCAAmEgC,EAAnE,aACApH,QAAQC,IAAR,8BAAmCoH,EAAnC,4BAAgEC,EAAhE,aAvCG,6C,sBA2CP,IAAME,GAAY,CAChB,mBACA,mBACA,qBACA,iBACA,UACA,YACA,2BACA,4BACA,0BACA,cACA,kCACA,4BACA,aACA,kBACA,iCACA,mBACA,wBACA,yBACA,wCACA,gCACA,mBACA,UACA,6BACA,gCACA,8BACA,eACA,8BACA,YACA,mCACA,iDACA,0CACA,gBACA,cACA,cACA,cACA,4BACA,0BACA,mCACA,0BACA,qBACA,qBACA,wBACA,wBACA,6BACA,aACA,4CACA,YACA,+BACA,sDACA,eACA,qBACA,wBACA,0BACA,kBACA,wBACA,eACA,sBACA,iBACA,uBACA,iCACA,0BACA,gBACA,oBACA,mCACA,mBACA,qCACA,8BACA,oBACA,iBACA,oBACA,8CACA,oCACA,8BACA,kBACA,aACA,WACA,gCACA,0BACA,sBACA,qBACA,+BACA,gBACA,eACA,gBACA,uBACA,kBACA,4CACA,8BACA,qCACA,iCACA,yBACA,wBACA,uBACA,2BACA,2BACA,oBACA,oCACA,8BACA,+BACA,4BACA,qBACA,4BACA,sCACA,eACA,4BACA,wBACA,0BACA,8BACA,2BACA,6BACA,cACA,WACA,0BCxJWnD,GAAUyD,cACVrtB,GAAgBstB,OAAeC,kBAC/BC,G/CWE,SAAwB5D,EAAkB5pB,EAAyBytB,GAEhF,IAAMC,EAAoC,qBAAXJ,OAAyB,KAAQA,OAE1DK,EAAoBD,GAAoBA,EAAgBE,6BAExDC,EAsBR,SAA0BA,EAAkBjE,GAC1C,OAAOkE,YAA0BnlB,OAAOolB,OAAO,GAAIF,EAAa,CAAEtB,OAAQyB,YAAcpE,MAvBpEqE,CAAiBvtB,EAAUkpB,GACzCsE,EAAmBC,YAAe3sB,EAAeqsB,GAkBvD,OAhBkCO,YAChCC,YAAgBC,IAAOC,YAAiB3E,IACxC+D,EAAoBA,IAAsB,SAACrW,GAAD,OAAYA,GAFtB8W,CAGhCI,IAGYC,CAA0BP,EAAkBluB,G+C1BvC0uB,CAAe9E,GAAS5pB,IAEhC2uB,IADWnB,GAAMoB,SACLC,YAAarB,KAGtC,SAASsB,GAAWltB,GAAa,IACvBe,EAAaf,EAAbe,SACR,OACE,kBAAC,IAAD,CAAU6qB,MAAOA,IACf,kBAAC,IAAD,CAAa7gB,QAAS,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","file":"static/js/main.1f7d23d9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.4ed3692f.png\";","import * as React from 'react';\r\nimport { Reducer } from 'redux';\r\nimport { AppThunkAction, AppState } from '../../store';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { theme } from '../../constants';\r\n\r\nexport type ViewMode = 'table' | 'list';\r\n\r\nexport interface ClientAppState {\r\n  height?: number;\r\n  width?: number;\r\n  appBarHeight?: number;\r\n  viewMode?: ViewMode;\r\n}\r\n\r\nconst defaultState = {\r\n  width: 0,\r\n  height: 0,\r\n  appBarHeight: (theme as any).layout.toolbarheight,\r\n  viewMode: 'table'\r\n};\r\n\r\nexport type State = ClientAppState;\r\n\r\ninterface IResizeViewPort {\r\n  type: 'RESIZE_VIEWPORT';\r\n  height: number;\r\n  width: number;\r\n}\r\n\r\ninterface IResizeAppBar {\r\n  type: 'RESIZE_APPBAR';\r\n  height: number;\r\n}\r\n\r\ninterface IViewMode {\r\n  type: 'VIEW_MODE';\r\n  mode: ViewMode;\r\n}\r\n\r\ntype KnownAction = IResizeViewPort | IResizeAppBar | IViewMode;\r\n\r\n// TODO\r\nexport const useProcessDataHandle = () => {\r\n  return React.useCallback((pdis, address?) => () => null, []); // Placeholder for client->server data processing\r\n};\r\n\r\n// TODO\r\nexport const useProcessData = () => {\r\n  return React.useCallback((pdis, address?) => null, []); // Placeholder for client->server data processing\r\n};\r\n\r\nexport const useResizeAppBar = () => {\r\n  const dispatch = useDispatch();\r\n  return React.useCallback(height => dispatch(actionCreators.AResizeAppBar(height)), [dispatch]);\r\n};\r\n\r\nexport const useAppBarHeight = (): number => {\r\n  return useSelector((state: AppState) => state.layout.appBarHeight);\r\n};\r\n\r\nexport const useResizeViewPort = () => {\r\n  const dispatch = useDispatch();\r\n  return React.useCallback((height, width) => dispatch(actionCreators.AResizeViewPort(height, width)), [dispatch]);\r\n};\r\n\r\nexport const useHeight = (): number => {\r\n  return useSelector((state: AppState) => state.layout.height);\r\n};\r\n\r\nexport const useWidth = (): number => {\r\n  return useSelector((state: AppState) => state.layout.width);\r\n};\r\n\r\nexport const useDimensions = () => {\r\n  return [useHeight(), useWidth()];\r\n};\r\n\r\nexport const useViewMode = () => {\r\n  const dispatch = useDispatch();\r\n  const setViewMode = React.useCallback(mode => dispatch(actionCreators.AViewMode(mode)), [dispatch]);\r\n  const viewMode = useSelector((state: AppState) => state.layout.viewMode);\r\n  return [viewMode, setViewMode];\r\n};\r\n\r\nexport const actionCreators = {\r\n  AResizeViewPort: (height: number | undefined, width: number | undefined): AppThunkAction<KnownAction> => dispatch => {\r\n    dispatch({ type: 'RESIZE_VIEWPORT', height: height, width: width });\r\n  },\r\n  AResizeAppBar: (height: number | undefined): AppThunkAction<KnownAction> => dispatch => {\r\n    dispatch({ type: 'RESIZE_APPBAR', height });\r\n  },\r\n  AViewMode: (mode: ViewMode): AppThunkAction<KnownAction> => dispatch => {\r\n    dispatch({ type: 'VIEW_MODE', mode });\r\n  }\r\n};\r\n\r\nexport const reducer: Reducer<State> = (state: State | any, action: KnownAction | any): any => {\r\n  switch (action.type) {\r\n    case 'RESIZE_APPBAR':\r\n      return {\r\n        ...state,\r\n        appBarHeight: action.height\r\n      };\r\n    case 'RESIZE_VIEWPORT':\r\n      return {\r\n        ...state,\r\n        height: action.height,\r\n        width: action.width\r\n      };\r\n    case 'VIEW_MODE':\r\n      return {\r\n        ...state,\r\n        viewMode: action.mode\r\n      };\r\n    default:\r\n  }\r\n  return state || { ...defaultState };\r\n};\r\n","export const defaultDialogState = {\r\n  open: false,\r\n  type: 'add',\r\n  errors: {},\r\n  showErrors: false,\r\n  submitting: false,\r\n  initialValues: {}\r\n};\r\n\r\nconst initialState = {\r\n  'Getting Started': { open: true }\r\n};\r\n\r\n// Sets the state based on action.id.  If action.payload is a function, then it is called with the previous props as a parameter\r\nfunction updateState(state, action) {\r\n  const data = typeof action.payload === 'function' ? action.payload(state[action.id]) : action.payload;\r\n  var newState = { ...state };\r\n  newState[action.id] = data;\r\n  if (state && state[action.id]) {\r\n    newState[action.id] = data;\r\n  }\r\n  return newState;\r\n}\r\n\r\nexport default function dialogReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'UPDATE_DIALOG':\r\n      return updateState(state, action);\r\n    case 'LOGOUT':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppState } from '../../../store';\r\n\r\nconst initialState = {};\r\nconst defaultState = {};\r\n\r\nconst updateSelector = (id, payload) => ({ type: 'UPDATE_SELECTOR', id, payload });\r\n\r\nexport const useTabSelector = id => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: AppState) => state.selector[id] || defaultState);\r\n  const setState = React.useCallback(payload => dispatch(updateSelector(id, payload)), [id, dispatch]);\r\n  return [state, setState];\r\n};\r\n\r\n// Sets the state based on action.id.  If action.payload is a function, then it is called with the previous props as a parameter\r\nfunction updateState(state, action) {\r\n  const data = typeof action.payload === 'function' ? action.payload(state[action.id]) : action.payload;\r\n  var newState = { ...state };\r\n  newState[action.id] = data;\r\n  if (state && state[action.id]) {\r\n    newState[action.id] = data;\r\n  }\r\n  return newState;\r\n}\r\n\r\nexport function reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'UPDATE_SELECTOR':\r\n      return updateState(state, action);\r\n    case 'LOGOUT':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export interface SnackBarState {\r\n  open?: boolean;\r\n  variant?: 'success' | 'error' | 'warning' | 'info';\r\n  message?: string;\r\n}\r\nconst initialState = {};\r\n\r\nconst snackBarReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SNACKBAR':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default snackBarReducer;\r\n","const initialState = {};\r\n\r\n// Sets the state based on action.id.  If action.payload is a function, then it is called with the previous props as a parameter\r\nfunction updateState(state, action) {\r\n  const { table, id, payload } = action;\r\n  const data = typeof payload === 'function' ? payload(state[table] ? state[table][id] : undefined) : action.payload;\r\n  var newState = { ...state };\r\n  if (!newState[table]) {\r\n    newState[table] = { id: data };\r\n  } else {\r\n    newState[table][id] = data;\r\n  }\r\n  if (state && state[table] && state[table][id]) {\r\n    newState[table][id] = data;\r\n  }\r\n  return newState;\r\n}\r\n\r\nexport default function dialogReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'SET_DATABASE_TABLE':\r\n      var newState = { ...state };\r\n      newState[action.table] = action.payload;\r\n      return newState;\r\n    case 'UPDATE_DATABASE':\r\n      return updateState(state, action);\r\n    case 'LOGOUT':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import * as Layout from './components/layout/LayoutStore';\r\nimport * as Table from './components/application/GenericTable/TableStore';\r\nimport dialogReducer from './components/application/GenericDialog/reducers';\r\nimport * as Selector from './components/application/Selector/SelectorStore';\r\nimport snackBarReducer from './components/application/SnackBar/reducers';\r\nimport databaseReducer from './database/reducers';\r\n\r\n// The top-level state object\r\nexport interface AppState {\r\n  router: any;\r\n  layout: Layout.State;\r\n  dialog: any;\r\n  table: Table.State;\r\n  selector: any;\r\n  snackBar: any;\r\n  database: any;\r\n}\r\n\r\n// Whenever an action is dispatched, Redux will update each top-level application state property using\r\n// the reducer with the matching name. It's important that the names match exactly, and that the reducer\r\n// acts on the corresponding AppState property type.\r\nexport const reducers = {\r\n  layout: Layout.reducer,\r\n  dialog: dialogReducer,\r\n  table: Table.reducer,\r\n  selector: Selector.reducer,\r\n  snackBar: snackBarReducer,\r\n  database: databaseReducer\r\n};\r\n\r\n// This type can be used as a hint on action creators so that its 'dispatch' and 'getState' params are\r\n// correctly typed to match your store.\r\nexport interface AppThunkAction<TAction> {\r\n  (dispatch: (action: TAction) => void, getState: () => AppState): void;\r\n}\r\n","import thunk from 'redux-thunk';\r\nimport { History } from 'history';\r\nimport * as StoreModule from './store';\r\nimport { AppState, reducers } from './store';\r\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\r\nimport { createStore, applyMiddleware, compose, combineReducers, StoreEnhancer, Store } from 'redux';\r\nimport { persistReducer } from 'redux-persist';\r\nimport * as localforage from 'localforage';\r\nimport packageJson from '../package.json';\r\n\r\nlocalforage &&\r\n  localforage.config &&\r\n  localforage.config({\r\n    driver: localforage.INDEXEDDB, // Force WebSQL; same as using setDriver()\r\n    name: `${packageJson.name}-local-storage`,\r\n    version: 1.0,\r\n    size: 4980736, // Size of database, in bytes. WebSQL-only for now.\r\n    storeName: 'keyvaluepairs', // Should be alphanumeric, with underscores.\r\n    description: `${packageJson.name} application database`\r\n  });\r\n\r\nexport const persistConfig = {\r\n  key: 'app',\r\n  storage: localforage\r\n};\r\n\r\nexport default function configureStore(history: History, initialState?: AppState, appConfig?: any) {\r\n  // Build middleware. These are functions that can process the actions before they reach the store.\r\n  const windowIfDefined = typeof window === 'undefined' ? null : (window as any);\r\n  // If devTools is installed, connect to it\r\n  const devToolsExtension = windowIfDefined && (windowIfDefined.__REDUX_DEVTOOLS_EXTENSION__ as () => StoreEnhancer);\r\n\r\n  const allReducers = buildRootReducer(reducers, history);\r\n  const persistedReducer = persistReducer(persistConfig, allReducers as any);\r\n\r\n  const createStoreWithMiddleware = compose(\r\n    applyMiddleware(thunk, routerMiddleware(history)),\r\n    devToolsExtension ? devToolsExtension() : (f: any) => f\r\n  )(createStore) as any;\r\n\r\n  // Combine all reducers and instantiate the app-wide store instance\r\n  const store = createStoreWithMiddleware(persistedReducer, initialState) as Store<AppState>;\r\n\r\n  // Enable Webpack hot module replacement for reducers\r\n  if (module.hot) {\r\n    module.hot.accept('./store', () => {\r\n      const nextRootReducer = require<typeof StoreModule>('./store');\r\n      store.replaceReducer(buildRootReducer(nextRootReducer.reducers, history));\r\n    });\r\n  }\r\n\r\n  return store;\r\n}\r\n\r\nfunction buildRootReducer(allReducers: any, history: any) {\r\n  return combineReducers<AppState>(Object.assign({}, allReducers, { router: connectRouter(history) }));\r\n}\r\n","import * as React from 'react';\r\nimport * as LayoutStore from './LayoutStore';\r\nimport ContainerDimensions from 'react-container-dimensions';\r\nimport { makeStyles, createStyles, useTheme } from '@material-ui/core';\r\n\r\ninterface ViewPortDimensionsProps {\r\n  containerHeight?: number | undefined;\r\n  containerWidth?: number | undefined;\r\n  resizeViewPort?: (height: number | undefined, width: number | undefined) => void;\r\n}\r\n\r\nconst ViewPortDimensions = (props: ViewPortDimensionsProps) => {\r\n  const { containerHeight, containerWidth, resizeViewPort } = props;\r\n  React.useEffect(() => {\r\n    resizeViewPort(containerHeight, containerWidth);\r\n  }, [containerHeight, containerWidth, resizeViewPort]);\r\n\r\n  return <></>;\r\n};\r\n\r\nconst useStyles = makeStyles(() =>\r\n  createStyles({\r\n    dimensions: {\r\n      overflow: 'hidden' as 'hidden',\r\n      position: 'fixed' as 'fixed',\r\n      width: 'calc(100vw)',\r\n      height: 'calc(100vh)',\r\n    },\r\n    static: {\r\n      flexGrow: 1,\r\n      zIndex: 1,\r\n      overflow: 'hidden' as 'hidden',\r\n      position: 'fixed' as 'fixed',\r\n      display: 'static' as 'static',\r\n      width: '100%',\r\n    },\r\n  })\r\n);\r\n\r\nconst ViewPort = ({ children }) => {\r\n  const classes = useStyles({});\r\n  const [height, width] = LayoutStore.useDimensions();\r\n  const resizeViewPort = LayoutStore.useResizeViewPort();\r\n  const { layout } = useTheme();\r\n  return (\r\n    <>\r\n      <div className={classes.dimensions}>\r\n        <ContainerDimensions>\r\n          {({ height, width }: any) => (\r\n            <ViewPortDimensions containerHeight={height} containerWidth={width} resizeViewPort={resizeViewPort} />\r\n          )}\r\n        </ContainerDimensions>\r\n      </div>\r\n\r\n      <div id='viewport' className={classes.static} style={{ height, width, backgroundColor: layout.backgroundColor }}>\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ViewPort;\r\n","import * as React from 'react';\r\n\r\nexport default function RatingProcess() {\r\n  return <>Rating Process Placeholder</>;\r\n}\r\n","import * as React from 'react';\r\n\r\nexport default function Framework() {\r\n  return <>Framework Placeholder</>;\r\n}\r\n","import * as React from 'react';\r\nimport * as Icons from '@material-ui/icons';\r\n\r\nexport const icons = [\r\n  {\r\n    name: 'Devices',\r\n    icon: className => {\r\n      return <Icons.ImportantDevices className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Customers',\r\n    icon: className => {\r\n      return <Icons.TransferWithinAStation className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Inventory',\r\n    icon: className => {\r\n      return <Icons.PlaylistAddCheck className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Discounts',\r\n    icon: className => {\r\n      return <Icons.LocalOffer className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Users',\r\n    icon: className => {\r\n      return <Icons.People className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Account Settings',\r\n    icon: className => {\r\n      return <Icons.SettingsRounded className={className} />;\r\n    },\r\n  },\r\n  {\r\n    name: 'Suppliers',\r\n    icon: className => <Icons.AssignmentInd className={className} />,\r\n  },\r\n  { name: 'Locations', icon: className => <Icons.Home className={className} /> },\r\n  {\r\n    name: 'Products',\r\n    icon: className => <Icons.ShoppingBasket className={className} />,\r\n  },\r\n  {\r\n    name: 'Documents',\r\n    icon: className => <Icons.FolderOpen className={className} />,\r\n  },\r\n  {\r\n    name: 'Customer Checkin',\r\n    icon: className => <Icons.PersonAdd className={className} />,\r\n  },\r\n  {\r\n    name: 'Customer Queue',\r\n    icon: className => <Icons.PersonAdd className={className} />,\r\n  },\r\n];\r\n","import * as React from 'react';\r\nimport { Grid, Paper, Input, Tooltip } from '@material-ui/core';\r\nimport { FormControl, InputAdornment, IconButton, Typography } from '@material-ui/core';\r\nimport { useTable, useTableUpdate } from './TableStore';\r\nimport { useWidth } from '../../layout/LayoutStore';\r\nimport { icons } from './constants';\r\nimport { Fab, makeStyles, createStyles, useTheme } from '@material-ui/core';\r\nimport * as Icons from '@material-ui/icons';\r\nimport { evalFunc } from '../../../helpers';\r\nimport { GenericTableContainerProps } from './GenericTableContainer';\r\n\r\nexport interface TableToolbarProps {\r\n  name?: string;\r\n  buttons?: any[] | ((props?: GenericTableContainerProps & any) => any[]);\r\n  square?: boolean;\r\n  title?: string;\r\n  icon?: any;\r\n  showicon?: boolean;\r\n  viewportwidth?: any;\r\n  inputplaceholder?: string;\r\n  width?: number;\r\n  search?: boolean;\r\n  renderIcon?: (props: TableToolbarProps) => React.ReactNode;\r\n  classes?: any;\r\n}\r\n\r\nconst useStyles = makeStyles(({ palette, spacing, typography, layout }: any) =>\r\n  createStyles({\r\n    root: {},\r\n    paper: {\r\n      color: palette.common.white,\r\n      background: palette.primary.main\r\n    },\r\n    formControl: {\r\n      marginBottom: 4,\r\n      paddingRight: spacing(1),\r\n      width: 208\r\n    },\r\n    searchIcon: {\r\n      color: palette.common.white\r\n    },\r\n    underline: {\r\n      color: palette.common.white,\r\n      borderBottom: `2px solid ${palette.common.white}`\r\n    },\r\n    title: {\r\n      ...typography.h4,\r\n      paddingLeft: spacing(0.5),\r\n      color: palette.common.white,\r\n      fontSize: typography.pxToRem(19),\r\n      fontWeight: '300'\r\n    },\r\n    titleicon: {\r\n      height: 32,\r\n      width: 32,\r\n      color: palette.common.white,\r\n      marginTop: 3\r\n    },\r\n    grid: {\r\n      overflow: 'hidden',\r\n      paddingRight: spacing(1),\r\n      paddingLeft: spacing(1),\r\n      height: layout.tabletoolbarheight\r\n    },\r\n    hidden: {\r\n      display: 'none' as 'none'\r\n    }\r\n  })\r\n);\r\n\r\nfunction TableToolbar(props: TableToolbarProps) {\r\n  const classes = useStyles({});\r\n  const [searchOpen, setSearchOpen] = React.useState(false);\r\n  const { layout } = useTheme();\r\n  const { name, buttons = [], square, title, inputplaceholder, icon, renderIcon, search, showicon = true } = props;\r\n\r\n  const { searchtext = '' } = useTable(name);\r\n\r\n  React.useEffect(() => {\r\n    if (searchtext !== null && searchtext !== undefined && searchtext !== '') {\r\n      handleOpenSearch();\r\n    }\r\n  }); // No dependencies on purpose\r\n\r\n  const width = useWidth();\r\n\r\n  const handleOpenSearch = React.useCallback(() => setSearchOpen(true), [setSearchOpen]);\r\n\r\n  const inputRef = React.useRef(null);\r\n\r\n  const tableUpdate = useTableUpdate();\r\n\r\n  const updateTable = React.useCallback(\r\n    value =>\r\n      tableUpdate({\r\n        id: name,\r\n        searchtext: value\r\n      }),\r\n    [name, tableUpdate]\r\n  );\r\n\r\n  const handleClear = React.useCallback(\r\n    event => {\r\n      updateTable('');\r\n      setSearchOpen(false);\r\n    },\r\n    [updateTable, setSearchOpen]\r\n  );\r\n\r\n  const handleKeyDown = React.useCallback(\r\n    event => {\r\n      if (event.key === 'Escape') {\r\n        event.preventDefault();\r\n        handleClear(event);\r\n      }\r\n    },\r\n    [handleClear]\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    const current = inputRef && inputRef.current;\r\n    if (searchOpen) {\r\n      if (current) {\r\n        current.focus();\r\n        current.addEventListener('keydown', handleKeyDown);\r\n      }\r\n    } else {\r\n      current.removeEventListener('keydown', handleKeyDown);\r\n    }\r\n    return () => {\r\n      if (current && searchOpen) {\r\n        current.removeEventListener('keydown', handleKeyDown);\r\n      }\r\n    };\r\n  }, [inputRef, searchOpen, handleKeyDown]);\r\n\r\n  const handleChange = React.useCallback(\r\n    event => {\r\n      updateTable(event.target.value);\r\n    },\r\n    [updateTable]\r\n  );\r\n\r\n  const Search = (\r\n    <FormControl className={classes.formControl}>\r\n      <Input\r\n        disableUnderline={false}\r\n        classes={{ underline: classes.underline }}\r\n        value={searchtext ? searchtext : ''}\r\n        onChange={handleChange}\r\n        placeholder={inputplaceholder}\r\n        startAdornment={\r\n          <InputAdornment position='start'>\r\n            <Icons.Search className={classes.searchIcon} />\r\n          </InputAdornment>\r\n        }\r\n        endAdornment={\r\n          <InputAdornment position='end'>\r\n            <IconButton className={classes.searchIcon} onClick={handleClear}>\r\n              <Icons.Close />{' '}\r\n            </IconButton>{' '}\r\n          </InputAdornment>\r\n        }\r\n        inputRef={inputRef}\r\n      />\r\n    </FormControl>\r\n  );\r\n\r\n  const searchbutton =\r\n    search !== false && search ? (\r\n      <>\r\n        <Tooltip\r\n          placement='bottom'\r\n          title={\r\n            <Typography variant='h6' color='inherit'>\r\n              Search\r\n            </Typography>\r\n          }\r\n        >\r\n          <Fab variant='extended' size='small' color='primary' onClick={handleOpenSearch}>\r\n            <Icons.Search style={{ margin: -4 }} />\r\n          </Fab>\r\n        </Tooltip>\r\n      </>\r\n    ) : null;\r\n\r\n  var Buttons = [searchbutton, ...evalFunc(buttons, props)].filter(b => b);\r\n\r\n  const buttonspacing = 0; //Grid spacing of each button\r\n  const buttonwidth = 42; //Width of each button\r\n  const widths = {\r\n    contentpadding: layout.contentpadding * 2, //Exterior padding\r\n    headerpadding: 16, //Padding within the header\r\n    iconwidth: 32, //Width of the title icon\r\n    titlepadding: 8, //Padding between the icon and the title\r\n    titleminwidth: 64, //Minimum width of the typography title - Don't display the title unless you can see more than 64 pixels\r\n    calculatedbuttonswidth: Buttons.length * buttonwidth + buttonspacing * (Buttons.length > 0 ? Buttons.length - 1 : 0)\r\n  };\r\n\r\n  const calculatedfullwidth = Object.keys(widths)\r\n    .map(k => widths[k])\r\n    .reduce((t, a) => t + a, 0);\r\n  const calculatedpartialwidth = calculatedfullwidth - widths.titlepadding - widths.titleminwidth;\r\n\r\n  const tabletitlevisible = width >= calculatedfullwidth;\r\n  const tableiconvisible = width >= calculatedpartialwidth;\r\n\r\n  return (\r\n    <Paper className={classes.paper} square={square}>\r\n      <Grid container spacing={0} justify='space-between' alignItems='center' className={classes.grid}>\r\n        <Grid item xs zeroMinWidth>\r\n          <Grid container justify='flex-start' alignItems='center'>\r\n            {tableiconvisible && showicon === true && (\r\n              <Grid item>\r\n                {renderIcon ? (\r\n                  renderIcon(props)\r\n                ) : (\r\n                  <Tooltip title={title}>\r\n                    <div>\r\n                      {icon ? (\r\n                        icon\r\n                      ) : icons.find(x => x.name === name) ? (\r\n                        icons.find(x => x.name === name).icon(classes.titleicon)\r\n                      ) : icons.find(x => x.name === title) ? (\r\n                        icons.find(x => x.name === title).icon(classes.titleicon)\r\n                      ) : (\r\n                        <Icons.List className={classes.titleicon} />\r\n                      )}\r\n                    </div>\r\n                  </Tooltip>\r\n                )}\r\n              </Grid>\r\n            )}\r\n            {tabletitlevisible && (\r\n              <Grid item xs zeroMinWidth>\r\n                {title && (\r\n                  <Typography variant='body2' noWrap className={classes.title}>\r\n                    {title}\r\n                  </Typography>\r\n                )}\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item>\r\n          <Grid container direction='row' justify='flex-end' alignItems='center' spacing={buttonspacing}>\r\n            <Grid item>\r\n              <div style={{ display: searchOpen ? '' : 'none' }}>{Search}</div>\r\n              {!searchOpen && (\r\n                <Grid container spacing={1}>\r\n                  {Buttons.map((b, i) => (\r\n                    <Grid key={i} item>\r\n                      {evalFunc(b)}\r\n                    </Grid>\r\n                  ))}\r\n                </Grid>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default TableToolbar;\r\n","import * as React from 'react';\r\nimport { triggerResize, isEmpty } from '../../../helpers';\r\nimport { Tabs, Tab, Paper, Typography, createStyles, makeStyles } from '@material-ui/core';\r\nimport { useTabSelector } from '../../application/Selector/SelectorStore';\r\n\r\nexport interface ComponentProps {\r\n  id?: string;\r\n  tab?: string;\r\n  tabs?: TabSelectorItem[];\r\n  orientation?: string;\r\n  rounded?: boolean;\r\n  wrapped?: boolean;\r\n  minHeight?: number;\r\n  classes?: any;\r\n}\r\n\r\nconst useStyles = makeStyles(({ palette }: any) =>\r\n  createStyles({\r\n    root: ({ rounded }) => ({\r\n      background: palette.grey[600],\r\n      borderRadius: rounded ? undefined : 0,\r\n    }),\r\n    tabs: ({ minHeight }: any) => ({\r\n      minHeight,\r\n      borderRadius: 'inherit',\r\n    }),\r\n    indicator: {\r\n      background: palette.primary.main,\r\n      height: '100%',\r\n      zIndex: 0,\r\n      borderRadius: 'inherit',\r\n    },\r\n    labelIcon: ({ minHeight }: any) => ({\r\n      color: palette.common.white,\r\n      zIndex: 1,\r\n      minHeight,\r\n    }),\r\n    tabroot: ({ minHeight }: any) => ({\r\n      padding: 0,\r\n      color: palette.common.white,\r\n      zIndex: 1,\r\n      minWidth: 24,\r\n      minHeight,\r\n    }),\r\n    wrapper: {\r\n      display: 'inline-flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      width: '100%',\r\n      flexDirection: 'column',\r\n      borderRadius: 'inherit',\r\n    },\r\n  })\r\n);\r\n\r\nexport interface TabSelectorItem {\r\n  id: string;\r\n  label?: string;\r\n  icon?: any;\r\n  Component?: any;\r\n}\r\n\r\nconst TabSelector = ({ id, tabs = [], orientation, wrapped, minHeight = 52, rounded = true }: ComponentProps) => {\r\n  const classes = useStyles({ minHeight, rounded });\r\n\r\n  const [tabSelector, setTabSelector] = useTabSelector(id);\r\n  const selected = tabSelector.value;\r\n\r\n  const tabId = tabs[0] && tabs[0].id;\r\n  React.useEffect(() => {\r\n    isEmpty(selected) && setTabSelector({ value: tabId }); // Select the first tab by default when empty\r\n    triggerResize();\r\n  }, [setTabSelector, selected, tabId]);\r\n\r\n  React.useEffect(() => {\r\n    triggerResize(); //User has roated the device, so trigger a resize so the indicator updates correctly\r\n  }, [orientation]);\r\n\r\n  const handleChange = React.useCallback(\r\n    (event, value) => {\r\n      setTabSelector({ value });\r\n    },\r\n    [setTabSelector]\r\n  );\r\n\r\n  const { value = tabs[0].id } = tabSelector;\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <Tabs\r\n        variant='fullWidth'\r\n        className={classes.tabs}\r\n        scrollButtons='off'\r\n        value={value}\r\n        onChange={handleChange}\r\n        classes={{ indicator: classes.indicator }}\r\n      >\r\n        {!tabs ? (\r\n          <></>\r\n        ) : (\r\n          tabs.map(t => (\r\n            <Tab\r\n              key={t.id}\r\n              classes={{\r\n                root: classes.tabroot,\r\n                labelIcon: classes.labelIcon,\r\n                wrapper: classes.wrapper,\r\n                wrapped: classes.labelIcon,\r\n              }}\r\n              icon={t.icon && <t.icon style={{ marginBottom: 0 }} />}\r\n              value={t.id}\r\n              wrapped={wrapped}\r\n              label={\r\n                <Typography variant='caption' style={{ maxWidth: `calc(100% - ${2}px)` }} noWrap={!wrapped}>\r\n                  {t.label ? t.label : t.id}\r\n                </Typography>\r\n              }\r\n            />\r\n          ))\r\n        )}\r\n      </Tabs>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TabSelector;\r\n","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../../store';\r\nimport TabSelector, { TabSelectorItem } from '../../general/TabSelector/TabSelector';\r\n\r\nexport interface ComponentProps {\r\n  name?: string; //Unique name\r\n  tab?: string; //Selected tab\r\n  tabs?: TabSelectorItem[];\r\n  orientation?: string;\r\n  onChange?: (tab: string) => void;\r\n  classes?: any;\r\n}\r\n\r\nconst TableTabSelector = ({ tabs, tab, orientation }: ComponentProps) => (\r\n  <TabSelector tab={tab} tabs={tabs} orientation={orientation} />\r\n);\r\n\r\nconst mapStateToProps = (state: AppState, ownProp: ComponentProps): ComponentProps => {\r\n  const storeTable = state.table[ownProp.name];\r\n  return {\r\n    ...ownProp,\r\n    name: ownProp.name,\r\n    tab: ownProp.tab || (storeTable && storeTable.tab), //Use provide value, then store value or default to 'All' if neither are provided\r\n    orientation: state.layout.height > state.layout.width ? 'potrait' : 'landscape',\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(TableTabSelector);\r\n","import * as React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TableToolbar, { TableToolbarProps } from './TableToolbar';\r\nimport { GenericTableProps } from './GenericTable';\r\nimport TableTabSelector from './TableTabSelector';\r\nimport { Paper, CircularProgress, useTheme } from '@material-ui/core';\r\nimport { evalFunc } from '../../../helpers';\r\nimport { useHeight, useAppBarHeight } from '../../layout/LayoutStore';\r\nimport { TabSelectorItem } from '../../general/TabSelector/TabSelector';\r\n\r\nconst GenericTable = React.lazy(() => import('./GenericTable'));\r\n\r\nexport interface TabSelectorProps {\r\n  tabs?: TabSelectorItem[];\r\n  onChangeTab?: (tab: string, props: GenericTableContainerProps) => void;\r\n}\r\n\r\nexport interface GenericTableContainerProps extends TabSelectorProps, GenericTableProps, TableToolbarProps {\r\n  square?: boolean;\r\n  toolbar?: boolean;\r\n  stacked?: boolean | number;\r\n  loading?: boolean;\r\n  toolbarplaceholder?: string;\r\n  title?: string;\r\n  search?: boolean;\r\n  getfiles?: boolean;\r\n  back?: boolean;\r\n  domainData?: boolean;\r\n  domainLogs?: boolean;\r\n  dialogs?: any[];\r\n  showScroll?: boolean;\r\n}\r\n\r\nconst injectValues = (Component, { getValues }) => <Component {...getValues()} />;\r\n\r\nexport default function GenericTableContainer(props: GenericTableContainerProps) {\r\n  const {\r\n    name,\r\n    square,\r\n    height: Height,\r\n    toolbar,\r\n    stacked,\r\n    toolbarplaceholder,\r\n    title,\r\n    search,\r\n    tabs,\r\n    columns: Columns,\r\n    renderIcon,\r\n    showicon = false,\r\n    loading,\r\n    buttons,\r\n    dialogs = [],\r\n    onChangeTab,\r\n    ...tableProps\r\n  } = props;\r\n\r\n  const { layout } = useTheme();\r\n  const layoutHeight = useHeight();\r\n  const height = Height ? Height : layoutHeight;\r\n  const columns = evalFunc(Columns, props);\r\n\r\n  const applyCellRenderers = (columns: any) => {\r\n    columns &&\r\n      columns.forEach((column: any) => {\r\n        if (column.renderCell) {\r\n          //Column has a custom render, so apply it to the virtual table cell render callback\r\n          column.cell = (row: any, col: any) => column.renderCell(row.getValues ? row.getValues() : row, column);\r\n        } else if (column.Cell) {\r\n          column.cell = (row: any, col: any) => injectValues(column.Cell, row); // Inject values via getValues()\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleTabChange = (value: any) => {\r\n    onChangeTab && onChangeTab(value, props);\r\n  };\r\n\r\n  applyCellRenderers(columns); //Apply any custom cell renderers that are needed\r\n\r\n  const _toolbar = toolbar && (\r\n    <TableToolbar\r\n      name={name}\r\n      search={search != null ? search : true}\r\n      title={title ? title : name ? name : ''}\r\n      square={square}\r\n      inputplaceholder={toolbarplaceholder}\r\n      renderIcon={renderIcon}\r\n      showicon={showicon}\r\n      buttons={evalFunc(buttons, props)}\r\n    />\r\n  );\r\n  var filterbar = tabs && <TableTabSelector name={name} tabs={tabs} onChange={handleTabChange} />;\r\n\r\n  const rows = [\r\n    { id: 'toolbar', component: _toolbar, height: layout.tabletoolbarheight },\r\n    {\r\n      id: 'filterbar',\r\n      component: filterbar,\r\n      height: layout.tablefilterbarheight\r\n    }\r\n  ].filter(x => x.component); //Remove any null components\r\n\r\n  const appBarHeight = useAppBarHeight();\r\n\r\n  const componentsOnPage = [\r\n    appBarHeight,\r\n    layout.contentpadding, // Top content padding\r\n    stacked ? layout.tablefilterbarheight + layout.contentrowspacing : 0,\r\n    layout.tabletoolbarheight + layout.contentrowspacing,\r\n    layout.contentpadding, // Bottom content padding\r\n    layout.footerheight\r\n  ];\r\n\r\n  var calculatedheight = height - componentsOnPage.reduce((t, c) => t + c, 0);\r\n\r\n  if (typeof stacked === 'number') {\r\n    calculatedheight -= stacked;\r\n  }\r\n\r\n  const spinner = (\r\n    <Paper elevation={0} style={{ height: calculatedheight }}>\r\n      <Grid container style={{ height: calculatedheight }} direction='column' alignItems='center' justify='center' spacing={0}>\r\n        <Grid item>\r\n          <CircularProgress color='primary' size={calculatedheight / 6} thickness={3} />\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n\r\n  const table = (\r\n    <React.Suspense fallback={spinner}>\r\n      {loading ? spinner : <GenericTable name={name} height={calculatedheight} columns={columns} placeholder={!buttons && ' '} {...tableProps} />}\r\n    </React.Suspense>\r\n  );\r\n\r\n  rows.push({ id: 'table', component: table, height: calculatedheight });\r\n\r\n  return (\r\n    <>\r\n      {dialogs.map((d, i) => (\r\n        <div key={i}>{d}</div>\r\n      ))}\r\n      <Grid container>\r\n        {rows.map((r, i) => (\r\n          <Grid key={r.id} item xs={12} style={{ paddingBottom: i === rows.length - 1 ? 0 : layout.contentrowspacing }}>\r\n            {r.component}\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { AppState } from '../../../store';\r\nimport { GenericTableContainerProps } from './GenericTableContainer';\r\nimport * as TableStore from './TableStore';\r\n\r\n///////////////////////////////////////////\r\n/////////////// Table Sorters  ////////////\r\n//////////////////////////////////////////\r\n\r\nexport type SortComparator = 'text';\r\nconst sortComparators = {\r\n  text: desc\r\n};\r\n\r\n///////////////////////////////////////////\r\n/////////////// Table Filters ////////////\r\n//////////////////////////////////////////\r\n\r\nexport interface ColumnFilter {\r\n  value: string | boolean;\r\n  column: string;\r\n}\r\n\r\nconst isMatch = (obj, re) => {\r\n  for (var attrname in obj) {\r\n    if (['_id', 'id', 'key', 'getValues', 'edit', 'action'].includes(attrname.toLowerCase())) continue;\r\n    if (obj[attrname])\r\n      if (isNaN(obj[attrname])) {\r\n        //only search non numeric values\r\n        try {\r\n          if (obj[attrname].match(re)) return true;\r\n        } catch (e) {\r\n          continue;\r\n        }\r\n      } else {\r\n        //it is a number\r\n        try {\r\n          if (obj[attrname].toString().match(re)) return true;\r\n        } catch (e) {\r\n          continue;\r\n        }\r\n      }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst isColumnExactMatch = (obj, cf: ColumnFilter) => {\r\n  return obj[cf.column] != null && obj[cf.column] === cf.value ? true : false;\r\n};\r\n\r\n//extracts the necessary properties from the table's component props so table_filter can be called\r\nexport const tableFilter = (data: any, state: AppState, props: GenericTableContainerProps) => {\r\n  //Extract the table information from the redux store\r\n  const table: TableStore.Table = state.table[props.name];\r\n  const searchtext = table && table.searchtext;\r\n\r\n  const columnfilter = table &&\r\n    table.columnfiltervalue != null &&\r\n    table.columnfiltercolumn != null && {\r\n      value: table && table.columnfiltervalue,\r\n      column: table && table.columnfiltercolumn\r\n    };\r\n\r\n  const filtered = table_filter(data, columnfilter, searchtext);\r\n  return table && table.orderBy ? stableSort(filtered, getSorting(table.orderDirection, table.orderBy, table.sortComparator)) : filtered;\r\n};\r\n\r\nexport const useTableFilter = (data: any, name: string) => {\r\n  //Extract the table information from the redux store\r\n  const table = TableStore.useTable(name);\r\n  const searchtext = table && table.searchtext;\r\n\r\n  const columnfilter = table &&\r\n    table.columnfiltervalue != null &&\r\n    table.columnfiltercolumn != null && {\r\n      value: table && table.columnfiltervalue,\r\n      column: table && table.columnfiltercolumn\r\n    };\r\n\r\n  const filtered = table_filter(data, columnfilter, searchtext);\r\n  return table && table.orderBy ? stableSort(filtered, getSorting(table.orderDirection, table.orderBy, table.sortComparator)) : filtered;\r\n};\r\n\r\nexport const table_filter = (data, columnfilter: ColumnFilter, searchtext) => {\r\n  var performcolumnfilter = false;\r\n  if (columnfilter) if (columnfilter.column) if (columnfilter.value !== 'All' && columnfilter.value !== '') performcolumnfilter = true;\r\n\r\n  const performtextfilter = searchtext && searchtext !== '' ? true : false;\r\n  const re = new RegExp(searchtext, 'gi');\r\n\r\n  if (performcolumnfilter && performtextfilter) data = data.filter(x => isColumnExactMatch(x, columnfilter) && isMatch(x, re));\r\n  else if (performcolumnfilter) data = data.filter(x => isColumnExactMatch(x, columnfilter));\r\n  else if (performtextfilter) data = data.filter(x => isMatch(x, re));\r\n\r\n  return data;\r\n};\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nfunction getSorting(order, orderBy, sortComparator) {\r\n  const cmp = sortComparators[sortComparator];\r\n  return cmp && order === 'desc' ? (a, b) => -cmp(a, b, orderBy) : (a, b) => cmp(a, b, orderBy);\r\n}\r\n","import Nano from 'nano';\r\n\r\nexport const databaseAddress = 'https://db3.lamp.digital/';\r\n\r\nconst nano = Nano(databaseAddress);\r\n\r\nexport const tables = {\r\n  applications: 'applications',\r\n  ratings: 'ratings',\r\n  ix_app_ratings: 'ix_app_ratings' // local table index for storing app id -> rating id mappings for performance reasons\r\n};\r\n\r\nconst DB = {\r\n  applications: nano.db.use(`${tables.applications}_${process.env.NODE_ENV}`),\r\n  ratings: nano.db.use(`${tables.ratings}_${process.env.NODE_ENV}`)\r\n};\r\n\r\nexport default DB;\r\n","import { AppState } from '../../../../store';\r\nimport { GenericTableContainerProps } from '../GenericTableContainer';\r\nimport Application from '../../../../database/models/Application';\r\nimport { name } from './table';\r\nimport { isEmpty, decimalsum } from '../../../../helpers';\r\nimport { tableFilter } from '../tablehelpers';\r\nimport { tables } from '../../../../database/dbConfig';\r\nimport Decimal from 'decimal.js-light';\r\n\r\nconst isMatch = (filters, value) => filters.reduce((t, c) => (t = t && value.includes(c)), true);\r\n\r\nexport const from_database = (state: AppState, props: GenericTableContainerProps) => {\r\n  const apps = state.database[tables.applications] ?? {};\r\n  const ratings = state.database[tables.ratings] ?? {};\r\n  const ix_app_ratings = state.database[tables.ix_app_ratings] ?? {};\r\n\r\n  var data = apps\r\n    ? Object.keys(apps).map(k => {\r\n        const app: Application = apps[k];\r\n        const ratingIds = ix_app_ratings[app._id] ?? [];\r\n        const rating = ratingIds\r\n          .map(k => new Decimal(ratings[k].rating))\r\n          .reduce(decimalsum, new Decimal(0))\r\n          .dividedBy(ratingIds.length)\r\n          .toPrecision(2);\r\n\r\n        return {\r\n          _id: app._id,\r\n          name: app.name,\r\n          rating,\r\n          company: app.company,\r\n          costs: app.costs.join(''),\r\n          platforms: app.platforms.join(' '), // for searching\r\n          features: app.features.join(' '), // for searching\r\n          functionalities: app.functionalities.join(' '),\r\n          conditions: app.conditions.join(' '),\r\n          privicies: app.privicies.join(' '),\r\n          clinicalFoundation: app.clincialFoundation,\r\n          getValues: () => ({ ...app, rating, ratingIds })\r\n        };\r\n      })\r\n    : [];\r\n\r\n  const { filters = {} } = state.table[name] || {};\r\n  const { Features = [], Conditions = [], Platforms = [], Cost = [], Privacy = [], 'Clinical Foundation': ClinicalFoundation } = filters;\r\n\r\n  data = data.filter(r => {\r\n    return (\r\n      isMatch(Features, r.features) &&\r\n      isMatch(Conditions, r.conditions) &&\r\n      isMatch(Platforms, r.platforms) &&\r\n      isMatch(Cost, r.costs) &&\r\n      isMatch(Privacy, r.privicies) &&\r\n      (isEmpty(ClinicalFoundation) || ClinicalFoundation === r.clinicalFoundation)\r\n    );\r\n  });\r\n\r\n  return tableFilter(data, state, props);\r\n};\r\n","import * as React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppState } from '../../../store';\r\nimport { defaultDialogState } from './reducers';\r\n\r\nconst updateDialog = (id, payload) => ({ type: 'UPDATE_DIALOG', id, payload });\r\n\r\nexport const useDialogState = id => {\r\n  const dispatch = useDispatch();\r\n  const dialogState = useSelector((state: AppState) => state.dialog[id] || defaultDialogState);\r\n  const setDialogState = React.useCallback(payload => dispatch(updateDialog(id, payload)), [id, dispatch]);\r\n  return [dialogState, setDialogState];\r\n};\r\n","import React from 'react';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Tooltip,\r\n  Grid,\r\n  Typography,\r\n  Fab,\r\n  useTheme,\r\n  ListItem,\r\n  ListItemText,\r\n  makeStyles,\r\n  createStyles,\r\n  Badge,\r\n  withStyles,\r\n  Link\r\n} from '@material-ui/core';\r\nimport { useDialogState } from '../GenericDialog/actions';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport { checkEmpty, evalFunc, isEmpty } from '../../../helpers';\r\nimport { useTableFilterValues } from '../GenericTable/TableStore';\r\nimport * as Icons from '@material-ui/icons';\r\n\r\nexport interface DialogModuleProps {\r\n  default: any;\r\n  title: string;\r\n  props?: any;\r\n}\r\n\r\nexport const renderDialogModule = ({ default: Dialog, title, ...props }) => Dialog && <Dialog id={title} {...props} />;\r\n\r\nexport const EditDialogButton = ({\r\n  variant = 'iconbutton',\r\n  placement = 'left',\r\n  tooltip = 'Edit',\r\n  mount = false, // Default to false, as most edit buttons are within the table rows, which get remounted in various scenaries (layout resizing etc)\r\n  ...other\r\n}) => <DialogButton variant={variant} Icon={EditIcon} type='Edit' tooltip={tooltip} placement={placement} mount={mount} {...other} />;\r\n\r\nconst StyledBadge = withStyles(theme =>\r\n  createStyles({\r\n    badge: {\r\n      top: 7,\r\n      right: 6,\r\n      border: `1px solid ${theme.palette.background.paper}`\r\n    }\r\n  })\r\n)(Badge);\r\n\r\nexport const TableFilterDialogButton = ({ table, Module, Icon = Icons.FilterList, tooltip = 'Filter Results' }) => {\r\n  const [values, setValues] = useTableFilterValues(table);\r\n  const { Features = [], Conditions = [], Platforms = [], Cost = [], Privacy = [], 'Clinical Foundation': ClinicalFoundation } = values as any;\r\n  const filterCount = [Features, Conditions, Platforms, Cost, Privacy].reduce((t, c) => (t = t + c.length), 0) + (isEmpty(ClinicalFoundation) ? 0 : 1);\r\n  const handleReset = React.useCallback(() => setValues({}), [setValues]);\r\n\r\n  return (\r\n    <StyledBadge badgeContent={filterCount} color='error' overlap='circle' anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}>\r\n      <DialogButton\r\n        Module={Module}\r\n        Icon={Icon}\r\n        tooltip={filterCount === 0 ? tooltip : `${filterCount} Filters Active`}\r\n        table={table}\r\n        values={values}\r\n        setValues={setValues}\r\n        onReset={handleReset}\r\n      />\r\n    </StyledBadge>\r\n  );\r\n};\r\n\r\n// Pass a dialog via Module.  If dialog is mounted elsewhere, set mounted = false to prevent duplicate mounts\r\nexport interface DialogButtonProps {\r\n  id?: string;\r\n  Module?: DialogModuleProps;\r\n  type?: 'Add' | 'Edit' | 'View';\r\n  tooltip?: string;\r\n  placement?: any;\r\n  color?: any;\r\n  variant?: string;\r\n  Icon?: any;\r\n  initialValues?: object;\r\n  children?: any;\r\n}\r\n\r\nconst useStyles = makeStyles(({ palette }: any) =>\r\n  createStyles({\r\n    listitem: {\r\n      padding: 8,\r\n      paddingLeft: 16,\r\n      paddingRight: 8,\r\n      background: 'inherit',\r\n      '&:hover': {\r\n        color: palette.common.white,\r\n        background: palette.primary.main\r\n      }\r\n    }\r\n  })\r\n);\r\n\r\nexport default function DialogButton({\r\n  id: Id = undefined,\r\n  Module = undefined,\r\n  type = 'Add',\r\n  tooltip = 'Add',\r\n  placement = 'bottom',\r\n  color = 'primary',\r\n  variant = 'fab',\r\n  size = 'small',\r\n  label = '',\r\n  disabled = undefined,\r\n  Icon = AddIcon,\r\n  initialValues = {},\r\n  noGrid = true,\r\n  mount = true,\r\n  onClick = undefined,\r\n  onClose = undefined,\r\n  onChange = undefined,\r\n  onReset = undefined,\r\n  values = undefined,\r\n  setValues = undefined,\r\n  children,\r\n  ...other\r\n}: DialogButtonProps & any) {\r\n  const classes = useStyles({});\r\n  const theme = useTheme();\r\n  const id = Id ? Id : Module && Module.title;\r\n  const [, setDialogState] = useDialogState(id);\r\n  const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(null);\r\n\r\n  const other_s = JSON.stringify(other);\r\n  const handleUpdate = React.useCallback(() => {\r\n    setDialogState({\r\n      type,\r\n      open: true,\r\n      initialValues: evalFunc(initialValues),\r\n      ...JSON.parse(other_s)\r\n    });\r\n  }, [setDialogState, other_s, initialValues, type]);\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    setAnchorEl(null);\r\n    onClose && onClose();\r\n  }, [onClose, setAnchorEl]);\r\n\r\n  const handleClick = React.useCallback(\r\n    event => {\r\n      setAnchorEl(event.currentTarget);\r\n      onClick && onClick(event);\r\n      handleUpdate();\r\n    },\r\n    [onClick, handleUpdate]\r\n  );\r\n\r\n  const shared = {\r\n    disabled,\r\n    onClick: handleClick,\r\n    size\r\n  };\r\n\r\n  const wrapGrid = Content =>\r\n    !noGrid ? (\r\n      <Grid key={tooltip} item>\r\n        {Content}\r\n      </Grid>\r\n    ) : (\r\n      Content\r\n    );\r\n\r\n  return wrapGrid(\r\n    <>\r\n      {mount && Module && renderDialogModule({ ...Module, anchorEl, onClose: handleClose, onChange, onReset, values, setValues })}\r\n      <Tooltip\r\n        placement={placement}\r\n        title={\r\n          checkEmpty(tooltip) ? (\r\n            tooltip\r\n          ) : (\r\n            <Typography variant='h6' color='inherit'>\r\n              {tooltip}\r\n            </Typography>\r\n          )\r\n        }\r\n      >\r\n        <span>\r\n          {variant === 'listitem' ? (\r\n            <ListItem key={label} button={true} className={classes.listitem} {...shared}>\r\n              <ListItemText primary={label} />\r\n            </ListItem>\r\n          ) : variant === 'iconbutton' ? (\r\n            <IconButton color='inherit' {...shared}>\r\n              {Icon && <Icon />}\r\n            </IconButton>\r\n          ) : variant === 'text' ? (\r\n            <Button\r\n              color='secondary'\r\n              style={{\r\n                width: 48,\r\n                height: 48\r\n              }}\r\n              variant={variant}\r\n              {...shared}\r\n            >\r\n              {Icon && <Icon style={{ margin: -4 }} />}\r\n            </Button>\r\n          ) : variant === 'contained' ? (\r\n            <Button fullWidth={true} variant={variant} color={color as any} {...shared}>\r\n              {children}\r\n            </Button>\r\n          ) : variant === 'standard' ? (\r\n            <Button color={color as any} {...shared}>\r\n              {children}\r\n            </Button>\r\n          ) : variant === 'link' ? (\r\n            <Link color={color} variant='caption' style={{ cursor: 'pointer' }} {...shared}>\r\n              {children}\r\n            </Link>\r\n          ) : (\r\n            <Fab\r\n              size={size}\r\n              variant='extended'\r\n              color='primary'\r\n              style={{\r\n                color: disabled ? theme.palette.primary.light : theme.palette.common.white\r\n              }}\r\n              {...shared}\r\n            >\r\n              {Icon && <Icon style={{ margin: -4 }} />}\r\n              {children && <div style={{ marginLeft: Icon ? 8 : 0 }}>{children}</div>}\r\n            </Fab>\r\n          )}\r\n        </span>\r\n      </Tooltip>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { getLabel, checkEmpty, hasChanged } from '../../../helpers';\r\nimport merge from 'deepmerge';\r\nimport { validateEmail, emptyUndefined } from '../../../helpers';\r\n\r\nexport interface FieldProps {\r\n  id: string | number;\r\n  label: string;\r\n  type: string;\r\n  Field?: Element;\r\n  getValue?: (f: FieldProps, values: any) => any;\r\n}\r\n\r\n// Mappings to retreive the value from the state\r\nconst getMappedValue = (id, object, container, values = {}) => {\r\n  if (container && object) {\r\n    return values[container] && values[container][object] && values[container][object][id];\r\n  } else if (container) {\r\n    return values[container] && values[container][id];\r\n  } else if (object) {\r\n    return values[object] && values[object][id];\r\n  } else {\r\n    return values[id];\r\n  }\r\n};\r\n\r\nexport const setMappedValue = ({ field, value, prev }) => {\r\n  const { id, object, container } = field;\r\n  if (container && !prev[container]) {\r\n    prev[container] = {};\r\n  }\r\n  if (container && object && !prev[container][object]) {\r\n    prev[container][object] = {};\r\n  }\r\n  if (!container && object && !prev[object]) {\r\n    prev[object] = {};\r\n  }\r\n\r\n  if (container && object) {\r\n    prev[container][object][id] = value;\r\n  } else if (container) {\r\n    prev[container][id] = value;\r\n  } else if (object) {\r\n    prev[object][id] = value;\r\n  } else {\r\n    prev[id] = value;\r\n  }\r\n  return prev;\r\n};\r\n\r\nconst singleValue = ({ id, object, container }, values) => getMappedValue(id, object, container, values);\r\nexport const getValue = (f, values) => (f.getValue ? f.getValue(f, values) : singleValue(f, values));\r\n\r\nexport const isDisabled = (f, values) => (typeof f.disabled === 'function' ? f.disabled(values, f) : f.disabled); //Disabled fields are shown but disabled\r\nexport const isActive = ({ active }, values) => (typeof active === 'function' ? active(values) : active); //Active fields are hidden, but can be shown via other options changing in the dialog\r\nexport const isHidden = ({ hidden }, values) => (typeof hidden === 'function' ? hidden(values) : hidden); //Hidden fields are hidden for the current dialog state, and can't be shown via other options\r\n\r\nexport const bindField = ({ f, values, initialValues, errors, touched, handleChange, handleBlur, submitting, showErrors = false }) => {\r\n  const { required, type, autoFocus, InputProps, min, max, tab, multiline, rows, getProps, disableCloseOnSelect } = f; // Only pass necessary props to field\r\n  const props = {\r\n    autoFocus,\r\n    required,\r\n    type,\r\n    value: getValue(f, values),\r\n    initialValue: getValue(f, initialValues),\r\n    error: (showErrors || f.showError) && getValue(f, errors),\r\n    label: getLabel(f),\r\n    disabled: isDisabled(f, values) || submitting,\r\n    onChange: handleChange(f),\r\n    onBlur: handleBlur(f),\r\n    items: f.filter ? f.filter(f.items, values) : typeof f.items === 'function' ? f.items(values) : f.items,\r\n    InputProps,\r\n    min,\r\n    max,\r\n    tab,\r\n    multiline,\r\n    rows,\r\n    disableCloseOnSelect,\r\n    ...(getProps && getProps(values)) // Allows the field to hook into the internal state values if needed\r\n  };\r\n  Object.keys(props).forEach(key => props[key] === undefined && delete props[key]); // Filter out any undefined props so they don't override any previously specified values\r\n  return props;\r\n};\r\n\r\nexport const isEnabled = value => value === true || value === undefined;\r\n\r\nexport const useHandleChange = (setValues, setDialogState) =>\r\n  React.useCallback(\r\n    field => e => {\r\n      var value = e && e.target && e.target.value;\r\n      if (field && field.uppercase && !checkEmpty(value)) {\r\n        value = value.toUpperCase();\r\n      }\r\n      setValues(prev => setMappedValue({ field, value, prev }));\r\n      setDialogState(prev => ({ ...prev, errors: {} })); // Reset any external errors\r\n      field.onChange && field.onChange({ value, field, setValues });\r\n    },\r\n    [setValues, setDialogState]\r\n  );\r\n\r\nexport const getDefaultValues = fields => {\r\n  const defaultValues = {};\r\n  fields.forEach(field => {\r\n    field.initialValue !== undefined &&\r\n      setMappedValue({\r\n        field,\r\n        value: field.initialValue,\r\n        prev: defaultValues\r\n      });\r\n  });\r\n  return defaultValues;\r\n};\r\n\r\nexport const useValues = ({\r\n  open,\r\n  fields = [],\r\n  InitialValues = {},\r\n  state = {} as any,\r\n  setState,\r\n  validate,\r\n  externalValues = undefined, // Use with externalSetValues, for having an external state, such as redux\r\n  externalSetValues = undefined, //Use with externalValues, for having an external state, such as redux\r\n  onChange = undefined\r\n}) => {\r\n  const { initialValues = {}, submitting, showErrors } = state;\r\n  const defaultValues = getDefaultValues(fields); // Get any default values from the individual fields first\r\n  var mergedInitialValues = merge(defaultValues, InitialValues); // Merge with any incoming initialValues from the properties\r\n  mergedInitialValues = merge(mergedInitialValues, initialValues); // Merge any initial values from the external dialog state\r\n  const [internalValues, setInternalValues] = React.useState(mergedInitialValues);\r\n  const values = externalValues ? externalValues : internalValues;\r\n\r\n  const setValues = React.useCallback(\r\n    vals => {\r\n      externalSetValues ? externalSetValues(vals) : setInternalValues(vals);\r\n      onChange && onChange(vals);\r\n    },\r\n    [externalSetValues, setInternalValues, onChange]\r\n  );\r\n\r\n  const [touched, setTouched] = React.useState({});\r\n\r\n  const mergedInitialValuesStr = JSON.stringify(mergedInitialValues); // Use a string since the object references will change everytime\r\n  const initializeValues = React.useCallback(() => {\r\n    setTouched({});\r\n    setValues(JSON.parse(mergedInitialValuesStr));\r\n  }, [setValues, mergedInitialValuesStr]);\r\n\r\n  React.useEffect(() => {\r\n    // Re-initialize values when necessary\r\n    open && setValues(JSON.parse(mergedInitialValuesStr));\r\n    open && setTouched({});\r\n  }, [open, mergedInitialValuesStr, setValues]);\r\n\r\n  const internalErrors = open ? handleValidation({ values, fields, errors: state.errors }) : {}; // Perform standard field validations, required, email, etc\r\n  const externalErrors = open && validate ? validate(values, state) : {}; // Add any external validations if specified\r\n  const errors = merge(internalErrors, externalErrors);\r\n  const errorCount = fields ? fields.filter(f => isError(f, values, errors)).length : 0;\r\n\r\n  const handleChange = useHandleChange(setValues, setState);\r\n  const handleBlur = React.useCallback(\r\n    field => () => {\r\n      setTouched(prev => setMappedValue({ field, value: true, prev }));\r\n    },\r\n    [setTouched]\r\n  );\r\n\r\n  const mapField = f =>\r\n    bindField({\r\n      f,\r\n      values,\r\n      initialValues: mergedInitialValues,\r\n      errors,\r\n      touched,\r\n      handleChange,\r\n      handleBlur,\r\n      submitting,\r\n      showErrors\r\n    });\r\n\r\n  return {\r\n    values,\r\n    setValues,\r\n    hasChanged: hasChanged(values, mergedInitialValues),\r\n    touched,\r\n    errors,\r\n    errorCount,\r\n    handleChange,\r\n    handleBlur,\r\n    mapField,\r\n    initializeValues\r\n  };\r\n};\r\n\r\nexport const handleValidation = ({ values, fields, errors: Errors }) => {\r\n  var errors = { ...Errors }; // Make a copy\r\n  fields.forEach(f => {\r\n    if (f.email && !checkEmpty(getValue(f, values)) && !validateEmail(getValue(f, values))) {\r\n      setMappedValue({ field: f, value: 'Invalid email format.', prev: errors });\r\n    } else if (f.required && checkEmpty(getValue(f, values))) {\r\n      setMappedValue({ field: f, value: 'Required', prev: errors });\r\n    } else if (f.validate) {\r\n      errors[f.id] = emptyUndefined(f.validate(values));\r\n    }\r\n  });\r\n\r\n  return errors;\r\n};\r\n\r\n// Only count errors for active fields that are not disabled or hidden\r\nexport const isError = (field, values, errors) => {\r\n  return (\r\n    !(isActive(field, values) === false) && // Active\r\n    !(isDisabled(field, values) === true) && // Not disabled\r\n    !(isHidden(field, values) === true) && // Not hidden\r\n    getValue(field, errors) !== undefined // Not undefined\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorGate({ error, children }) {\r\n  return error ? (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={12}>\r\n        <Typography align='center'>Error loading data, please close and try again.</Typography>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography align='center' color='error'>\r\n          Error: {error}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  ) : (\r\n    children\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { TextField } from '@material-ui/core';\r\nimport { isError } from '../../../helpers';\r\n\r\nconst Text = ({ value = '', forceErrorMargin = false, error = undefined, initialValue = undefined, ...other }) => (\r\n  <TextField\r\n    value={value}\r\n    error={isError(error)}\r\n    helperText={forceErrorMargin ? error || ' ' : error} // Forces a constant helper text margin\r\n    margin='dense'\r\n    variant='outlined'\r\n    fullWidth\r\n    InputLabelProps={{\r\n      shrink: true,\r\n    }}\r\n    {...other}\r\n  />\r\n);\r\n\r\nexport default Text;\r\n","import React from 'react';\r\nimport { Grid, Collapse, Tooltip, Typography } from '@material-ui/core';\r\nimport Text from '../DialogField/Text';\r\nimport { isActive, isHidden, getValue } from './helpers';\r\nimport { debugSettings, checkEmpty } from '../../../helpers';\r\n\r\nconst getColumnFields = (fields, columns, index) => {\r\n  const numFields = fields.length;\r\n  const numCols = columns;\r\n  const numColsField = Math.ceil(numFields / numCols);\r\n  const startIndex = numColsField * index;\r\n  const endIndex = Math.min(startIndex + numColsField - 1, numFields - 1);\r\n  return fields.filter((f, i) => i >= startIndex && i <= endIndex);\r\n};\r\n\r\nexport const MapField = ({ Field, style, active, xs = 12, values, mapField, fullWidth, ...f }) => {\r\n  const collapse = isActive({ active }, values);\r\n\r\n  const item = Field ? (\r\n    <Field {...mapField(f)} values={values} />\r\n  ) : checkEmpty(f.id) ? (\r\n    undefined\r\n  ) : (\r\n    <Text {...mapField(f)} />\r\n  );\r\n\r\n  const { id, container, object } = f; // InputProps causes circular reference error for some reason, so remove it before stringify  \r\n  const value = getValue(f, values);\r\n\r\n  const wrappeditem = (\r\n    <Tooltip\r\n      title={\r\n        <>\r\n          <Typography>Value: {typeof value === 'object' ? JSON.stringify(value) : value}</Typography>\r\n          <Typography>{JSON.stringify({ id, container, object })}</Typography>\r\n        </>\r\n      }\r\n    >\r\n      <div>{item}</div>\r\n    </Tooltip>\r\n  );\r\n  const Item = debugSettings.debugfieldonhover ? wrappeditem : item;\r\n\r\n  return (\r\n    <Grid key={`${f.id}`} item style={style} xs={fullWidth ? 12 : (xs as any)}>\r\n      {collapse !== undefined ? <Collapse in={collapse}>{Item}</Collapse> : Item}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Fields = ({\r\n  fields,\r\n  mapField,\r\n  values,\r\n  fullWidth = false,\r\n  columns = 1,\r\n  minColumnWidth = 250,\r\n  maxColumnWidth = 250,\r\n}) =>\r\n  columns > 1 ? (\r\n    <Grid key='column-container' item xs={12} container spacing={2} justify='center'>\r\n      {Array.from(Array(columns).keys()).map(i => (\r\n        <Grid\r\n          key={i}\r\n          item\r\n          xs={fullWidth ? 12 : true}\r\n          style={fullWidth ? {} : { minWidth: minColumnWidth, maxWidth: maxColumnWidth }}\r\n        >\r\n          <Grid container>\r\n            <Fields\r\n              fields={getColumnFields(fields, columns, i)}\r\n              mapField={mapField}\r\n              values={values}\r\n              fullWidth={false}\r\n              columns={1}\r\n              minColumnWidth={minColumnWidth}\r\n              maxColumnWidth={maxColumnWidth}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  ) : (\r\n    fields\r\n      .filter(f => !isHidden(f, values))\r\n      .map((props, i) => <MapField key={i} values={values} mapField={mapField} fullWidth={fullWidth} {...props} />)\r\n  );\r\n\r\nexport default Fields;\r\n","import React from 'react';\r\nimport {\r\n  Card,\r\n  Popover,\r\n  useTheme,\r\n  makeStyles,\r\n  createStyles,\r\n  CardContent,\r\n  Divider,\r\n  CardActions,\r\n  Button,\r\n  Grid,\r\n  Tooltip,\r\n  IconButton,\r\n  CircularProgress,\r\n  Collapse,\r\n  CardHeader\r\n} from '@material-ui/core';\r\nimport { useDialogState } from '../GenericDialog/actions';\r\nimport { useValues, FieldProps } from '../GenericDialog/helpers';\r\nimport ErrorGate from '../GenericDialog/ErrorGate';\r\nimport * as Icons from '@material-ui/icons';\r\nimport Fields from '../GenericDialog/Fields';\r\n\r\nexport interface ComponentProps {\r\n  id: string;\r\n  title?: string;\r\n  anchorEl?: any;\r\n  initialValues?: object;\r\n  cancelLabel?: string;\r\n  deleteLabel?: string;\r\n  submitLabel?: string;\r\n  onSubmit?: any;\r\n  onDelete?: any;\r\n  onReset?: any;\r\n  OnClose?: any;\r\n  validate?: any;\r\n  Content?: any;\r\n  values?: any;\r\n  setValues?: any;\r\n  fields?: FieldProps[] | any;\r\n  onClose?: () => any;\r\n  children?: any;\r\n}\r\n\r\nconst useStyles = makeStyles(({ spacing, palette, layout }: any) =>\r\n  createStyles({\r\n    title: {\r\n      fontSize: 14,\r\n      padding: spacing(1),\r\n      paddingLeft: spacing(2),\r\n      paddingRight: spacing(1)\r\n    },\r\n    deleteButton: {\r\n      color: palette.common.white,\r\n      background: palette.error.main,\r\n      '&:hover': {\r\n        background: palette.error.dark\r\n      }\r\n    },\r\n    deleteButtonEmpty: {\r\n      color: palette.error.main\r\n    },\r\n    submitProgress: {\r\n      color: palette.primary.light,\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginTop: -(layout.progressSize / 2),\r\n      marginLeft: -(layout.progressSize / 2)\r\n    },\r\n    card: {\r\n      width: 290 // Small enough to fit iPhone 5 in portrait mode\r\n    }\r\n  })\r\n);\r\n\r\nexport default function GenericPopover({\r\n  id,\r\n  title: Title, // Title can be set via the state as well as the input props, state takes priority\r\n  anchorEl,\r\n  initialValues: InitialValues, // If initial values are provided they are merged with the initial values from the state\r\n  cancelLabel = 'Cancel',\r\n  deleteLabel = 'Delete',\r\n  submitLabel = 'Submit',\r\n  fields = [] as any[],\r\n  onSubmit,\r\n  onDelete,\r\n  onClose,\r\n  onReset,\r\n  Content,\r\n  validate,\r\n  values: externalValues = undefined,\r\n  setValues: externalSetValues = undefined,\r\n  children,\r\n  ...other\r\n}: ComponentProps) {\r\n  const { layout } = useTheme();\r\n  const [state, setState] = useDialogState(id);\r\n  const { open, type, loading, submitting } = state;\r\n  const title = state.title ? state.title : Title;\r\n\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const handleConfirmDelete = React.useCallback(() => setConfirmDelete(prev => !prev), [setConfirmDelete]);\r\n\r\n  const classes = useStyles({});\r\n\r\n  const { values, hasChanged, errors, errorCount, mapField } = useValues({\r\n    open,\r\n    fields,\r\n    InitialValues,\r\n    state,\r\n    setState,\r\n    validate,\r\n    externalSetValues,\r\n    externalValues\r\n  });\r\n\r\n  const values_s = JSON.stringify(values);\r\n  const handleSubmit = React.useCallback(() => {\r\n    if (errorCount > 0) {\r\n      setState(prev => ({ ...prev, showErrors: true }));\r\n    } else {\r\n      onSubmit && onSubmit(JSON.parse(values_s));\r\n    }\r\n  }, [setState, onSubmit, values_s, errorCount]);\r\n\r\n  const handleDelete = React.useCallback(() => {\r\n    onDelete && onDelete(JSON.parse(values_s));\r\n  }, [onDelete, values_s]);\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    setState(prev => ({ ...prev, open: false }));\r\n    onClose && onClose();\r\n  }, [setState, onClose]);\r\n\r\n  const handleReset = React.useCallback(() => {\r\n    onReset && onReset();\r\n  }, [onReset]);\r\n\r\n  const contentProps = {\r\n    fields,\r\n    mapField,\r\n    values\r\n  };\r\n\r\n  const inProgress = loading || submitting;\r\n  const disabled = inProgress || errors['loading'];\r\n\r\n  return (\r\n    <Popover\r\n      id={id}\r\n      open={open && Boolean(anchorEl)}\r\n      anchorEl={anchorEl}\r\n      onClose={onClose}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'right'\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'right'\r\n      }}\r\n      {...other}\r\n    >\r\n      <Card className={classes.card}>\r\n        {title !== null && (\r\n          <>\r\n            <CardHeader\r\n              className={classes.title}\r\n              title={title ? title : id}\r\n              action={\r\n                handleClose && (\r\n                  <Tooltip title='Close' placement='left'>\r\n                    <IconButton aria-label='close' onClick={handleClose}>\r\n                      <Icons.Close />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )\r\n              }\r\n            />\r\n            <Divider />\r\n          </>\r\n        )}\r\n        <CardContent>\r\n          <ErrorGate error={errors['loading']}>\r\n            <>\r\n              {children ? (\r\n                children\r\n              ) : Content ? (\r\n                <Content {...contentProps} />\r\n              ) : (\r\n                <>\r\n                  {inProgress && <CircularProgress size={layout.progressSize} className={classes.submitProgress} />}\r\n                  <Collapse in={!confirmDelete}>\r\n                    <Grid container alignItems='center' spacing={1}>\r\n                      <Fields {...contentProps} />\r\n                    </Grid>\r\n                  </Collapse>\r\n                  {confirmDelete && (\r\n                    <Grid container spacing={2} justify='center' alignItems='center'>\r\n                      <Grid item>\r\n                        <Button onClick={handleConfirmDelete} color='secondary'>\r\n                          Cancel\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item>\r\n                        <Button onClick={handleDelete} className={classes.deleteButton}>\r\n                          <Icons.Delete style={{ marginRight: 4 }} />\r\n                          Confirm {deleteLabel}\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  )}\r\n                </>\r\n              )}\r\n            </>\r\n          </ErrorGate>\r\n        </CardContent>\r\n        <Divider />\r\n        <CardActions>\r\n          <Button size='small' color='default' onClick={handleReset}>\r\n            Reset\r\n          </Button>\r\n          {type === 'Edit' && onDelete !== undefined && (\r\n            <Button size='small' disabled={disabled} className={classes.deleteButtonEmpty} onClick={handleConfirmDelete}>\r\n              {deleteLabel}\r\n            </Button>\r\n          )}\r\n          {cancelLabel !== null && (\r\n            <Button size='small' color='default' onClick={handleClose}>\r\n              {cancelLabel}\r\n            </Button>\r\n          )}\r\n          {submitLabel !== null && (\r\n            <Button autoFocus size='small' disabled={disabled || !hasChanged} color='primary' onClick={handleSubmit}>\r\n              {submitLabel || type}\r\n            </Button>\r\n          )}\r\n        </CardActions>\r\n      </Card>\r\n    </Popover>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport Text from './Text';\r\n\r\nconst icon = <CheckBoxOutlineBlankIcon fontSize='small' />;\r\nconst checkedIcon = <CheckBoxIcon fontSize='small' />;\r\n\r\nexport default function MuliSelectCheck({\r\n  value = [],\r\n  onChange = undefined,\r\n  label,\r\n  placeholder,\r\n  fullWidth = true,\r\n  disabled = false,\r\n  size = 'small' as 'small',\r\n  items = [],\r\n  disableCloseOnSelect = true,\r\n  ...other\r\n}) {\r\n  const handleChange = React.useCallback((e, value = []) => onChange && onChange({ target: { value: value.map(i => i.value) } }), [onChange]);\r\n\r\n  return (\r\n    <Autocomplete\r\n      size='small'\r\n      multiple\r\n      options={items}\r\n      disableCloseOnSelect={disableCloseOnSelect}\r\n      getOptionLabel={option => option.label}\r\n      renderOption={(option, { selected }) => (\r\n        <>\r\n          <Checkbox icon={icon} checkedIcon={checkedIcon} style={{ marginRight: 8 }} checked={selected} />\r\n          {option.label}\r\n        </>\r\n      )}\r\n      renderInput={params => (\r\n        <Text\r\n          {...params}\r\n          label={label}\r\n          placeholder={placeholder}\r\n          fullWidth={fullWidth}\r\n          InputLabelProps={{\r\n            shrink: true\r\n          }}\r\n          {...other}\r\n        />\r\n      )}\r\n      disabled={disabled}\r\n      value={items.filter(i => value.includes(i.value))}\r\n      onChange={handleChange}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n","import Nano from 'nano';\r\n\r\nexport type Platform = 'Android' | 'iOS' | 'Web';\r\nexport const Platforms: Platform[] = ['Android', 'iOS', 'Web'];\r\n\r\nexport type Cost = 'Totally Free' | 'In-App Purchase' | 'Payment' | 'Subscription';\r\nexport const Costs: Cost[] = ['Totally Free', 'In-App Purchase', 'Payment', 'Subscription'];\r\n\r\nexport type ClinicalFoundation = 'No Supporting Studies' | 'Supporting Studies';\r\nexport const ClinicalFoundations: ClinicalFoundation[] = ['No Supporting Studies', 'Supporting Studies'];\r\n\r\nexport type Privacy = 'Has Privacy Policy' | 'Data Stored on Device' | 'Can Delete Data';\r\nexport const Privacies: Privacy[] = ['Has Privacy Policy', 'Data Stored on Device', 'Can Delete Data'];\r\n\r\nexport type Functionality = 'Offline' | 'Accessibility';\r\nexport const Functionalities: Functionality[] = ['Offline', 'Accessibility'];\r\n\r\nexport type Feature =\r\n  | 'Track Symptoms'\r\n  | 'Chatbot/AI'\r\n  | 'Assessments/Screenings'\r\n  | 'CBT'\r\n  | 'Mindfulness'\r\n  | 'Journaling'\r\n  | 'Productivity'\r\n  | 'Peer Support'\r\n  | 'Physical Health';\r\nexport const Features = ['Track Symptoms', 'Chatbot/AI', 'Assessments', 'CBT', 'Mindfulness', 'Journaling', 'Productivity', 'Peer Support', 'Physical Health'];\r\n\r\n/* More features in csv file\r\n'Sleep Tracking'\r\n'Track Mood'\r\n'Track Medication'\r\n'Track Sleep'\r\n'Psychoeducation'\r\n'Deep Breathing'\r\n'ACT'\r\n'DBT'\r\n'Bio Data'\r\n'Coach/Therapist Connection'\r\n'Goal Setting/Habits'\r\n'Physical Health Excersizes'\r\n'Picture Gallery/Hope Board'\r\n'iCBT or Sleep Therapy'\r\n'Bbot Interactin'\r\n'Bio Feedback with Sense Data'\r\n*/\r\n\r\nexport type Condition = 'Mood Disorders' | 'Stress & Anxiety' | 'Sleep' | 'Phobias' | 'OCD' | 'Schizophrenia' | 'Eating Disorders' | 'Personality Disorders';\r\nexport const Conditions: Condition[] = [\r\n  'Mood Disorders',\r\n  'Stress & Anxiety',\r\n  'Sleep',\r\n  'Phobias',\r\n  'OCD',\r\n  'Schizophrenia',\r\n  'Eating Disorders',\r\n  'Personality Disorders'\r\n];\r\n\r\nexport type DeveloperType = 'Government' | 'For Profit Company' | 'Non Profit/Healthcare Company' | 'Academic Institution';\r\nexport const DeveloperTypes: DeveloperType[] = ['Government', 'For Profit Company', 'Non Profit/Healthcare Company', 'Academic Institution'];\r\n\r\nexport default interface Application extends Nano.MaybeDocument {\r\n  name: string;\r\n  company: string;\r\n  androidLink: string;\r\n  iosLink: string;\r\n  webLink: string;\r\n  platforms: Platform[];\r\n  developerType: DeveloperType[];\r\n  costs: Cost[];\r\n  conditions: Condition[];\r\n  privicies: Privacy[];\r\n  clincialFoundation: ClinicalFoundation;\r\n  features: Feature[];\r\n  functionalities: Functionality[];\r\n}\r\n","import React from 'react';\r\nimport { FormControl, InputLabel, Select, FormHelperText } from '@material-ui/core';\r\nimport { setIfEmpty, isError } from '../../../helpers';\r\n\r\nexport interface ComponentProps {\r\n  label?: string;\r\n  value?: any;\r\n  margin?: any;\r\n  forceErrorMargin?: boolean;\r\n  children?: any;\r\n}\r\n\r\nconst OutlinedSelect = ({\r\n  label,\r\n  variant = 'outlined',\r\n  value,\r\n  error,\r\n  required,\r\n  margin = 'dense',\r\n  forceErrorMargin = true,\r\n  children,\r\n  ...other\r\n}: ComponentProps & any) => {\r\n  const inputLabel = React.useRef<HTMLLabelElement>(null);\r\n  const [labelWidth, setLabelWidth] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(inputLabel.current!.offsetWidth);\r\n  }, [inputLabel]);\r\n\r\n  return (\r\n    <FormControl variant={variant} required={required} error={isError(error)} fullWidth margin={margin}>\r\n      <InputLabel ref={inputLabel} shrink={true}>\r\n        {label}\r\n      </InputLabel>\r\n      <Select notched={true} labelWidth={labelWidth} value={setIfEmpty(value)} {...other}>\r\n        {children}\r\n      </Select>\r\n      {(forceErrorMargin || error) && <FormHelperText>{error}</FormHelperText>}\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default OutlinedSelect;\r\n","import * as React from 'react';\r\nimport { MenuItem } from '@material-ui/core';\r\nimport OutlinedSelect from '../../general/OutlinedSelect/OutlinedSelect';\r\n\r\n// If using multi select, the value must be the item so the === operator works for determining selected items.\r\nconst Select = ({\r\n  items = [],\r\n  multiple = false,\r\n  variant = 'outlined',\r\n  forceErrorMargin = false,\r\n  initialValue = undefined,\r\n  ...other\r\n}) => (\r\n  <OutlinedSelect variant={variant} multiple={multiple} forceErrorMargin={forceErrorMargin} {...other}>\r\n    {items.map(item => (\r\n      <MenuItem key={item.value} value={multiple ? item : item.value}>\r\n        {item.label}\r\n      </MenuItem>\r\n    ))}\r\n  </OutlinedSelect>\r\n);\r\n\r\nexport default Select;\r\n","import React from 'react';\r\nimport GenericPopover from '../GenericPopover';\r\nimport MultiSelectCheck from '../../DialogField/MultiSelectCheck';\r\nimport { Features, Conditions, Platforms, Costs, ClinicalFoundations, Privacies } from '../../../../database/models/Application';\r\nimport Select from '../../DialogField/Select';\r\n\r\nexport const title = 'Apply Filters';\r\n\r\nexport default function FilterPopover({ id = title, ...other }) {\r\n  return (\r\n    <GenericPopover\r\n      id={id}\r\n      submitLabel={null}\r\n      cancelLabel='Close'\r\n      fields={[\r\n        {\r\n          id: 'Features',\r\n          Field: MultiSelectCheck,\r\n          items: Features.map(label => ({ value: label, label }))\r\n        },\r\n        {\r\n          id: 'Conditions',\r\n          Field: MultiSelectCheck,\r\n          items: Conditions.map(label => ({ value: label, label }))\r\n        },\r\n        {\r\n          id: 'Platforms',\r\n          Field: MultiSelectCheck,\r\n          items: Platforms.map(label => ({ value: label, label }))\r\n        },\r\n        {\r\n          id: 'Cost',\r\n          Field: MultiSelectCheck,\r\n          items: Costs.map(label => ({ value: label, label }))\r\n        },\r\n        {\r\n          id: 'Privacy',\r\n          Field: MultiSelectCheck,\r\n          items: Privacies.map(label => ({ value: label, label }))\r\n        },\r\n        {\r\n          id: 'Clinical Foundation',\r\n          Field: Select,\r\n          items: ClinicalFoundations.map(label => ({ value: label, label }))\r\n        }\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n","import { useTheme, useMediaQuery } from '@material-ui/core';\r\n\r\nexport const useFullScreen = () => {\r\n  const theme = useTheme();\r\n  return useMediaQuery(theme.breakpoints.down('sm'));\r\n};\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, createStyles } from '@material-ui/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { IconButton, Grid, Tooltip, CircularProgress, useTheme, Collapse } from '@material-ui/core';\r\nimport { useDialogState } from './actions';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Draggable from 'react-draggable';\r\nimport { useValues } from './helpers';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Fields from './Fields';\r\nimport ErrorGate from './ErrorGate';\r\nimport { useFullScreen } from '../../../hooks';\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(({ spacing, palette, layout }: any) =>\r\n  createStyles({\r\n    button: {\r\n      width: '100%',\r\n      maxWidth: '200px'\r\n    },\r\n    dialog: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      outline: 'none',\r\n      border: `5px solid ${palette.primary}`\r\n    },\r\n    dialogHeader: {\r\n      background: palette.grey[100]\r\n    },\r\n    capitalize: {\r\n      textTransform: 'capitalize'\r\n    },\r\n    content: {\r\n      padding: spacing(2)\r\n    },\r\n    actions: {\r\n      margin: 0,\r\n      padding: spacing(1),\r\n      paddingTop: spacing(0.5),\r\n      paddingBottom: spacing(0.5)\r\n    },\r\n    title: {\r\n      background: palette.primary.main,\r\n      color: palette.common.white,\r\n      margin: 0,\r\n      padding: 0,\r\n      paddingLeft: spacing(2),\r\n      paddingRight: spacing(1)\r\n    },\r\n    closeButton: {\r\n      color: 'inherit'\r\n    },\r\n    deleteButton: {\r\n      color: palette.common.white,\r\n      background: palette.error.main,\r\n      '&:hover': {\r\n        background: palette.error.dark\r\n      }\r\n    },\r\n    deleteButtonEmpty: {\r\n      color: palette.error.main\r\n    },\r\n    formControl: {\r\n      marginTop: 8\r\n    },\r\n    submitProgress: {\r\n      color: palette.primary.light,\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginTop: -(layout.progressSize / 2),\r\n      marginLeft: -(layout.progressSize / 2)\r\n    }\r\n  })\r\n);\r\n\r\nexport interface FieldProps {\r\n  id: string | number;\r\n  label: string;\r\n  type: string;\r\n  Field?: Element;\r\n  getValue?: (f: FieldProps, values: any) => any;\r\n}\r\nexport interface ComponentProps {\r\n  id: string;\r\n  title: string;\r\n  initialValues?: object;\r\n  cancelLabel: string;\r\n  deleteLabel: string;\r\n  submitLabel: string;\r\n  draggable: boolean;\r\n  onSubmit: any;\r\n  onDelete: any;\r\n  OnClose: any;\r\n  validate: any;\r\n  Content: Element;\r\n  fields: FieldProps[];\r\n}\r\n\r\nconst GenericDialog = ({\r\n  id,\r\n  title: Title, // Title can be set via the state as well as the input props, state takes priority\r\n  initialValues: InitialValues, // If initial values are provided they are merged with the initial values from the state\r\n  draggable = false,\r\n  cancelLabel = 'Cancel',\r\n  deleteLabel = 'Delete',\r\n  submitLabel,\r\n  fields = [] as any[],\r\n  onSubmit,\r\n  onDelete,\r\n  onClose,\r\n  Content,\r\n  validate,\r\n  children,\r\n  ...other\r\n}: ComponentProps & any) => {\r\n  const { layout } = useTheme();\r\n  const [state, setState] = useDialogState(id);\r\n  const { type, open, loading, submitting } = state;\r\n  const title = state.title ? state.title : Title;\r\n\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const handleConfirmDelete = React.useCallback(() => setConfirmDelete(prev => !prev), [setConfirmDelete]);\r\n\r\n  const classes = useStyles({});\r\n  const fullScreen = useFullScreen();\r\n\r\n  const { values, hasChanged, errors, errorCount, mapField } = useValues({\r\n    open,\r\n    fields,\r\n    InitialValues,\r\n    state,\r\n    setState,\r\n    validate\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    open && setConfirmDelete(false);\r\n  }, [open]); // Re-initialize values when necessary\r\n\r\n  const values_s = JSON.stringify(values);\r\n  const handleSubmit = React.useCallback(() => {\r\n    if (errorCount > 0) {\r\n      setState(prev => ({ ...prev, showErrors: true }));\r\n    } else {\r\n      onSubmit && onSubmit(JSON.parse(values_s));\r\n    }\r\n  }, [setState, onSubmit, values_s, errorCount]);\r\n\r\n  const handleDelete = React.useCallback(() => {\r\n    onDelete && onDelete(JSON.parse(values_s));\r\n  }, [onDelete, values_s]);\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    setState(prev => ({ ...prev, open: false }));\r\n    onClose && onClose();\r\n  }, [setState, onClose]);\r\n\r\n  const contentProps = {\r\n    fields,\r\n    mapField,\r\n    values\r\n  };\r\n\r\n  const inProgress = loading || submitting;\r\n  const disabled = inProgress || errors['loading'];\r\n\r\n  return (\r\n    <Dialog\r\n      PaperComponent={!fullScreen && draggable ? PaperComponent : Paper}\r\n      fullScreen={fullScreen}\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby={`${id}-dialog-title`}\r\n      aria-describedby={`${id}-dialog-description`}\r\n      className={classes.dialog}\r\n      disableAutoFocus={true}\r\n      maxWidth='xs'\r\n      fullWidth\r\n      {...other}\r\n    >\r\n      {title !== null && (\r\n        <>\r\n          <DialogTitle id={`${id}-dialog-title`} disableTypography className={classes.title}>\r\n            <Grid container justify='space-between' alignItems='center'>\r\n              <Grid item>\r\n                <Typography variant='h6' className={classes.capitalize}>\r\n                  {title ? title : [type, id].join(' ')}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                {handleClose ? (\r\n                  <Tooltip title='Close' placement='left'>\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                      <CloseIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                ) : null}\r\n              </Grid>\r\n            </Grid>\r\n          </DialogTitle>\r\n          <Divider />\r\n        </>\r\n      )}\r\n      <ErrorGate error={errors['loading']}>\r\n        <>\r\n          {children ? (\r\n            children\r\n          ) : Content ? (\r\n            <Content {...contentProps} />\r\n          ) : (\r\n            <DialogContent className={classes.content} dividers>\r\n              {inProgress && <CircularProgress size={layout.progressSize} className={classes.submitProgress} />}\r\n              <Collapse in={!confirmDelete}>\r\n                <Grid container alignItems='center' spacing={1}>\r\n                  <Fields {...contentProps} />\r\n                </Grid>\r\n              </Collapse>\r\n              {confirmDelete && (\r\n                <Grid container spacing={2} justify='center' alignItems='center'>\r\n                  <Grid item>\r\n                    <Button onClick={handleConfirmDelete} color='secondary'>\r\n                      Cancel\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <Button onClick={handleDelete} className={classes.deleteButton}>\r\n                      <DeleteIcon style={{ marginRight: 4 }} />\r\n                      Confirm {deleteLabel}\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n            </DialogContent>\r\n          )}\r\n        </>\r\n      </ErrorGate>\r\n      {!confirmDelete && (\r\n        <DialogActions className={classes.actions}>\r\n          {type === 'Edit' && onDelete !== undefined && (\r\n            <Button disabled={disabled} className={classes.deleteButtonEmpty} onClick={handleConfirmDelete}>\r\n              {deleteLabel}\r\n            </Button>\r\n          )}\r\n          {cancelLabel !== null && (\r\n            <Button color='default' onClick={handleClose}>\r\n              {cancelLabel}\r\n            </Button>\r\n          )}\r\n          {submitLabel !== null && (\r\n            <Button autoFocus disabled={disabled || !hasChanged} color='primary' onClick={handleSubmit}>\r\n              {submitLabel || type}\r\n            </Button>\r\n          )}\r\n        </DialogActions>\r\n      )}\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default GenericDialog;\r\n","import React from 'react';\r\nimport GenericDialog from '../GenericDialog';\r\nimport { DialogContent, Typography } from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nexport const title = 'Getting Started';\r\n\r\nconst Content = () => {\r\n  return (\r\n    <DialogContent>\r\n      <Typography variant='h6'>Welcome!</Typography>\r\n      <Typography variant='body2' style={{ marginTop: 8 }}>\r\n        If you need help getting started, please take a minute to review the video below:\r\n      </Typography>\r\n\r\n      <div style={{ marginTop: 16 }}>\r\n        <ReactPlayer width='100%' url='https://www.youtube.com/watch?v=nLF0n9SACd4' controls />\r\n      </div>\r\n    </DialogContent>\r\n  );\r\n};\r\n\r\nexport default function GettingStartedDialog({ id = title, onClose, ...other }) {\r\n  return (\r\n    <GenericDialog\r\n      id={id}\r\n      maxWidth='sm'\r\n      title={title}\r\n      onClose={onClose}\r\n      submitLabel={null}\r\n      cancelLabel='Close'\r\n      Content={Content}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Grid, InputLabel, makeStyles, createStyles } from '@material-ui/core';\r\nimport NotchedOutline from '@material-ui/core/OutlinedInput/NotchedOutline';\r\nimport { isError } from '../../../helpers';\r\n\r\nconst useStyles = makeStyles(({ palette, shape }: any) =>\r\n  createStyles({\r\n    root: {\r\n      position: 'relative',\r\n      width: '100%'\r\n    },\r\n    container: {\r\n      position: 'relative'\r\n    },\r\n    content: {\r\n      minHeight: 40,\r\n      paddingLeft: 16,\r\n      paddingRight: 16,\r\n      paddingTop: 8,\r\n      paddingBottom: 8,\r\n      borderRadius: shape.borderRadius,\r\n      borderColor: palette.type === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)',\r\n      '&:hover': {\r\n        borderColor: palette.text.primary\r\n      }\r\n    },\r\n    inputLabel: {\r\n      position: 'absolute',\r\n      left: 0,\r\n      top: 0,\r\n      // slight alteration to spec spacing to match visual spec result\r\n      transform: 'translate(0, 24px) scale(1)'\r\n    },\r\n    notchedOutline: ({ error }: any) => ({\r\n      borderColor: isError(error) ? palette.error.main : 'inherit'\r\n    })\r\n  })\r\n);\r\n\r\n// Needs some work to handle focused state.  It should use FormControl and formControlState.\r\nexport default function OutlinedDiv({\r\n  label = '',\r\n  error = undefined,\r\n  width = undefined,\r\n  maxWidth = undefined,\r\n  margin = undefined,\r\n  marginTop = undefined,\r\n  marginBottom = undefined,\r\n  height = undefined,\r\n  children = undefined\r\n}) {\r\n  const classes = useStyles({ error });\r\n  const [labelWidth, setLabelWidth] = React.useState(0);\r\n  const labelRef = React.useRef(null);\r\n  React.useEffect(() => {\r\n    const labelNode: any = ReactDOM.findDOMNode(labelRef.current);\r\n    setLabelWidth(labelNode != null ? labelNode.offsetWidth : 0);\r\n  }, [label]);\r\n\r\n  return (\r\n    <div className={classes.root} style={{ width, maxWidth, margin, marginTop, marginBottom, height }}>\r\n      <InputLabel ref={labelRef} htmlFor={label} variant='outlined' className={classes.inputLabel} shrink>\r\n        {label}\r\n      </InputLabel>\r\n      <div className={classes.container}>\r\n        <Grid container id={label} className={classes.content} alignItems='center'>\r\n          <Grid item xs={12}>\r\n            {children}\r\n          </Grid>\r\n          <NotchedOutline className={classes.notchedOutline} notched labelWidth={labelWidth} />\r\n        </Grid>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport MuiRating from '@material-ui/lab/Rating';\r\nimport OutlinedDiv from '../../general/OutlinedDiv/OutlinedDiv';\r\nimport { FormControl, FormHelperText } from '@material-ui/core';\r\nimport { isError } from '../../../helpers';\r\n\r\nexport default function Rating({\r\n  onChange = undefined,\r\n  label,\r\n  disabled = false,\r\n  size = 'small' as 'small',\r\n  variant = 'outlined',\r\n  forceErrorMargin = false,\r\n  required,\r\n  error,\r\n  value = 0,\r\n  ...other\r\n}) {\r\n  const handleChange = React.useCallback((e, value) => onChange && onChange({ target: { value } }), [onChange]);\r\n  return (\r\n    <FormControl variant={variant as any} required={required} margin='dense' error={isError(error)} fullWidth>\r\n      <OutlinedDiv label={label} error={error}>\r\n        <MuiRating name={label} size={size} precision={0.5} disabled={disabled} onChange={handleChange} {...other} />\r\n      </OutlinedDiv>\r\n      {(forceErrorMargin || error) && <FormHelperText>{error}</FormHelperText>}\r\n    </FormControl>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport GenericDialog from '../GenericDialog';\r\nimport { useDialogState } from '../actions';\r\nimport Rating from '../../DialogField/Rating';\r\n\r\nexport const title = 'Rate Application';\r\n\r\nexport default function RateApp({ id = title, onClose, ...other }) {\r\n  const [, setDialogState] = useDialogState(id);\r\n\r\n  const handleSubmit = React.useCallback(\r\n    values => {\r\n      // TO DO: Insert into database\r\n      setDialogState(prev => ({ ...prev, open: false, submitting: false, errors: {} }));\r\n      onClose && onClose();\r\n    },\r\n    [setDialogState, onClose]\r\n  );\r\n\r\n  const handleValidation = (values, dialogState) => {\r\n    var errors = { ...dialogState.errors };\r\n    return errors;\r\n  };\r\n\r\n  return (\r\n    <GenericDialog\r\n      id={id}\r\n      title={title}\r\n      submitLabel='Submit'\r\n      onSubmit={handleSubmit}\r\n      onClose={onClose}\r\n      validate={handleValidation}\r\n      initialValues={{}}\r\n      fields={[\r\n        { id: 'appId', hidden: true },\r\n        { id: 'name', label: 'Enter name of reviewer', xs: 8, initialValue: 'Anonymous', required: true },\r\n        { id: 'rating', label: 'Select Rating', Field: Rating, xs: 4, required: true },\r\n        {\r\n          id: 'review',\r\n          label: 'Enter Review',\r\n          multiline: true,\r\n          rows: 10,\r\n          xs: 12,\r\n          required: true,\r\n          autoFocus: true\r\n        }\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport GenericTableContainer, { GenericTableContainerProps } from '../GenericTableContainer';\r\nimport * as selectors from '../Applications/selectors';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport logo from '../../../../images/logo.png';\r\nimport * as Icons from '@material-ui/icons';\r\nimport { useWidth, useViewMode } from '../../../layout/LayoutStore';\r\nimport DialogButton, { TableFilterDialogButton, renderDialogModule } from '../../GenericDialog/DialogButton';\r\nimport * as FilterPopover from '../../GenericPopover/Filter';\r\nimport * as GettingStartedDialog from '../../GenericDialog/GettingStarted';\r\nimport Application, { Features, ClinicalFoundations, Costs, Platforms, Privacies } from '../../../../database/models/Application';\r\nimport OutlinedDiv from '../../../general/OutlinedDiv/OutlinedDiv';\r\nimport * as RateAppDialog from '../../GenericDialog/RateApp';\r\nimport { RatingsColumn } from '../Applications/table';\r\n\r\nfunction StyledRadio({ checked = false }) {\r\n  const Icon = checked ? Icons.RadioButtonChecked : Icons.RadioButtonUnchecked;\r\n  return <Icon color='action' fontSize='small' style={{ height: 14 }} />;\r\n}\r\n\r\nconst AppSummary = ({\r\n  _id,\r\n  name,\r\n  company,\r\n  platforms = [],\r\n  costs = [],\r\n  privicies = [],\r\n  features = [],\r\n  clincialFoundation,\r\n  ratingIds = [],\r\n  rating\r\n}: Application & any) => {\r\n  return (\r\n    <Grid container justify='space-around' alignItems='center' spacing={2}>\r\n      <Grid item xs style={{ minWidth: 250 }}>\r\n        <Grid container justify='center'>\r\n          <Grid item xs={12}>\r\n            <Typography align='center' variant='h6' color='textPrimary'>\r\n              {name}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography align='center' variant='body2' color='textPrimary'>\r\n              {company}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12} style={{ maxWidth: 130 }}>\r\n            <RatingsColumn _id={_id} rating={rating} ratingIds={ratingIds} />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography align='center'>\r\n              <img style={{ height: 160 }} src={logo} alt='logo' />\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        <Grid container justify='center'>\r\n          <Grid item xs={3}>\r\n            <Grid container>\r\n              {[\r\n                { title: 'Platforms', items: Platforms, values: platforms },\r\n                { title: 'Cost', items: Costs, values: costs }\r\n              ].map(g => (\r\n                <Grid item xs={12} key={g.title}>\r\n                  <OutlinedDiv width={180} label={g.title} marginTop={16} marginBottom={24}>\r\n                    {(g.items as []).map(item => (\r\n                      <Grid container key={item} spacing={1} style={{ marginLeft: 1 }}>\r\n                        <Grid item>\r\n                          <StyledRadio checked={g.values.includes(item)} />\r\n                        </Grid>\r\n                        <Grid item>\r\n                          <Typography variant='body2'>{item}</Typography>\r\n                        </Grid>\r\n                      </Grid>\r\n                    ))}\r\n                  </OutlinedDiv>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <Grid container>\r\n              {[\r\n                {\r\n                  title: 'Features',\r\n                  items: Features,\r\n                  values: features\r\n                }\r\n              ].map(g => (\r\n                <Grid item key={g.title}>\r\n                  <OutlinedDiv width={180} label={g.title} marginTop={16} marginBottom={24}>\r\n                    {(g.items as []).map(item => (\r\n                      <Grid container key={item} spacing={1} style={{ marginLeft: 1 }}>\r\n                        <Grid item>\r\n                          <StyledRadio checked={g.values.includes(item)} />\r\n                        </Grid>\r\n                        <Grid item>\r\n                          <Typography variant='body2'>{item}</Typography>\r\n                        </Grid>\r\n                      </Grid>\r\n                    ))}\r\n                  </OutlinedDiv>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <Grid container>\r\n              {[\r\n                { title: 'Privacy', items: Privacies, values: privicies },\r\n                { title: 'Clinical Foundation', items: ClinicalFoundations, values: [clincialFoundation] }\r\n              ].map(g => (\r\n                <Grid item xs={12} key={g.title}>\r\n                  <OutlinedDiv width={220} label={g.title} marginTop={16} marginBottom={24}>\r\n                    {(g.items as []).map(item => (\r\n                      <Grid container key={item} spacing={1} style={{ marginLeft: 1 }}>\r\n                        <Grid item>\r\n                          <StyledRadio checked={g.values.includes(item)} />\r\n                        </Grid>\r\n                        <Grid item>\r\n                          <Typography variant='body2'>{item}</Typography>\r\n                        </Grid>\r\n                      </Grid>\r\n                    ))}\r\n                  </OutlinedDiv>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport const ViewModeButton = ({ mode = 'list' }) => {\r\n  const [, setViewMode] = useViewMode() as any;\r\n  const handleClick = React.useCallback(() => setViewMode(mode === 'list' ? 'table' : 'list'), [mode, setViewMode]);\r\n  return (\r\n    <DialogButton Icon={mode === 'list' ? Icons.List : Icons.ViewList} tooltip={`Switch to ${mode === 'list' ? 'Table' : 'List'} View`} onClick={handleClick} />\r\n  );\r\n};\r\n\r\nconst name = 'Applications';\r\nconst defaultProps: GenericTableContainerProps = {\r\n  name,\r\n  dialogs: [renderDialogModule(RateAppDialog)],\r\n  columns: [{ name: 'app', header: 'Application', minWidth: 1300, Cell: AppSummary }],\r\n  toolbar: true,\r\n  selector: selectors.from_database,\r\n  footer: true,\r\n  search: true,\r\n  includeHeaders: false,\r\n  fixedRowCount: 0,\r\n  rowHeight: 280,\r\n  buttons: [\r\n    <TableFilterDialogButton Module={FilterPopover} table={name} />,\r\n    <ViewModeButton />,\r\n    <DialogButton Module={GettingStartedDialog} Icon={Icons.Help} tooltip='Help Getting Started' />\r\n  ]\r\n};\r\n\r\nexport const ApplicationsList = props => {\r\n  const width = useWidth();\r\n  return <GenericTableContainer {...defaultProps} showScroll={width < 1375 ? true : false} {...props} />;\r\n};\r\n","import React from 'react';\r\nimport GenericTableContainer, { GenericTableContainerProps } from '../GenericTableContainer';\r\nimport * as selectors from './selectors';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport logo from '../../../../images/logo.png';\r\nimport * as Icons from '@material-ui/icons';\r\nimport { useWidth } from '../../../layout/LayoutStore';\r\nimport DialogButton, { TableFilterDialogButton, renderDialogModule } from '../../GenericDialog/DialogButton';\r\nimport { ViewModeButton } from '../ApplicationsList/table';\r\nimport * as GettingStartedDialog from '../../GenericDialog/GettingStarted';\r\nimport * as FilterPopover from '../../GenericPopover/Filter';\r\nimport Application, { Costs, Platforms, Functionalities, Features } from '../../../../database/models/Application';\r\nimport * as RateAppDialog from '../../GenericDialog/RateApp';\r\nimport Rating from '@material-ui/lab/Rating';\r\n\r\nexport const name = 'Applications';\r\nconst center = text => <div style={{ textAlign: 'center' }}>{text}</div>;\r\n\r\nexport const CenterRadio = ({ checked = false }) => {\r\n  const Icon = checked ? Icons.RadioButtonChecked : Icons.RadioButtonUnchecked;\r\n  return center(<Icon color='action' fontSize='small' />);\r\n};\r\n\r\nconst buildRadios = (items, values, paddingRight = undefined) => (\r\n  <Grid container style={{ paddingRight }}>\r\n    {items.map((i, index) => (\r\n      <Grid item xs key={index}>\r\n        <CenterRadio checked={values.includes(i)} />\r\n      </Grid>\r\n    ))}\r\n  </Grid>\r\n);\r\n\r\nconst PlatformRadios = ({ platforms = [] }: Application) => buildRadios(Platforms, platforms);\r\nconst FunctionalityRadios = ({ functionalities = [] }: Application) => buildRadios(Functionalities, functionalities);\r\nconst CostRadios = ({ costs = [] }) => buildRadios(Costs, costs);\r\nconst FeaturesRadios = ({ features = [] }) => buildRadios(Features, features, 16);\r\n\r\nconst AppColumn = ({ name, company }) => {\r\n  return (\r\n    <Grid container alignItems='center'>\r\n      <Grid item>\r\n        <Grid container alignItems='center'>\r\n          <Grid item>\r\n            <img style={{ height: 40 }} src={logo} alt='logo' />\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item zeroMinWidth xs>\r\n        <Grid container style={{ padding: 4 }}>\r\n          <Grid item xs={12}>\r\n            <Typography noWrap variant='caption' color='textPrimary'>\r\n              {name}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs style={{ paddingLeft: 4 }}>\r\n            <Typography noWrap variant='caption' color='textSecondary'>\r\n              by {company}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport const RatingsColumn = ({ _id, rating, ratingIds = [] }) => {\r\n  return (\r\n    <Grid container alignItems='center'>\r\n      <Grid item xs={12}>\r\n        <Grid container alignItems='center' justify='space-between'>\r\n          <Rating size='small' precision={0.1} value={Number(rating)} readOnly={true} />\r\n          <Typography variant='caption' color='textSecondary'>\r\n            {`(${rating})`}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Grid container justify='space-between'>\r\n          <Grid item>\r\n            <DialogButton\r\n              //Module={RateAppDialog}\r\n              mount={false}\r\n              variant='link'\r\n              size='small'\r\n              Icon={null}\r\n              tooltip='Click to View'\r\n            >\r\n              {ratingIds.length} Reviews\r\n            </DialogButton>\r\n          </Grid>\r\n          <Grid item>{'  |  '}</Grid>\r\n          <Grid item>\r\n            <DialogButton\r\n              Module={RateAppDialog}\r\n              mount={false}\r\n              variant='link'\r\n              size='small'\r\n              Icon={null}\r\n              tooltip='Click to Submit Rating'\r\n              initialValues={{ appId: _id }}\r\n            >\r\n              Rate App\r\n            </DialogButton>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst defaultProps: GenericTableContainerProps = {\r\n  name,\r\n  dialogs: [renderDialogModule(RateAppDialog)],\r\n  columns: [\r\n    { name: 'app', header: 'Application', minWidth: 300, Cell: AppColumn },\r\n    { name: 'rating', header: 'Rating', width: 140, Cell: RatingsColumn },\r\n    {\r\n      name: 'platforms',\r\n      width: 140,\r\n      header: (\r\n        <>\r\n          <Grid container>\r\n            <Grid item xs={12}>\r\n              <Grid container justify='center'>\r\n                Platforms\r\n              </Grid>\r\n            </Grid>\r\n            {Platforms.map(t => (\r\n              <Grid item xs key={t}>\r\n                {center(t)}\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </>\r\n      ),\r\n      Cell: PlatformRadios\r\n    },\r\n    {\r\n      name: 'functionality',\r\n      width: 140,\r\n      header: (\r\n        <>\r\n          <Grid container>\r\n            <Grid item xs={12}>\r\n              <Grid container justify='center'>\r\n                Functionality\r\n              </Grid>\r\n            </Grid>\r\n            {Functionalities.map(t => (\r\n              <Grid item xs key={t}>\r\n                {center(t)}\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </>\r\n      ),\r\n      Cell: FunctionalityRadios\r\n    },\r\n    {\r\n      name: 'cost',\r\n      width: 370,\r\n      header: (\r\n        <>\r\n          <Grid container>\r\n            <Grid item xs={12}>\r\n              <Grid container justify='center'>\r\n                Cost\r\n              </Grid>\r\n            </Grid>\r\n            {Costs.map(t => (\r\n              <Grid item xs key={t}>\r\n                {center(t)}\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </>\r\n      ),\r\n      Cell: CostRadios\r\n    },\r\n    {\r\n      name: 'features',\r\n      width: 830,\r\n      header: (\r\n        <>\r\n          <Grid container style={{ paddingRight: 16 }}>\r\n            <Grid item xs={12}>\r\n              <Grid container justify='center'>\r\n                Features\r\n              </Grid>\r\n            </Grid>\r\n            {Features.map(t => (\r\n              <Grid item xs key={t}>\r\n                {center(t)}\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </>\r\n      ),\r\n      Cell: FeaturesRadios\r\n    }\r\n  ],\r\n  toolbar: true,\r\n  selector: selectors.from_database,\r\n  footer: true,\r\n  search: true,\r\n  buttons: [\r\n    <TableFilterDialogButton Module={FilterPopover} table={name} />,\r\n    <ViewModeButton mode='table' />,\r\n    <DialogButton Module={GettingStartedDialog} Icon={Icons.Help} tooltip='Help Getting Started' />\r\n  ]\r\n};\r\n\r\nexport const Applications = props => {\r\n  const width = useWidth();\r\n  return <GenericTableContainer {...defaultProps} showScroll={width < 1200 ? true : false} {...props} />;\r\n};\r\n","import * as React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppState } from '../store';\r\nimport { tables } from './dbConfig';\r\n\r\nconst updateDatabase = (table, id, payload) => ({ type: 'UPDATE_DATABASE', table, id, payload });\r\nconst setDatabaseTable = (table, payload) => ({ type: 'SET_DATABASE_TABLE', table, payload });\r\n\r\nconst useTableState = table => {\r\n  const dispatch = useDispatch();\r\n  const tableState = useSelector((state: AppState) => state.database[table] ?? {});\r\n  const setTableState = React.useCallback(payload => dispatch(setDatabaseTable(table, payload)), [table, dispatch]);\r\n  return [tableState, setTableState];\r\n};\r\n\r\nconst useTableLength = table => useSelector((state: AppState) => Object.keys(state.database[table] ?? {}).length);\r\n\r\nexport const useApplications = () => useTableState(tables.applications);\r\nexport const useRatings = () => useTableState(tables.ratings);\r\nexport const useRatingsLength = () => useTableLength(tables.ratings);\r\n\r\nconst useIndexAppRatings = () => {\r\n  const [ratings] = useRatings();\r\n  const [applications] = useApplications();\r\n  const [index, setIndex] = useTableState(tables.ix_app_ratings);\r\n  const buildIndex = React.useCallback(() => {\r\n    console.log('Rebuilding index');\r\n    setIndex(\r\n      Object.keys(applications).reduce((f, c: any) => {\r\n        f[applications[c]._id] = Object.keys(ratings).filter(k => ratings[k].appId === applications[c]._id);\r\n        return f;\r\n      }, {})\r\n    );\r\n  }, [applications, ratings, setIndex]);\r\n\r\n  return [index, buildIndex];\r\n};\r\n\r\nexport const useAutoBuildIndex = () => {\r\n  const [, buildIndex] = useIndexAppRatings();\r\n  const ratingsCount = useRatingsLength();\r\n  React.useEffect(() => {\r\n    buildIndex();\r\n    // eslint-disable-next-line\r\n  }, [ratingsCount]); // Purposely leave buildIndex out of the dependency array\r\n};\r\n\r\nexport const useDatabaseRow = (table, id) => {\r\n  const dispatch = useDispatch();\r\n  const row = useSelector((state: AppState) => (state.database[table] || {})[id] || {});\r\n  const updateRow = React.useCallback(payload => dispatch(updateDatabase(table, id, payload)), [table, id, dispatch]);\r\n  return [row, updateRow];\r\n};\r\n","import * as React from 'react';\r\nimport * as Tables from '../application/GenericTable';\r\nimport { useViewMode } from '../layout/LayoutStore';\r\nimport { useRatings, useApplications, useAutoBuildIndex } from '../../database/actions';\r\nimport DB from '../../database/dbConfig';\r\n\r\nexport default function Apps() {\r\n  const [viewMode] = useViewMode() as any;\r\n  const [, setApps] = useApplications();\r\n  const [, setRatings] = useRatings();\r\n\r\n  useAutoBuildIndex(); // Rebuild index as needed\r\n\r\n  // Load data from the database\r\n  React.useEffect(() => {\r\n    DB.applications.list({ include_docs: true }).then(body => {\r\n      const documents = body.rows.map(r => r.doc);\r\n      var result = documents.reduce((f, c: any) => {\r\n        f[c._id] = c;\r\n        return f;\r\n      }, {});\r\n      setApps(result);\r\n    });\r\n    DB.ratings.list({ include_docs: true }).then(body => {\r\n      const documents = body.rows.map(r => r.doc);\r\n      var result = documents.reduce((f, c: any) => {\r\n        f[c._id] = c;\r\n        return f;\r\n      }, {});\r\n      setRatings(result);\r\n    });\r\n  }, [setRatings, setApps]);\r\n\r\n  return viewMode === 'table' ? <Tables.Applications /> : <Tables.ApplicationsList />;\r\n}\r\n","import * as React from 'react';\r\nimport { Route, Switch } from 'react-router';\r\nimport RatingProcess from '../pages/RatingProcess';\r\nimport Framework from '../pages/Framework';\r\nimport Apps from '../pages/Apps';\r\nimport { publicUrl } from '../../helpers';\r\n\r\nconst Routes = () => (\r\n  <Switch>\r\n    <Route exact path={publicUrl('/')} component={Apps} />\r\n    <Route exact path={publicUrl('/Apps')} component={Apps} />\r\n    <Route exact path={publicUrl('/Framework')} component={Framework} />\r\n    <Route exact path={publicUrl('/Rating')} component={RatingProcess} />\r\n  </Switch>\r\n);\r\n\r\nexport default Routes;\r\n","import React from 'react';\r\n\r\n// Triggers the onActivate function when index transitions to activateIndex\r\nconst OnActivate = ({ index, activeIndex, onActivate, children, values, setValues }) => {\r\n  const [activated, setActivated] = React.useState(false);\r\n  React.useEffect(() => {\r\n    if (index === activeIndex) {\r\n      if (activated === false) {\r\n        setActivated(true); // Flag activation has occurred\r\n        onActivate && onActivate({ values, setValues }); // Execute activation\r\n      }\r\n    } else {\r\n      activated === true && setActivated(false); // Reset activation flag\r\n    }\r\n  }, [index, activeIndex, activated, setActivated, onActivate, values, setValues]);\r\n  return activated && children;\r\n};\r\n\r\nexport default OnActivate;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, createStyles } from '@material-ui/styles';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n  IconButton,\r\n  Grid,\r\n  Tooltip,\r\n  Step,\r\n  MobileStepper,\r\n  Collapse,\r\n  Chip,\r\n  CircularProgress,\r\n  useTheme,\r\n} from '@material-ui/core';\r\nimport { useDialogState } from './actions';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Draggable from 'react-draggable';\r\nimport merge from 'deepmerge';\r\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\r\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\r\nimport CheckIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { isEnabled, useValues, isError } from './helpers';\r\nimport Fields from './Fields';\r\nimport OnActivate from './OnActivate';\r\nimport { useFullScreen } from '../../../hooks';\r\nimport ErrorGate from './ErrorGate';\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(({ spacing, palette, layout }: any) =>\r\n  createStyles({\r\n    dialog: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      outline: 'none',\r\n      border: `5px solid ${palette.primary}`,\r\n    },\r\n    capitalize: {\r\n      textTransform: 'capitalize',\r\n    },\r\n    dialogActions: {\r\n      margin: 0,\r\n      padding: spacing(1),\r\n      paddingTop: spacing(0.5),\r\n      paddingBottom: spacing(0.5),\r\n    },\r\n    dialogTitle: {\r\n      background: palette.primary.main,\r\n      color: palette.common.white,\r\n      margin: 0,\r\n      padding: 0,\r\n      paddingLeft: spacing(2),\r\n      paddingRight: spacing(1),\r\n    },\r\n    closeButton: {\r\n      color: 'inherit',\r\n    },\r\n    deleteButton: {\r\n      color: palette.common.white,\r\n      background: palette.error.main,\r\n      '&:hover': {\r\n        background: palette.error.dark,\r\n      },\r\n    },\r\n    mobileStepper: {\r\n      flexGrow: 1,\r\n    },\r\n    submitProgress: {\r\n      color: palette.primary.light,\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      marginTop: -(layout.progressSize / 2),\r\n      marginLeft: -(layout.progressSize / 2),\r\n    },\r\n  })\r\n);\r\n\r\nexport interface FieldProps {\r\n  id: string | number;\r\n  label: string;\r\n  type: string;\r\n  Field?: Element;\r\n  getValue?: (f: FieldProps, values: any) => any;\r\n}\r\nexport interface ComponentProps {\r\n  id: string;\r\n  title: string;\r\n  initialValues?: object;\r\n  cancelLabel: string;\r\n  deleteLabel: string;\r\n  submitLabel: string;\r\n  draggable: boolean;\r\n  onSubmit: any;\r\n  onDelete: any;\r\n  validate: any;\r\n  Content: any;\r\n  steps: any[];\r\n}\r\n\r\nconst GenericStepperDialog = ({\r\n  id,\r\n  title: Title, // Title can be set via the state as well as the input props, state takes priority\r\n  initialValues: InitialValues = {}, // If initial values are provided they are merged with the initial values from the state\r\n  draggable = false,\r\n  cancelLabel = 'Cancel',\r\n  deleteLabel = 'Delete',\r\n  submitLabel,\r\n  maxWidth = 'xs',\r\n  steps = [] as any[],\r\n  onSubmit,\r\n  onDelete,\r\n  onClose,\r\n  Content,\r\n  validate,\r\n  ...other\r\n}: ComponentProps & any) => {\r\n  const { layout } = useTheme();\r\n  const [confirmDelete, setConfirmDelete] = React.useState(false);\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const [state, setState] = useDialogState(id);\r\n  const { type, open, submitting, loading, showErrors } = state;\r\n  const setShowErrors = React.useCallback(show => setState(prev => ({ ...prev, showErrors: show })), [setState]);\r\n  const title = state.title ? state.title : Title;\r\n  const fields = steps\r\n    .filter(s => s.fields)\r\n    .map(s => s.fields)\r\n    .reduce((t, c) => (t = [...t, ...c]), []);\r\n\r\n  const { values, setValues, hasChanged, errors, mapField } = useValues({\r\n    open,\r\n    fields,\r\n    InitialValues,\r\n    state,\r\n    setState,\r\n    validate,\r\n  });\r\n\r\n  // Re-initialize values when necessary\r\n  React.useEffect(() => {\r\n    open && setActiveStep(0);\r\n    open && setConfirmDelete(false);\r\n  }, [open]);\r\n\r\n  const classes = useStyles({});\r\n  const fullScreen = useFullScreen();\r\n\r\n  const activeSteps = steps.filter(s => isEnabled(typeof s.enabled === 'function' ? s.enabled(values) : s.enabled));\r\n  const currentStep = (activeSteps && activeSteps[activeStep]) || {};\r\n  const stepValidate = currentStep.validate;\r\n\r\n  const activeErrorCount = currentStep.fields ? currentStep.fields.filter(f => isError(f, values, errors)).length : 0;\r\n  \r\n  const values_s = JSON.stringify(values);\r\n  const handleSubmit = React.useCallback(() => {\r\n    if (activeErrorCount > 0) {\r\n      setShowErrors(true);\r\n    } else {\r\n      onSubmit && onSubmit(JSON.parse(values_s));\r\n    }\r\n  }, [activeErrorCount, setShowErrors, onSubmit, values_s]);\r\n\r\n  const handleDelete = React.useCallback(() => {\r\n    onDelete && onDelete(JSON.parse(values_s));\r\n  }, [onDelete, values_s]);\r\n\r\n  const handleConfirmDelete = React.useCallback(() => setConfirmDelete(prev => !prev), [setConfirmDelete]);\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    setState(prev => ({ ...prev, open: false }));\r\n    onClose && onClose();\r\n  }, [setState, onClose]);\r\n\r\n  const handleNext = React.useCallback(() => {\r\n    if (activeErrorCount > 0) {\r\n      setShowErrors(true);\r\n    } else {\r\n      const next = (newValues = undefined) => {\r\n        newValues && setValues(prev => merge(prev, newValues));\r\n        showErrors && setShowErrors(false);\r\n        setActiveStep(prevActiveStep => prevActiveStep + 1);\r\n      };\r\n      stepValidate ? stepValidate(JSON.parse(values_s), next) : next();\r\n    }\r\n  }, [setShowErrors, setValues, showErrors, stepValidate, setActiveStep, activeErrorCount, values_s]);\r\n\r\n  const handleBack = React.useCallback(() => setActiveStep(prevActiveStep => prevActiveStep - 1), [setActiveStep]);\r\n\r\n  const inProgress = loading || submitting;\r\n  const disabled = inProgress || errors['loading'];\r\n\r\n  return (\r\n    <Dialog\r\n      PaperComponent={!fullScreen && draggable ? PaperComponent : Paper}\r\n      fullScreen={fullScreen}\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby={`${id}-dialog-title`}\r\n      aria-describedby={`${id}-dialog-description`}\r\n      className={classes.dialog}\r\n      disableAutoFocus={true}\r\n      maxWidth={currentStep.maxWidth !== undefined ? currentStep.maxWidth : maxWidth}\r\n      fullWidth\r\n      {...other}\r\n    >\r\n      {title !== null && (\r\n        <>\r\n          <DialogTitle id={`${id}-dialog-title`} disableTypography className={classes.dialogTitle}>\r\n            <Grid container justify='space-between' alignItems='center'>\r\n              <Grid item>\r\n                <Typography variant='h6' className={classes.capitalize}>\r\n                  {title ? title : [type, id].join(' ')}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                <Tooltip title='Close' placement='left'>\r\n                  <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Grid>\r\n            </Grid>\r\n          </DialogTitle>\r\n          <Divider />\r\n          {!confirmDelete && (\r\n            <DialogActions>\r\n              <Grid container style={{ paddingLeft: 12, paddingRight: 12 }} alignItems='center'>\r\n                <Grid item xs>\r\n                  <Typography color='textSecondary'>{currentStep.label ? currentStep.label : currentStep.id}</Typography>\r\n                </Grid>\r\n                {activeSteps.length > 1 && (\r\n                  <Grid item>\r\n                    <Chip color='primary' label={`${activeStep + 1} of ${activeSteps.length}`} />\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n            </DialogActions>\r\n          )}\r\n        </>\r\n      )}\r\n      <DialogContent dividers>\r\n        <ErrorGate error={errors['loading']}>\r\n          {inProgress && <CircularProgress size={layout.progressSize} className={classes.submitProgress} />}\r\n          <Collapse in={!confirmDelete}>\r\n            {activeSteps.map(({ fields = [], label, onActivate, minWidth }, i) => (\r\n              <Collapse key={i} in={activeStep === i}>\r\n                <Step key={label}>\r\n                  <OnActivate\r\n                    key={label}\r\n                    index={i}\r\n                    activeIndex={activeStep}\r\n                    onActivate={onActivate}\r\n                    values={values}\r\n                    setValues={setValues}\r\n                  >\r\n                    <Grid container alignItems='center' spacing={1}>\r\n                      <Fields fields={fields} mapField={mapField} values={values} />\r\n                    </Grid>\r\n                  </OnActivate>\r\n                </Step>\r\n              </Collapse>\r\n            ))}\r\n          </Collapse>\r\n          {confirmDelete && (\r\n            <Grid container spacing={2} justify='center' alignItems='center'>\r\n              <Grid item>\r\n                <Button onClick={handleConfirmDelete} color='secondary'>\r\n                  Cancel\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button onClick={handleDelete} className={classes.deleteButton}>\r\n                  <DeleteIcon style={{ marginRight: 4 }} />\r\n                  Confirm {deleteLabel}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n        </ErrorGate>\r\n      </DialogContent>\r\n      {!confirmDelete && (\r\n        <DialogActions className={classes.dialogActions}>\r\n          <MobileStepper\r\n            variant='dots'\r\n            steps={activeSteps.length}\r\n            position='static'\r\n            activeStep={activeStep}\r\n            className={classes.mobileStepper}\r\n            nextButton={\r\n              activeStep === activeSteps.length - 1 ? (\r\n                <Button\r\n                  color='primary'\r\n                  size='small'\r\n                  variant='contained'\r\n                  disabled={!hasChanged || disabled}\r\n                  onClick={handleSubmit}\r\n                >\r\n                  Finish\r\n                  <CheckIcon style={{ marginLeft: 4 }} />\r\n                </Button>\r\n              ) : (\r\n                <>\r\n                  <Button size='small' onClick={handleNext} disabled={disabled}>\r\n                    Next\r\n                    <KeyboardArrowRight />\r\n                  </Button>\r\n                </>\r\n              )\r\n            }\r\n            backButton={\r\n              activeStep === 0 && type === 'Edit' && onDelete !== undefined ? (\r\n                <Button\r\n                  className={classes.deleteButton}\r\n                  size='small'\r\n                  variant='contained'\r\n                  onClick={handleConfirmDelete}\r\n                  disabled={disabled}\r\n                >\r\n                  <DeleteIcon style={{ marginRight: 4 }} />\r\n                  {deleteLabel}\r\n                </Button>\r\n              ) : (\r\n                <Button size='small' onClick={handleBack} disabled={activeStep === 0 || disabled}>\r\n                  <KeyboardArrowLeft />\r\n                  Back\r\n                </Button>\r\n              )\r\n            }\r\n          />\r\n        </DialogActions>\r\n      )}\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default GenericStepperDialog;\r\n","import * as React from 'react';\r\nimport { FormControl, FormControlLabel, FormHelperText, Radio as MuiRadio, RadioGroup, Typography } from '@material-ui/core';\r\nimport { isError } from '../../../helpers';\r\nimport OutlinedDiv from '../../general/OutlinedDiv/OutlinedDiv';\r\n\r\nconst Radio = ({ items, value = '', label, variant, error, margin = 'dense' as 'dense', onChange, forceErrorMargin, initialValue = undefined, ...other }) => (\r\n  <FormControl component='fieldset' variant={variant} error={isError(error)} fullWidth margin={margin}>\r\n    <OutlinedDiv label={label}>\r\n      <RadioGroup onChange={onChange} value={value} {...other}>\r\n        {items.map(i => (\r\n          <FormControlLabel\r\n            key={i.value}\r\n            value={i.value}\r\n            control={<MuiRadio size='small' />}\r\n            label={\r\n              <Typography color='textSecondary' variant='body2'>\r\n                {i.label}\r\n              </Typography>\r\n            }\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n      {(forceErrorMargin || error) && <FormHelperText>{error}</FormHelperText>}\r\n    </OutlinedDiv>\r\n  </FormControl>\r\n);\r\n\r\nexport default Radio;\r\n","import React from 'react';\r\nimport * as LayoutStore from '../../../layout/LayoutStore';\r\nimport GenericStepperDialog from '../GenericStepperDialog';\r\nimport { useDialogState } from '../actions';\r\nimport MultiSelectCheck from '../../DialogField/MultiSelectCheck';\r\nimport Radio from '../../DialogField/Radio';\r\nimport {\r\n  Platforms,\r\n  DeveloperTypes,\r\n  Features,\r\n  Conditions,\r\n  Privacies,\r\n  Functionalities,\r\n  Costs,\r\n  ClinicalFoundations\r\n} from '../../../../database/models/Application';\r\nimport Rating from '../../DialogField/Rating';\r\nimport Select from '../../DialogField/Select';\r\n\r\nexport const title = 'Rate New Application';\r\n\r\nexport interface ComponentProps {\r\n  id?: string;\r\n  onClose?: () => any;\r\n}\r\n\r\nexport default function RateNewAppDialog({ id = title, onClose }: ComponentProps) {\r\n  const [{ type }, setDialogState] = useDialogState(id);\r\n\r\n  const processData = LayoutStore.useProcessData();\r\n\r\n  const handleProcessData = (values, Action) => {\r\n    processData({}); // To be completed\r\n    handleClose();\r\n  };\r\n\r\n  const handleSubmit = values => handleProcessData(values, type === 'Edit' ? 'u' : 'c');\r\n  const handleDelete = values => handleProcessData(values, 'd');\r\n\r\n  const handleClose = React.useCallback(() => {\r\n    setDialogState(prev => ({ ...prev, open: false, submitting: false, errors: {} }));\r\n    onClose && onClose();\r\n  }, [setDialogState, onClose]);\r\n\r\n  const steps = [\r\n    {\r\n      label: 'Select supported platforms',\r\n      fields: [\r\n        {\r\n          id: 'platforms',\r\n          label: 'Platforms',\r\n          Field: MultiSelectCheck,\r\n          items: Platforms.map(label => ({ value: label, label })),\r\n          required: true,\r\n          disableCloseOnSelect: false\r\n        },\r\n        {\r\n          id: 'androidLink',\r\n          label: 'Enter link to app on Google Play store',\r\n          required: true,\r\n          active: values => Array.isArray(values.platforms) && values.platforms.includes('Android')\r\n        },\r\n        {\r\n          id: 'iosLink',\r\n          label: 'Enter link to app on the Apple App store',\r\n          required: true,\r\n          active: values => Array.isArray(values.platforms) && values.platforms.includes('iOS')\r\n        },\r\n        {\r\n          id: 'webLink',\r\n          label: 'Enter web link to app',\r\n          required: true,\r\n          active: values => Array.isArray(values.platforms) && values.platforms.includes('Web')\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Application costs and type of developer',\r\n      fields: [\r\n        {\r\n          id: 'costs',\r\n          label: 'Costs Associated with Application',\r\n          Field: MultiSelectCheck,\r\n          items: Costs.map(value => ({ value, label: value })),\r\n          disableCloseOnSelect: false,\r\n          required: true\r\n        },\r\n        {\r\n          id: 'developerType',\r\n          label: 'Developer Type',\r\n          Field: Radio,\r\n          items: DeveloperTypes.map(dt => ({ value: dt, label: dt }))\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Select available features',\r\n      fields: [\r\n        {\r\n          id: 'features',\r\n          label: 'Features',\r\n          Field: MultiSelectCheck,\r\n          items: Features.map(value => ({ value, label: value }))\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Select clinical foundation conditions',\r\n      fields: [\r\n        {\r\n          id: 'clinicalFoundation',\r\n          label: 'Clinical Foundation',\r\n          Field: Select,\r\n          items: ClinicalFoundations.map(value => ({ value, label: value })),\r\n          required: true,\r\n          initialValue: ClinicalFoundations[0]\r\n        },\r\n        {\r\n          id: 'conditions',\r\n          label: 'Supported Conditions',\r\n          Field: MultiSelectCheck,\r\n          items: Conditions.map(value => ({ value, label: value }))\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Select functionality and privacy options',\r\n      fields: [\r\n        {\r\n          id: 'functionalities',\r\n          label: 'Functionality',\r\n          Field: MultiSelectCheck,\r\n          items: Functionalities.map(value => ({ value, label: value }))\r\n        },\r\n        {\r\n          id: 'privacies',\r\n          label: 'Privacy Options',\r\n          Field: MultiSelectCheck,\r\n          items: Privacies.map(value => ({ value, label: value }))\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Enter rating and review',\r\n      fields: [\r\n        { id: 'name', label: 'Enter name of reviewer', xs: 8, initialValue: 'Anonymous', required: true },\r\n        { id: 'rating', label: 'Select Rating', Field: Rating, xs: 4, required: true },\r\n        {\r\n          id: 'review',\r\n          label: 'Enter Review',\r\n          multiline: true,\r\n          rows: 10,\r\n          xs: 12,\r\n          required: true,\r\n          autoFocus: true\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  return <GenericStepperDialog id={id} title={title} onSubmit={handleSubmit} onDelete={handleDelete} steps={steps} onClose={onClose} />;\r\n}\r\n","import * as React from 'react';\r\nimport useComponentSize from '@rehooks/component-size';\r\nimport { useResizeAppBar } from './LayoutStore';\r\n\r\nexport const useAppBarHeightRef = () => {\r\n  let ref = React.useRef(null);\r\n  const { height } = useComponentSize(ref);\r\n  const resizeAppBar = useResizeAppBar();\r\n  React.useEffect(() => {\r\n    resizeAppBar(height);\r\n  }, [resizeAppBar, height]);\r\n  return ref;\r\n};\r\n","import * as React from 'react';\r\nimport { makeStyles, Button, Grid, ButtonGroup, Typography } from '@material-ui/core';\r\nimport { createStyles } from '@material-ui/core';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport logo from '../../images/logo.png';\r\nimport { useLocation, useHistory } from 'react-router';\r\nimport { renderDialogModule } from '../application/GenericDialog/DialogButton';\r\nimport * as RateAppDialog from '../application/GenericDialog/RateNewApp';\r\nimport { useDialogState } from '../application/GenericDialog/actions';\r\nimport { useAppBarHeightRef } from './hooks';\r\nimport { publicUrl } from '../../helpers';\r\n\r\nconst useStyles = makeStyles(({ breakpoints, palette, shadows, layout }: any) =>\r\n  createStyles({\r\n    appBar: {\r\n      background: palette.white\r\n    },\r\n    logo: {\r\n      height: layout.toolbarheight,\r\n      [breakpoints.down('sm')]: {\r\n        display: 'none'\r\n      },\r\n      cursor: 'pointer'\r\n    },\r\n    button: {},\r\n    active: {\r\n      backgroundColor: palette.primary.dark\r\n    },\r\n    toolbar: {\r\n      background: palette.white,\r\n      height: layout.toolbarheight,\r\n      [breakpoints.down('sm')]: {\r\n        height: 64\r\n      }\r\n    }\r\n  })\r\n);\r\n\r\nexport default function ApplicationBar() {\r\n  const classes = useStyles();\r\n  const { pathname } = useLocation();\r\n  const history = useHistory();\r\n\r\n  const changeRoute = React.useCallback(\r\n    (route: string) => event => {\r\n      pathname !== route && history && history.push(route); //only change pages if it is different than the current page\r\n    },\r\n    [history, pathname]\r\n  );\r\n\r\n  const [, setDialogState] = useDialogState(RateAppDialog.title);\r\n\r\n  const handleRateApp = React.useCallback(() => {\r\n    setDialogState({\r\n      type: 'Add',\r\n      open: true\r\n    });\r\n  }, [setDialogState]);\r\n\r\n  return (\r\n    <AppBar ref={useAppBarHeightRef()} position='fixed' color='inherit' elevation={0} className={classes.appBar}>\r\n      {renderDialogModule(RateAppDialog)}\r\n      <Toolbar className={classes.toolbar}>\r\n        <Grid container alignItems='center' spacing={1}>\r\n          <Grid item>\r\n            <img className={classes.logo} src={logo} alt='logo' onClick={changeRoute(publicUrl('/'))} />\r\n          </Grid>\r\n          <Grid item xs>\r\n            <ButtonGroup\r\n              variant='contained'\r\n              size='small'\r\n              color='primary'\r\n              aria-label='contained primary button group'\r\n              fullWidth={true}\r\n              style={{ marginBottom: 8 }}\r\n            >\r\n              <Button\r\n                className={pathname === publicUrl('/Apps') || pathname === publicUrl('/') ? classes.active : undefined}\r\n                onClick={changeRoute(publicUrl('/Apps'))}\r\n              >\r\n                <Typography variant='button' noWrap>\r\n                  Apps\r\n                </Typography>\r\n              </Button>\r\n              <Button className={pathname === publicUrl('/Framework') ? classes.active : undefined} onClick={changeRoute(publicUrl('/Framework'))}>\r\n                <Typography variant='button' noWrap>{`Framework & Questions`}</Typography>\r\n              </Button>\r\n              <Button className={pathname === publicUrl('/Rating') ? classes.active : undefined} onClick={changeRoute(publicUrl('/Rating'))}>\r\n                <Typography variant='button' noWrap>\r\n                  Rating Process\r\n                </Typography>\r\n              </Button>\r\n              <Button className={pathname === publicUrl('/Rate') ? classes.active : undefined} onClick={handleRateApp}>\r\n                <Typography variant='button' noWrap>\r\n                  Rate New App\r\n                </Typography>\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { makeStyles, createStyles, Toolbar, Link, AppBar, Typography, Grid } from '@material-ui/core';\r\nimport { theme } from '../../constants';\r\n\r\nconst useStyles = makeStyles(({ zIndex }: any) =>\r\n  createStyles({\r\n    bottomAppBar: {\r\n      top: 'auto',\r\n      bottom: 0,\r\n      zIndex: zIndex.drawer + 1,\r\n    },\r\n    bottomToolBar: {\r\n      minHeight: (theme as any).layout.footerheight,\r\n    },\r\n  } as any)\r\n);\r\n\r\nexport default function Footer() {\r\n  const classes = useStyles({});\r\n\r\n  return (\r\n    <AppBar position='fixed' color='primary' className={classes.bottomAppBar}>\r\n      <Toolbar className={classes.bottomToolBar}>\r\n        <Grid container justify='space-between'>\r\n          <Grid item xs={4}>\r\n            <Typography noWrap variant='body2'>\r\n              <Link href='https://www.digitalpsych.org/' target='_blank' variant='body2' color='inherit'>\r\n                Division of Digital Psychiatry\r\n              </Link>\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={8}>\r\n            <Typography noWrap variant='body2' align='right'>\r\n              <Link href='https://www.bidmc.org/' target='_blank' variant='body2' color='inherit'>\r\n                2020 Beth Israel Deaconess Medical Center\r\n              </Link>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\r\nimport { AppState } from '../../../store';\r\nimport { SnackBarState } from './reducers';\r\n\r\nexport const updateSnackBar = (payload: SnackBarState) => ({ type: 'SNACKBAR', payload });\r\nexport const useSnackBar = (): [SnackBarState, (SnackBarProps) => void] => {\r\n  const dispatch = useDispatch();\r\n  const state: SnackBarState = useSelector((state: AppState) => state.snackBar, shallowEqual);\r\n  const setState = React.useCallback((payload: SnackBarState) => dispatch(updateSnackBar(payload)), [dispatch]);\r\n  return [state, setState];\r\n};\r\n","import * as React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useSnackBar } from './actions';\r\nimport clsx from 'clsx';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n}));\r\n\r\nexport default function SnackBar({ className = undefined, ...other }) {\r\n  const classes = useStyles({});\r\n  const [{ open, message, variant = 'success' }, setSnackBar] = useSnackBar();\r\n  const handleClose = React.useCallback((event, reason) => reason !== 'clickaway' && setSnackBar({ open: false }), [setSnackBar]);\r\n  const Icon = variantIcon[variant];\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'right',\r\n      }}\r\n      open={open}\r\n      autoHideDuration={3000}\r\n      onClose={handleClose}\r\n    >\r\n      <SnackbarContent\r\n        className={clsx(classes[variant], className)}\r\n        aria-describedby='client-snackbar'\r\n        message={\r\n          <span id='client-snackbar' className={classes.message}>\r\n            <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n            {message}\r\n          </span>\r\n        }\r\n        action={[\r\n          <IconButton key='close' aria-label='close' color='inherit' onClick={handleClose as any}>\r\n            <CloseIcon className={classes.icon} />\r\n          </IconButton>,\r\n        ]}\r\n        {...other}\r\n      />\r\n    </Snackbar>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { makeStyles, createStyles } from '@material-ui/core';\r\nimport ApplicationBar from './ApplicationBar';\r\nimport Footer from './Footer';\r\nimport SnackBar from '../application/SnackBar/SnackBar';\r\n\r\nconst useStyles = makeStyles(({ breakpoints, palette, mixins, layout }: any) =>\r\n  createStyles({\r\n    root: {\r\n      display: 'static',\r\n    },\r\n    content: {\r\n      flexGrow: 1,\r\n      backgroundColor: palette.background.default,\r\n      [breakpoints.down('sm')]: {\r\n        marginLeft: 0,\r\n        flexShrink: 0,\r\n      },\r\n    },\r\n    innerContent: {\r\n      padding: layout.contentpadding,\r\n    },\r\n    toolbar: {\r\n      background: palette.white,\r\n      height: layout.toolbarheight,\r\n      [breakpoints.down('sm')]: {\r\n        height: 64,\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nexport default function Layout({ children }) {\r\n  const classes = useStyles({});\r\n  return (\r\n    <div data-testid='app-container' className={classes.root}>\r\n      <main className={classes.content}>\r\n        <ApplicationBar />\r\n        <div className={classes.toolbar} />\r\n        <div className={classes.innerContent}>{children}</div>\r\n        <Footer />\r\n        <SnackBar />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport Routes from './routes';\r\nimport { ConnectedRouter } from 'connected-react-router';\r\nimport { AppState } from '../../store';\r\nimport { connect } from 'react-redux';\r\nimport Layout from './Layout';\r\n\r\nexport interface AppRouterProps {\r\n  history?: any;\r\n}\r\n\r\nfunction AppRouter(props: AppRouterProps) {\r\n  const { history } = props;\r\n  return (\r\n    <ConnectedRouter history={history}>\r\n      <Layout>\r\n        <Routes />\r\n      </Layout>\r\n    </ConnectedRouter>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProp: AppRouterProps): AppRouterProps => {\r\n  var history = ownProp.history;\r\n  const location = state && state.router && state.router.location; //location from redux store (previously persisted location)\r\n  history.location = location ? location : history.location; //if a previous location exists, then set it, otherwise use the passed in/default value\r\n  return { history };\r\n};\r\n\r\nexport default connect(mapStateToProps)(AppRouter);\r\n","import Application, { Costs, Privacies, ClinicalFoundations, Features, Functionalities, Platforms, Conditions } from './models/Application';\r\nimport { randomInt } from '../helpers';\r\nimport DB from './dbConfig';\r\nimport Rating from './models/Rating';\r\n\r\n// Returns a random entry from an array.  If multiple is set to true, return an an array with a random number of random elements\r\nconst getRandom = (array = [], multiple = false, min = 1) =>\r\n  !multiple ? array[randomInt(0, array.length - 1)] : Array.from({ length: randomInt(min, array.length) }, () => getRandom(array));\r\n\r\nexport async function asyncSeed(count = 300, force = false) {\r\n  if (process.env.NODE_ENV === 'development' || force) {\r\n    console.log(`Seeding database with ${count} records...`);\r\n    var success = 0;\r\n    var failed = 0;\r\n    var r_success = 0;\r\n    var r_failed = 0;\r\n    for (var i = 0; i < count; i++) {\r\n      const response = await DB.applications.insert({\r\n        name: `Test Application ${i + 1}`,\r\n        company: getRandom(companies),\r\n        platforms: getRandom(Platforms, true),\r\n        costs: getRandom(Costs, true),\r\n        conditions: getRandom(Conditions, true),\r\n        privicies: getRandom(Privacies, true, 0),\r\n        clincialFoundation: getRandom(ClinicalFoundations),\r\n        features: getRandom(Features, true, 0),\r\n        functionalities: getRandom(Functionalities, true, 0)\r\n      } as Application);\r\n      if (response && response.ok === true) {\r\n        success++;\r\n        for (var j = 0; j < randomInt(0, 5); j++) {\r\n          const r_response = await DB.ratings.insert({\r\n            appId: response.id,\r\n            name: 'Anonymous',\r\n            review: 'This is a test review.',\r\n            rating: randomInt(1, 5)\r\n          } as Rating);\r\n          if (r_response && r_response.ok === true) {\r\n            r_success++;\r\n          } else {\r\n            r_failed++;\r\n          }\r\n        }\r\n      } else {\r\n        failed++;\r\n      }\r\n    }\r\n    console.log(`Successfully seeded ${success} application records. ${failed} failed.`);\r\n    console.log(`Successfully seeded ${r_success} rating records. ${r_failed} failed.`);\r\n  }\r\n}\r\n\r\nconst companies = [\r\n  '360Networks Inc.',\r\n  '3DLabs Inc. Ltd.',\r\n  '724 Solutions Inc.',\r\n  'A B Electrolux',\r\n  'A B SKF',\r\n  'A B Volvo',\r\n  'A R T International Inc.',\r\n  'Aeterna Laboratories Inc.',\r\n  'Agnico-Eagle Mines Ltd.',\r\n  'Agrium Inc.',\r\n  'AimGlobal Technologies Co. Inc.',\r\n  'Ainsworth Lumber Co. Ltd.',\r\n  'Air Canada',\r\n  'Akzo Nobel N.V.',\r\n  'Aladdin Knowledge Systems Ltd.',\r\n  'BVR Systems Ltd.',\r\n  'BVR Technologies Ltd.',\r\n  'Cable and Wireless plc',\r\n  'Cable Satisfaction International Inc.',\r\n  'Cabletel Communications Corp.',\r\n  'Cableuropa, S.A.',\r\n  'CRH plc',\r\n  'Cristalerias de Chile S.A.',\r\n  'Crosswave Communications Inc.',\r\n  'Crow Technologies 1977 Ltd.',\r\n  'Crucell N.V.',\r\n  'Embratel Participacoes S.A.',\r\n  'Emco Ltd.',\r\n  'Empresa Electrica Pehuenche S.A.',\r\n  'Empresa Nacional de Electricidad S.A. - Endesa',\r\n  'Empresas ICA Sociedad Controladora S.A.',\r\n  'Enbridge Inc.',\r\n  'Endesa S.A.',\r\n  'Enel S.p.A.',\r\n  'Energis plc',\r\n  'Energy Power Systems Ltd.',\r\n  'Enerplus Resources Fund',\r\n  'G. Willi-Food International Ltd.',\r\n  'Gala Group Holdings plc',\r\n  'Galen Holdings plc',\r\n  'Gallaher Group plc',\r\n  'Gearbulk Holding Ltd.',\r\n  'Gee-Ten Ventures Inc.',\r\n  'Gemplus International S.A.',\r\n  'Gener S.A.',\r\n  'Head Holding Unternehmensbeteiligung GMBH',\r\n  'Head N.V.',\r\n  'Healthcare Technologies Ltd.',\r\n  'Hellenic Telecommunications Organization S.A. - OTE',\r\n  'Hemosol Inc.',\r\n  'Hibernia Foods plc',\r\n  'Highway Holdings Ltd.',\r\n  'Highwood Resources Ltd.',\r\n  'Hilan Tech Ltd.',\r\n  'Hilton Petroleum Ltd.',\r\n  'Hitachi Ltd.',\r\n  'HMV Media Group plc',\r\n  'Hollinger Inc.',\r\n  'Honda Motor Co. Ltd.',\r\n  'Household Financial Corp. Ltd.',\r\n  'HQI Translec Chile S.A.',\r\n  'HSBC Bank plc',\r\n  'HSBC Holdings plc',\r\n  'Huaneng Power International Inc.',\r\n  'Hummingbird Ltd.',\r\n  'Huntingdon Life Sciences Group plc',\r\n  'Hurricane Hydrocarbons Ltd.',\r\n  'Husky Energy Inc.',\r\n  'Hydro One Inc.',\r\n  'Hydrogenics Corp.',\r\n  'I.I.S. Intelligent Information Systems Ltd.',\r\n  'iaNett International Systems Ltd.',\r\n  'I-Cable Communications Ltd.',\r\n  'ICICI Bank Ltd.',\r\n  'ICICI Ltd.',\r\n  'ICON plc',\r\n  'ICOS Vision Systems Corp N.V.',\r\n  'ICTS International N.V.',\r\n  'Korea Telecom Corp.',\r\n  'Korea Thrunet Ltd.',\r\n  'Kowloon-Canton Railway Corp.',\r\n  'KPNQwest N.V.',\r\n  'Kubota Corp.',\r\n  'Kyocera Corp.',\r\n  'Levon Resources Ltd.',\r\n  'Lihir Gold Ltd.',\r\n  'Linea Aerea Nacional Chile S.A.- LanChile',\r\n  'LinuxWizardry Systems, Inc.',\r\n  'Lion Bioscience Aktiengesellschaft',\r\n  'Lions Gate Entertainment Corp.',\r\n  'Liquidation World Inc.',\r\n  'LJ International Ltd.',\r\n  'Lloyds TSB Group plc',\r\n  'LML Payment Systems Inc.',\r\n  'Localiza Rent-a-Car S.A.',\r\n  'Loewen Group Inc.',\r\n  'LogicalOptions International Inc.',\r\n  'Logitech International S.A.',\r\n  'London Electricity Group plc',\r\n  'London Pacific Group Ltd.',\r\n  'Vernalis Group plc',\r\n  'Veronex Technologies Inc.',\r\n  'Versatel Telecom International N.V.',\r\n  'VI Group plc',\r\n  'Videsh Sanchar Nigam Ltd.',\r\n  'Vimpel Communications',\r\n  'Vina Concha y Toro S.A.',\r\n  'Virgin Express Holdings plc',\r\n  'Virginia Gold Mines Inc.',\r\n  'Zarlink Semiconductor Inc.',\r\n  'Zemex Corp.',\r\n  'Zi Corp.',\r\n  'Ztest Electronics Inc.'\r\n];\r\n","import React from 'react';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport configureStore from './storeConfig';\nimport { createBrowserHistory } from 'history';\nimport { AppState } from './store';\nimport { persistStore } from 'redux-persist';\nimport ViewPort from './components/layout/ViewPort';\nimport AppRouter from './components/layout/AppRouter';\nimport { theme } from './constants';\nimport { asyncSeed } from './database/seed';\n\nexport const history = createBrowserHistory(); // Create browser history to use in the Redux store'\nexport const initialState = (window as any).initialReduxState as AppState; // Get the application-wide store instance, prepopulating with state from the server where available.\nexport const store = configureStore(history, initialState) as any; //Setup the global store object\nexport const getState = store.getState;\nexport const persistor = persistStore(store); //Setup the global persistor\n(window as any).seed = (count, force) => asyncSeed(count, force);\n\nfunction AppWrapper(props: any) {\n  const { children } = props;\n  return (\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <MuiThemeProvider theme={theme}>\n          <ViewPort>{children}</ViewPort>\n        </MuiThemeProvider>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nfunction App() {\n  return (\n    <AppWrapper>\n      <React.Suspense fallback={<></>}>\n        <AppRouter history={history} />\n      </React.Suspense>\n    </AppWrapper>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport { printHeader } from './helpers';\n\nprintHeader();\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { AppState } from './store';\r\nimport { theme } from './constants';\r\nimport packageJson from '../package.json';\r\nimport Decimal from 'decimal.js-light';\r\n\r\nexport function hostAddress(append?) {\r\n  return (\r\n    window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '') + (append !== undefined ? append : '')\r\n  );\r\n}\r\n\r\nexport const debugSettings = {\r\n  debugoutput: false,\r\n  logviewport: false,\r\n  logrender: true,\r\n  logmapping: false,\r\n  logreducer: false,\r\n  logselectors: false,\r\n  logform: true,\r\n  logformupdates: true,\r\n  debugfieldonhover: false\r\n};\r\n\r\nexport function printHeader() {\r\n  console.log(\r\n    `%c\r\n    \r\n                        \r\n             \r\n  \r\n     \r\n                                 \r\n                                      \r\n         \r\n    Host: ${hostAddress()}\r\n          \r\n          Environment: ${process.env.NODE_ENV}\r\n     Version: ${packageJson.version}\r\n                                    \r\n`,\r\n    'font-family:monospace;color:' + theme.palette.primary.main + ';font-size:12px;'\r\n  );\r\n}\r\n\r\nexport function getViewPortHeight(state: AppState) {\r\n  return state.layout.height;\r\n}\r\n\r\nexport function getLayoutHeight(state: AppState) {\r\n  return getViewPortHeight(state);\r\n}\r\n\r\nexport const setIfEmpty = value => (value === undefined || value === null ? '' : value);\r\nexport const checkEmpty = value => value === undefined || value === null || value === '' || (Array.isArray(value) && value.length === 0);\r\nexport const undefinedIfEmpty = value => (checkEmpty(value) ? undefined : value);\r\nexport const isDefined = value => value !== undefined && value !== null;\r\nexport const hasChanged = (current, initial) => JSON.stringify(current) !== JSON.stringify(initial);\r\n\r\nexport const getKey = ({ container, object, id }: any) => [container, object, id].filter(v => !checkEmpty(v)).join('.');\r\n\r\nexport function validateEmail(email) {\r\n  var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(String(email).toLowerCase());\r\n}\r\n\r\nexport function capitalize(s) {\r\n  if (typeof s !== 'string') return '';\r\n  return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n\r\nexport const uncapitalize = s => {\r\n  if (typeof s !== 'string') return '';\r\n  return s.charAt(0).toLowerCase() + s.slice(1);\r\n};\r\n\r\nexport function copyToLower(obj = {}) {\r\n  var key,\r\n    keys = Object.keys(obj);\r\n  var n = keys.length;\r\n  var newobj = {};\r\n  while (n--) {\r\n    key = keys[n];\r\n    newobj[uncapitalize(key)] = obj[key];\r\n  }\r\n  return newobj;\r\n}\r\n\r\n// Converts a string, number or boolean to boolean with default false\r\nexport const bool = x =>\r\n  typeof x === 'boolean'\r\n    ? x\r\n    : typeof x === 'number'\r\n    ? x === 1\r\n      ? true\r\n      : false\r\n    : typeof x === 'string'\r\n    ? x === '1'\r\n      ? true\r\n      : x.toLowerCase() === 'true'\r\n      ? true\r\n      : false\r\n    : false;\r\n\r\n// If a function, then return the result of the function call with props passed in.  Else return the value\r\nexport const evalFunc = (value, props = undefined) => (typeof value === 'function' ? value(props) : value);\r\n\r\nexport const emptyUndefined = value => (value === false || value === null ? undefined : value);\r\nexport const isError = value => (value === undefined || value === null || value === '' ? false : true);\r\n\r\nexport const copyDeleteKey = (key, obj) => deleteKey(key, { ...obj });\r\n\r\nexport const deleteKey = (key, obj) => {\r\n  delete obj[key];\r\n  return obj;\r\n};\r\n\r\nexport const getLabel = f => (f.label === null ? undefined : f.label !== undefined ? f.label : f.id);\r\n\r\nexport function spread(final, current) {\r\n  return { ...final, ...current };\r\n}\r\n\r\nexport function isEmpty(str) {\r\n  return !str || 0 === str.length;\r\n}\r\n\r\nexport function triggerResize() {\r\n  window.dispatchEvent(new CustomEvent('resize')); //Makes the indicator start animating\r\n  setTimeout(() => window.dispatchEvent(new CustomEvent('resize')), 200); //Ensures the animation resized correctly after the drawer finishes opening/closing\r\n}\r\n\r\nexport function randomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function decimalsum(total: Decimal, amount: Decimal) {\r\n  return total.add(amount);\r\n}\r\n\r\nexport const publicUrl = path => process.env.PUBLIC_URL + path;","import React from 'react';\r\nimport { Reducer } from 'redux';\r\nimport { spread, evalFunc } from '../../../helpers';\r\nimport { AppState, AppThunkAction } from '../../../store';\r\nimport { SortComparator } from './tablehelpers';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nexport type State = Table[];\r\nconst defaultValues: Table[] = [];\r\n\r\nexport interface Table {\r\n  id?: string;\r\n  tab?: string; //indicates the current tab we are viewing from the tab selector\r\n  searchtext?: string;\r\n  columnfiltervalue?: string | boolean;\r\n  columnfiltercolumn?: string;\r\n  orderBy?: string;\r\n  orderDirection?: 'asc' | 'desc';\r\n  sortComparator?: SortComparator;\r\n  filters?: [];\r\n}\r\n\r\nexport interface IRehydrate {\r\n  type: 'persist/REHYDRATE';\r\n}\r\n\r\ninterface ITableUpdate {\r\n  type: 'TABLE_UPDATE';\r\n  table: Table;\r\n}\r\ntype KnownAction = ITableUpdate | IRehydrate;\r\n\r\nexport const useTableUpdate = () => {\r\n  const dispatch = useDispatch();\r\n  return React.useCallback((t: Table) => dispatch(actionCreators.ATableUpdate(t)), [dispatch]);\r\n};\r\n\r\nexport const useTableFilterUpdate = () => {\r\n  const dispatch = useDispatch();\r\n  return React.useCallback((id, filters) => dispatch(actionCreators.ATableFilterUpdate(id, filters)), [dispatch]);\r\n};\r\n\r\nexport const useTable = name => useSelector((state: AppState) => state.table[name] || {});\r\n\r\nexport function useTableFilterValues(name): any {\r\n  const { filters: values = {} } = useTable(name);\r\n  const tableFilterUpdate = useTableFilterUpdate();\r\n  const setValues = React.useCallback(\r\n    values => {\r\n      tableFilterUpdate(name, values);\r\n    },\r\n    [name, tableFilterUpdate]\r\n  );\r\n  return [values, setValues];\r\n}\r\n\r\nexport const actionCreators = {\r\n  ATableUpdate: (table: Table): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n    dispatch({ type: 'TABLE_UPDATE', table });\r\n  },\r\n  ATableFilterUpdate: (id: string, filters): AppThunkAction<KnownAction> => (dispatch, getState) => {\r\n    var state = getState();\r\n    dispatch({ type: 'TABLE_UPDATE', table: { id, filters: evalFunc(filters, (state.table[id] || {}).filters || {}) } });\r\n  }\r\n};\r\n\r\nfunction setDefaults(state: State, tables: Table[]): State {\r\n  //If default table doesnt exist in state, then populate the values, then combine state with upated state\r\n  return tables\r\n    .filter(t => !state[t.id])\r\n    .map(t => updateState(state, t))\r\n    .reduce(spread, { ...state });\r\n}\r\n\r\nfunction updateState(state: State, table: Table) {\r\n  var newState = { ...state };\r\n  newState[table.id] = table;\r\n  if (state && state[table.id]) {\r\n    //If table already exists, keep any other existing props\r\n    newState[table.id] = {\r\n      ...state[table.id],\r\n      ...table\r\n    };\r\n  }\r\n  return newState;\r\n}\r\n\r\nexport const reducer: Reducer<State> = (state: State, action: KnownAction): State => {\r\n  switch (action.type) {\r\n    case 'TABLE_UPDATE':\r\n      return updateState(state, action.table);\r\n    case 'persist/REHYDRATE':\r\n      const payload: AppState = action && (action as any).payload;\r\n      const hydratestate: State = payload && payload.table;\r\n      return setDefaults(hydratestate ? hydratestate : [], defaultValues);\r\n    default:\r\n  }\r\n  return setDefaults(state ? { ...state } : [], defaultValues);\r\n};\r\n","import { createMuiTheme, Theme } from '@material-ui/core/styles';\r\n\r\nconst basetheme = createMuiTheme({});\r\n\r\nexport const theme = createMuiTheme({\r\n  layout: {\r\n    toolbarheight: 132, //The height of the top toolbar\r\n    contentpadding: 8, //The padding around the inner layout content\r\n    contentrowspacing: 2, //the spacing between each row of content (toolbar, filterbar, table, etc)\r\n    tablefooterheight: 20, //The height of the table footer\r\n    tablefilterbarheight: 52, //The height of the table filter selector (category selector)\r\n    tabletoolbarheight: basetheme.spacing(5.5), // The height of the top bar on the table, also the height of the secondary tabselector\r\n    tableRowHeight: basetheme.spacing(6), // Height of table rows\r\n    footerheight: 24, //The height of the bottom toolbar\r\n    progressSize: 80, // size of the circulatr progress indicator shown when dialogs are submitting\r\n  },\r\n  overrides: {\r\n    MuiTooltip: {\r\n      // Name of the component  / style sheet\r\n      tooltip: {\r\n        // Name of the rule\r\n        maxWidth: 700,\r\n      },\r\n    },\r\n    MuiTypography: {\r\n      // Name of the component  / style sheet\r\n      h6: {\r\n        lineHeight: 1.2,\r\n      },\r\n      subtitle1: {\r\n        // Name of the rule\r\n        lineHeight: 1.4,\r\n        //background: basetheme.palette.background.default,\r\n      },\r\n    },\r\n    MuiDialogTitle: {\r\n      // Name of the component  / style sheet\r\n      root: {\r\n        // Name of the rule\r\n        paddingLeft: 16,\r\n        paddingRight: 16,\r\n        paddingTop: 12,\r\n        paddingBottom: 12,\r\n        //background: basetheme.palette.background.default,\r\n      },\r\n    },\r\n    MuiDialogActions: {\r\n      // Name of the component  / style sheet\r\n      root: {\r\n        // Name of the rule\r\n        background: basetheme.palette.grey[100],\r\n\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        flex: '0 0 auto',\r\n        margin: 0,\r\n        padding: '8px 4px',\r\n        //padding: 0,\r\n      },\r\n    },\r\n    MuiListItemIcon: {\r\n      root: {\r\n        color: basetheme.palette.grey[100],\r\n      },\r\n    },\r\n  },\r\n} as Theme & any);\r\n"],"sourceRoot":""}